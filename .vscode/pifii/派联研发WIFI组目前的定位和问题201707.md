
派联研发WIFI组目前的定位和问题


一、人员组成

首先，这边WIFI研发团队主要分为两个部分，系统和嵌入式。

罗厅属于系统组核心人员，杨志跃在配合他做事。
嵌入式方面，江义波属于设备类应用层开发，主要负责与平台的通讯协议对接部分。
周连朋主要做OpenWRT系统的调整，以对应不同的客户需求。
皮晓聪主要做驱动和应用部分，在两方面都属于核心人员。
林智华主要做硬件AC的管理页面部分，有一定平台经验，可能可以成为核心。

陈俞安和王斌理论上不属于研发团队，可归为测试组+对外技术支持+一些其他的商务对接。



二、WIFI产品

WIFI产品目前分为两个系列，一个是家用路由系列，一个是商业AP（室内、室外）。
还有一个是这两个月才开始的基于OpenWRT的串联AC设备。由林智华和皮晓聪配合开发。
目前已有的系统也基本是从家用路由网管平台一路改进过来。

整体上看，家用路由和AP部分主要存在以下问题：

1. 早期的设备存在原生的不稳定，造成这个问题一方面是由于方案厂商往往将不成熟的产品以底价方式推向市场，在客户使用中不断反馈的问题改进（参照通则1860方案改进历程）。派联这边早期的路由和早期从智博通采购的AP都存在原生的不稳定，但实际上这边对较为底层的问题是无力修改的。
解决办法：同样的基础方案生产厂商很多，找已经大量出货趋于稳定的版本会很大程度避免这个问题。比如后来朱卫平找的若干AP产品，在性能和稳定性上都较之前产品有了巨大提升。

2. 另一方面，无论是早期的设备还是新的设备，客户所要求开发新功能给的时间极为有限，往往皮工开发完成后产品没有进行全面测试，测试环节仅仅存在于工程师的简单自测。
解决办法：每次周工皮工在给对某一个或多个功能做出修改之后，须在通则经过测试再发到用户手上。对于个性定制的用户，代码库上封版本。

3. 内容审查部分没有涉及。这个基础功能的缺失直接导致了商业AP和AC的高级功能无法实现。直观的体现就是商业WIFI部分大部分核心功能目前无法实现。
解决办法：此类功能需要修改底层的转发部分，并可能会对转发性能造成重大影响，需要大量时间开发和测试，建议在产品开发工作较少的时候进行。或者由我或通则其他工程师协作进行。

4 平台侧功能的不完善或不稳定会导致用户或者办事处归咎为AP本身，例如上网认证等。
解决办法：认证功能不完善的问题由平台解决，AP只需要确认解决认证跳转和无感知认证功能就好。对于免费短信认证短信下发慢的问题销售人员有义务提前告知用户短信的时间上的不稳定性，如果想要快速请采购本地运营商的云MAS等企业短信服务。平台这边的问题我会在目前项目之后逐一解决。

5. 产品的安装部署存在很多问题，我们各办事处的工程人员由于缺乏WIFI覆盖的基础知识培训，在实际部署的时候往往会出现很多违反常识的做法。例如将小功率AP试图覆盖大范围、将AP部署在很高的地方、将AP和移动基站部署在一起等。最常出现的问题就是对设备的型号的穿墙性能估计过高，导致穿墙后信号极差，极限用户连接的不稳定反过来影响信号正常的用户，引起投诉。
解决办法：对各办事处的销售以及工程人员进行培训，对于网络信号问题在设计装位图以及部署时候要及时与技术人员沟通，不能想当然。对出现的问题要一五一十讲清楚当前的部署状况，以便我们尽快解决问题。



三、WIFI平台

平台主要分为家用路由平台和商业WIFI平台，两者一脉相承，架构体系几乎完全相同。
平台目前的核心功能就是路由、AP等设备管理，Portal和认证部分虽大量使用但问题多多，其他功能并无大量实用经验。
商业WIFI的大部分功能就是个空壳，不过这个问题原因在于AP设备功能缺失，指令配置可下发，但是AP实现不了。
平台在设计之初的各个层面都没有考虑到大规模并发，在碰到严重的性能瓶颈之后引入了Redis机制，暂时缓解了1W~2W级别的在线设备访问。

解决办法：目前已经从压力最大的设备访问数据接口开始解决性能问题。在广西项目完成后可以将类似做法移植到商业WIFI平台。从下个版本开始，系统整体架构需要重新设计，用服务集群加分布式方式彻底解决大量终端的压力问题，让系统可根据压力增长简单扩充。



四、人员方面

人员方面，WIFI组 罗厅、皮小聪、周连朋属于核心开发人员。皮工在能力上可以完全接过江义波的工作。
目前仍然普遍存在政令难推以及阳奉阴违的问题，部分人还抱有“两手准备”的心态，在进一步沟通后我会开会重申制度，对于仍然消极的人会开始取代方案。



五、其他不规范的地方

1. 代码管理严重缺失，在我要求之下找了台机器做代码库，但是属SVN，并无git等版本管理功能，也无法通过提交日志查看开发人员实际进度。
解决办法：配置本地git代码服务器，并且代码仓直接和深圳同步。

2. 无本地测试服务器，导致所有功能性能测试全部要依赖实际部署后才知道，本地无法做全面测试联调，在阿里云上实地部署之后一个问题或者性能瓶颈往往会直接影响所有现存在线用户，导致AP工作不稳定或者认证服务出现问题。极大的拖延了Debug进度。
解决办法：配置本地测试服务器，模拟服务器真实环境。在服务端每个小更新之后叫陈俞安或者王斌及时测试，也可以端口映射到公网后叫通则的中测即时测试。晚上设备不用断电断网，真实AP以及PC上的模拟终端对服务器做长时间工作稳定测试。