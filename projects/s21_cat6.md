

#### 2019.05.31
[上网+IPTV直播点播+任意设备看直播+IPTV抓包地址心得](https://www.right.com.cn/forum/thread-307948-1-1.html)  
**何旭晨**  S21的CPE，我们的页面目前还有发射功率，WIFI工作模式等等，选择越多，最终用户应该会越烦，建议做得最简单；  
向吕强问：MT7621A的LED点灯，有没有相关的说明文档？规格书上面没有写清楚。我们想要用PORT0和PORT1，每个PORT需要点两个灯
**郑达**    宽翼 bug：1. 锁小区只在4g only下有效，设置成4g优先会有概率锁不上  
2. 锁的频点不能超过模块所支持的频段支持的频点范围，如果锁上超出范围的不存在的小区，就会锁失败。（会注上其它小区）  
需求/问题 | 提出时间 |  解决时间 | 解决方案 | 目前进 度
------|---|----|----|------
两路发at命令导致模块异常 | 2019.04.03 | |高通回复需要升级最新3.1基线才能解决，高通计划新基线要到6月12才能出来|
三路数据apn外，请多提供一路专门拨volte apn | 2019.05.30 ||这个一直支持的|
锁小区功能 | 2019.05.31 ||正在跟你们封工一起分析和处理这个问题|
#### 2019.05.30
**喻潇**  TR069和WIFI还没测完，问题也提交禅道，请将浏览器问题、网页问题、配置问题先修正，方便测试。  
**江义波**  配置升级的没做  
**郑达**  禅道用起来不错，喻潇已经把bug提交上去，有配图。ipv6,pc已经得到了公网的ip.  
ie阻塞的问题，实在没有办法，改用c写了fread，就没有问题。
#### 2019.05.29
**王伍**  BRIDGE目录下有[IGMP的代码](http://192.168.1.93:8000/s21_cat6/VT6526.rar), [ds6526100datasheet](http://192.168.1.93:8000/s21_cat6/DS6526100.pdf)  
**郑达** 最新版本v1.06<hide>  
web: 高级设置页面下新增DDNS分页（董锡文）  
产测软件：升级程序，配置使用md5进行包校验（封远钊）  
增加upnp功能并添加调用接口（封远钊）  
解决tr069 wan口检测失败问题（江义波）  
web: 添加upnp网页（向杰）  
web: 更改登录界面（董锡文）  
web: 解决网页不断刷新问题（向杰）  
web: 解决登录页4G info名称不规范问题（董锡文）  
web: 修改wan info页面内容显示（董锡文）  
增加读工厂区imei的接口（郑达）  
新增解puk接口和修改pin码的接口（封远钊）  
默认tr069为关闭状态（江义波）  
web: 移除了HOME页面，登录后显示页面为4G Information页面（董锡文）  
web: 优化4G Info页面显示（董锡文）  
web: 调整upnp界面（向杰）  
web: 添加pin码功能，包括解pin，锁pin，更改pin，解puk（向杰）  
web: 实现了WAN Info页面右侧的help内容显示（董锡文）  
web: 实现了DHCP Settings页面LAN Device List分页右侧的help内容显示,同时修复了DHCP Settings页面的Main DHCP Settinga分页、Auxiliary DHCP1 Setting分页以及Auxiliary DHCP2 Setting分页右侧的help内容显示问题（董锡文）  
web: 修改version info页面的imei, sn显示（董锡文）
</hide>
#### 2019.05.28
**郑达**  tr069江义波修改后可以在服务器上看到数据了。  
ie卡住的问题，封远钊跟踪代码，认为是mini_httpd没有给cgi标准输入。  
网关消失的问题，是自己的程序的问题，已解。  
宽翼还要2个问题，apn数量包括volte也只有3个。at并发会挂。  
ipv6 设备可以ping到google和dns。在看给pc分配ip的部分。  
#### 2019.05.27
**何旭晨**  第三板，wifi部分要重新调整，估计要到6月下旬。
#### 2019.05.24
**何旭晨**  [规格书](http://192.168.1.93:8000/%E8%A7%84%E6%A0%BC%E4%B9%A6/ZLT%20S21%E8%A7%84%E6%A0%BC%E4%B9%A6V1.0.docx)  
**郑达**  [IPv6技术详解：基本概念、应用现状、技术实践（上篇）](https://www.cnblogs.com/imstudy/p/9056334.html)
#### 2019.05.23
**郑达**  看起来拿到ipv6地址了，但是路由等怎么设置还是问题。  
**江义波** 是imei相同导致上报没有发现。
#### 2019.05.22
**李柱栋** 打流试图分流网络数据到其他cpu没有成功。修改usb buff，如果太大，不能加载。  
**何旭晨** 已经发第三板。  
**郑达**  昨天修正了测试的大部分bug, 出了测试程序继续测试。生产工具方面赵金估计要下周。ipv6还在验证。发出版本1.05<hide>  
web: 在设置tr069服务器后，重启tr069应用（向杰）  
web: 网页读取/设置配置都直接与配置的语言选项挂钩（向杰）  
web: 添加ddns数据交互接口（向杰）  
产测: 添加写sn接口，升级系统接口，配置升级接口（封远钊）  
web: 解决锁物理小区代码冲突导致的网页不能刷新问题（向杰）  
web: 解决ie浏览器崩溃问题（向杰）  
</hide>
#### 2019.05.21
**徐刚雄** 发出LT30模块引脚使用配置列表(P19H)_v1.0 <http://192.168.1.93:8000/LT30模块引脚使用配置列表(P19H)_v1.0.xlsx>  
**喻潇** 存在ie崩溃问题。华为设备铭牌上没有mac，设备有多个mac，写的时候要写wifi的mac。  
**向杰** 改bug表，登录界面还要美化一点。发出添加网页步骤流程 http://192.168.1.93:8000/网页添加步骤说明.docx  
**郑达** 希望把禅道这个系统用起来。  
**李柱栋**  usb驱动比较复杂，不容易看。  
**宽翼** ipv6还需要另外一个opkg的软件包, 不要用dhcp，是无状态地址转换。  
#### 2019.05.20
**陈良**  郑达 sn是否需要定制化，：一般自己使用设备类型+imei，如果客户需要定制化，需要生产工具配合写入。  
**郑达** bug还剩下4条：<hide>web显示	2.4g wifi鉴权方式简化  
web设置	防火墙->filtering rules 几个按钮规则没有实现  
系统	IE浏览器，以及360的兼容模式，待机1分钟浏览器就崩溃了  
web设置	TR069开启设置后，服务器没收到上报；TR069无法测试  
</hide>
**郑达** 发出版本1.04<hide>
web: 添加nat loop back（向杰）  
web: 添加静态arp绑定（向杰） 
实现wps产生随机pin码（封远钊）  
web: 添加备份还原网页功能（向杰）  
添加ddns功能（封远钊）  
产测：产测工具支持测试外设: 灯, 按键, 天线（郑达）  
web: 修正apn用户名密码不能为空的bug（向杰）  
web: 限定dhcp地址池规则（向杰）  
web: wifi 设置 wifi disable 时，隐藏wifi开关以下的内容（向杰）  
web: 设置dmz, 远程ping时重启防火墙（向杰）  
web: 增加０格信号图标（向杰）  
web:5g设置 wifi disable 时，隐藏wifi开关以下的内容（向杰）  
解决设置静态路由表时的掩码错误（封远钊）  
web:防火墙中端口映射启用规则会退出登录bug（向杰）  
web: 解决4g注册状态不对的bug（封远钊）  
wps按键：对该按键的时长进行重新定义（封远钊）  
wps灯: 根据不同状态显示不同的闪亮情况（封远钊）  
tr069: 支持https（江义波）  
修正限速不准的bug（封远钊）  
解决主apn配置修改不生效bug（封远钊）  
修改配置不能开关dhcp server的bug（封远钊）  
配置：支持timezone设置（封远钊）  
web: 网口显示wan口改为Lan4/Wan（向杰）  
web: 2.4g wifi右侧帮助信息描述不正确的bug（向杰）  
在未登录界面，将固件版本换成软件版本（向杰）  
web: dhcp设置页面，vice dns设置，应该允许为空（向杰）  
web: 解决wifi information页面右边注释名不正确bug（向杰）  
web: 对一些描述不正确的注释信息进行修改（向杰）  
web: 解决wifi 信道不能设置为auto的bug（封远钊）  
web: apn IP --> IPV4（封远钊）  
web: 解决防火墙清空按钮会清空所有防火墙规则的bug（封远钊）  
web: 防火墙设置中，去掉ipv4/6的列（封远钊）  
web: 修改默认防火墙设置页面（封远钊）  
web: 解决wan信息为空时显示为空的bug（封远钊）  
web: 版权日期2018改成2019（向杰）  
web: 解决部分网页在默认英文环境下仍然显示中文（向杰）  
web: 快速设置中密码添加规则以及优化点击保存时每次保证只能点击一次（向杰）  
web: 防火墙清空所有规则时，重启防火墙（向杰）  
web: 在本地物理小区中，给频点和物理小区ID取值范围给客户。供客户填写（向杰）  
防火墙：ip过滤增加ip范围功能（封远钊）  
web: 网页优先显示客户指定软件版本号（封远钊）  
多apn支持设置mtu（封远钊）  
tr069: 解决bug（江义波）  
配置：解决配置名称不正确bug（封远钊）  
系统: 计算用户密码时使用wifi mac来计算.（郑达）  
</hide>
#### 2019.05.17
**何旭晨**  s12+这个板子接收灵敏度是正常的，如果这个是好的，那么s21就按照这个再发一板。
#### 2019.05.16
**陆洪丹** 明天要带2台样机走。需求是今天下午5点客户才提的。  
**郑达** 有些定制内容无法使用配置进行，必然sn，以后会加上。  
**李柱栋**  宽翼的usbnet驱动是标准的。去掉一些延时之类的东西，对速度看起来没有影响。  
所有的处理都在一个cpu上，即使使用不用的程序，也没有分散到不同的核上。  
**郑达**  修改tcp窗口等参数，对速度也没有影响。
#### 2019.05.13
**郑达** 提醒江义波更换使用4g后，设备tr069可以正常连接https。
#### 2019.05.12
**郑达**  发出bug整理表。
#### 2019.05.12
**郑达** 在北京，小基站设置b40设置2载波，设备一直注册不上。  
**邹春来** 我们明天上班第一时间分析处理  
#### 2019.05.11
**郑达**  拿到调好的fdd板子了，现在要去坐高铁去北京看看能否提高小基站的速度。  
**李柱栋** 考虑主频从880MHz提高到1080MHz，看看数据包处理有没有改善  
**何旭晨** 现在散热片不热，可以升频  
#### 2019.05.10
**郑达**  使用修改驱动内部宏的方式，对速度似乎没有影响。给mtk支持发出了邮件，询问usb能力问题。准备明天乱改试试。再去北京看看小基站能调到什么样的速度。另外带2个band3的去测试。upnp在余辉的电脑上使用也不行。
**何旭晨**  USB2.0的眼图很好，所以USB走线是没有问题的。3.0没有办法测试
#### 2019.05.09
**郑达**  何旭晨 band 40 udp打流可以到234M，和插在电脑上相同。tcp能到200-210.  band 3 也差不多。  
测试的几个结论：  
S21板子处理UDP报文的能力同笔记本相同，但S21处理TCP报文的能力要比电脑差；  
WIFI的打开和关闭对CAT6测试速率无影响；  
S21的USB为USB3.0和USB2.0，对CAT6测试速率无影响；  
更换速率更高的FDD模块和频段，CAT6的处理TCP报文的速度也上不去；  
之前他们测试我们的板子，说速率只能达到180Mbps,是因为他们用FTP下载的方式。今天用Iperf的方式，TCP速率可以达到200-210Mbp  
<font color=red>软件有办法看usb收发问题吗</font>  
**蒋世富**  5G的TX1调试rx还是有问题 还要看。  
**喻潇**  发出测试bug表，主要集中在网页显示部分。
#### 2019.05.08
**何旭晨** 5.8G在30米处测试速度还是会到0应该和的灵敏度是一个问题。  
**郑达**  小基站给的配置无法注册。和何工今天一起去西安验证速度。
#### 2019.05.06
**何旭晨**  5.8G的灵敏度还不行，在30米处测试速度还是会到0。主要是电路修改太大。和软件貌似没有关系。第一版的问题是5.8G天线不行。  
**郑达**  昨天的工作基本完成，upnp没有起作用。余辉试过关闭防火墙就可以了。要追测试的开始大量测试。  小基站测速下午开始搞。发布版本1.03  <hide>
实现多nat，并提供设置接口（封远钊）  
实现nat lookback功能，并提供接口设置（封远钊）  
实现arp绑定功能，并提供接口设置（封远钊）  
tr069: 实现apn设置（江义波）  
防火墙：解决某些接口读取ip地址不正确的bug（封远钊）  
web: 实现2.4g 5.8g wifi的快速设置页面（向杰）  
web: apn添加nat功能（向杰）<hide>
#### 2019.05.05
<font color=red>需要按照 zs321的样子之类写一个规格书。</font>
mtk提供的openwrt bb的代码在git@192.168.1.249:mtk7621_sdk中。看看李柱栋能否在其中找到pcm的相关代码。必须使用smb://192.168.1.93/mysite/dl.rar 中的dl文件才能编译，就不管了。它的版本较di  
**郑达**  今天和封远钊，江义波，向杰开了晨会，讨论今天的任务 <font color=red>当前模块和wifi不支持单天线的信号检测</font> 发出版本1.02， <hide>web: 修改主页，拆分为主页,wan状态信息,lan状态信息,4g信息,wifi状态信息（封远钊）  
默认关闭telnet功能，配置可开启（郑达）  
web: 解决网页多apn设置不正确问题（封远钊）  
实现多dns功能（郑达）  
web: 导航栏隔10s刷新一次（向杰）  
web: 解决时间读取问题（向杰）  
web: 优化apn设置（向杰）  
添加读两个4g天线的内外置状态接口（郑达）  
web: 静态路由接口名称改成指定接口（向杰）  
web: WAN information中信息展示进行修改（向杰）  
web: 将路由设置添加到主菜单栏（向杰）  
web: 将tr069添加到主菜单（向杰）  
web: DHCP中添加Main DNS 和 Vice DNS（向杰）  
修改wifi wps的接口（封远钊）  
解决防火墙端口转发问题（封远钊）  
web: 增加dmz功能（向杰）  
解决dmz设置问题（封远钊）  
产测: 完成写imei, mac功能（郑达）  
新增tftp alg功能（郑达）  
修改lanrecord历史记录问题（封远钊）  
新增miniupnpd（郑达）  
tr069: 增加历史上报节点, 和多ssid apn的节点（江义波）  
重启设备时，在uboot去复位modem.（封远钊）  </hide>
#### 2019.4.29
<font color=red>wifi测试的时候要测一下实网  
是否可能从软件上设置usb3.0降为2.0  
    宽翼的小转接板是否有外接电源  
    板子要做emc  
    cpu是否存在降频的可能，导致速度不足？  
    cpu是否双核都在工作，还是只有单核在工作？  
    以太网udp只有200M，和变形金刚比较一下。取到nat比较一下  
    需要验证igmp v3是否支持
    </font>

上午开会讨论cat6测速问题：  
usb3.0其实对2.4g, 5.8g有干扰，可能wifi不能用的。 何旭晨：测试的时候有卡，应该还是可用。  
宽翼认为在pcie下方需要加泡棉，散热。  
宽翼认为手压住模块能明显提高速度，可能是接地和散热的问题。只有某个人按才有效果。  
去掉屏蔽罩，效果有改变  
在我们的板子上，比模块直接连接到pc要慢  
陶嵩 我们租的机器没有打流的license  
使用usb是因为简单，如果用pcie，很多模块都没有驱动。  
#### 2019.04.28
**郑达** udp问题确实解决了，iperf3可以打流到80多M，但是wget变得非常不稳定，使用多个wget，速度反而下降了。最高能到30MB。  
**向杰**5.1前可能没有空。人事招人那里没有动静。问tftp alg是啥东西。  usb 2.0 理论速度可以到450M，貌似没有必要使用3.0的样子。  
使用以太网卡lan wan打流，tcp两个方向可以到600-700M，udp两个方向都只能打到200M的样子，在udp的模式下，softirq的占用率会非常高。  
开始测试upnp。上次余辉测试的情况是只有汪光华那台电脑能出现额外的端口转发指令，自己的和测试的电脑都不能。
**江义波** 上周来了3天，调了2天的p59。
**何旭晨**：2.4g 指标已经调好了，5.8g pa厂家还要调。距离还没有测试。第一版测试的情况在110m左右2.4g能用1MB的样子。
#### 2019.04.27
宽翼乔总发了新的驱动，解决iperf3 打流问题，之前没有考虑到一个报文中有多个skb子报文的情况。
#### 2019.04.26
硬件部分，wifi部分改动较大，今天设备来了，开始调整。主要是高信道接收灵敏度不行，距离也不行。提到修改软件参数的问题，以前郑达已经对照变形金刚版修改过一次了。  
**向杰** 需要增加wps 2.4G 5.8G, home空白界面填充， 增加sn等  
**封远钊** 解bug, 增加arp绑定，upnp， 防ddos，快速设置等  
**江义波** tr069 升级事件上报，对数据，还有https支持验证，需要连到罗厅的平台。原来国外的某个平台的https已经访问不了了。  
模块打流挂掉的情况，宽翼那里没有仪器了。节后乔总过来深圳调。  
开关机测试已经超过1000多次，如果直接ping 互联网ip可以在60秒内完成。如果ping域名会有失败的情况。  
**多apn和多ssid已经完成，需要斯里兰卡验证一下。**  
开机的时候硬件并没有去reset模块，所以重启的时候模块并没有重启，可以考虑在uboot中完成重启模块的操作。  
厂测工具正在做，需要完成imei， mac， 升级，4g信号等。  
这10多天碰到一次模块重启的现象，出现usb disconnect。  
**李柱栋** slic部分操作看起来正常，现在需要at打电话的指令，看看音质如何。pcm部分需要加上alsa支持，需要至少3周的时间。  
**王伍** **要测试一下纯路由情况下的以太网的打流情况。**
#### 2019.04.22
**罗厅** 江哥明天w20那边有点事情要弄，周三过来
#### 2019.04.11
**何旭晨** 网上买华为的cat6都没有增值税发票，今天下了一个900多的。
#### 2019.04.09
**郑达**  cat6当前主要问题是模块不稳定，现场测试会从cat6脱离。
#### 2019.03.13
李柱栋：mtk没有对pcm的支持，估计做voip的时间就很难估计了。
#### 2019.03.12
郑达去了西安。准备了在宽翼需要完成的任务
李柱栋：看起来宽翼模块的时钟出来了。
#### 2019.03.11
郑达：联系了宽翼，还是明天飞到西安去一起调试模块。和封远钊一起去，把余辉的电脑带走。他开始想重新用一个sshkey。忘记了com邮箱的密码，重置它刘汉琴说要找彭丽玲。
#### 2019.03.09
何旭晨：宽翼没有回复模块的交期。6号已经投板，大约在18日可以回到研发部。
郑达：喻潇这段时间一直在做v10方面的事情，还没有时间进行cat6的测试。李柱栋推的那个内核代码是为了自己调试方便的，否则每次clean太慢了。说搬近了.
#### 2019.03.06
郑达：2.4g的wifi性能应该改了参数就有效果了。修改的是apcwimin, apcwmax, aptxop这几个参数，这几个参数在atheros中的配置是在WMM Parameter Definitions中。王伍让他再去招一个做web的人。
#### 2019.03.05
李柱栋的spi切换的还在看dts这个东西。
#### 2019.03.04
李柱栋对spi的复用还有疑惑。
#### 2019.01.09
**郑达**  [MTK多SSID配置说明](http://192.168.1.93:8000/s21_cat6/MTK%20%E5%A4%9ASSID%E9%85%8D%E7%BD%AE.docx)

