

我的iphone mac fc:e9:98:14:58:1f
待解决问题：
ap-cp:
保存无线参数后断网, 看起来只有重启.
加上nob选项
继续减少wifi的选项.

11.14
minicom最近的一次更新在今年, 增加的是一个漏洞的修补, 而上一次的更新在2013年.

minicom可以自动换行的:
在minicom中自动换行：Ctrl+A Z W
组合键的用法是：先按Ctrl+A组合键，然后松开这两个键，再按Z键。另外还有一些常用的组合键。
S键：发送文件到目标系统中；
W键：自动卷屏。当显示的内容超过一行之后，自动将后面的内容换行。这个功能在查看内核的启动信息时很有用；
C键：清除屏幕的显示内容；
B键：浏览Minicom的历史显示；
X键：退出Minicom，会提示确认退出。
http://blog.sina.com.cn/s/blog_6d2a0a1a0100vyoz.html

如何在win7上安装rndis:
http://developer.toradex.com/knowledge-base/how-to-install-microsoft-rndis-driver-for-windows-7
可以在win7的机器上看rtspd的流媒体图像了.

使用自己编译的busybox, 出错了
/squashfs_init: line 24: echo: not found
/squashfs_init: line 25: mdev: not found
/squashfs_init: line 26: ln: not found
/squashfs_init: line 27: /bin/linuxrc: not found
/squashfs_init: line 28: can't open /dev/console: no such file
增加一些busybox的选项, 这些错误消失了, 但是继续错误:
Kernel panic - not syncing: [ISP] failed to open cfg file: /mnt/mtd/isp328.cfg

p59又重启了, 忘记开重启记录了.

这样来设置p59的上网吧:
ifconfig br0:2 192.168.19.41 
route add default gw 192.168.19.1
echo nameserver 192.168.1.2 >> /etc/resolv.conf


11.13
cenos 下要安装yum install gettext-devel, 否则会出现
error: possibly undefined macro: AC_LIB_PREFIX这样的错误.

centos中居然没有ccache?
sudo yum install epel-release
sudo yum -y install yum-utils
这样之后, 就有ccache 了.


gitk中在右边选择了某个文件, 右键, highligth this too, 那么, 所有这个文件的修改的commit都会加粗, 看起来非常实用的功能.

下午又看到nautilus这个进程狂占cpu, 这个居然是Browse the file system with the file manager, 有一个窗口开着, 里面在浏览wget下载的无数个文件, 这些文件又已经被删除了...

使用iftop可以看到从哪个ip有比较大的流量, 
Display paused       191Mb      381Mb                      572Mb    763Mb                 954Mb
└─────────────────────┴──────────┴──────────────────────────┴────────┴──────────────────────────
jian-OptiPlex-9020               => 151.101.64.194                       30.7kb  30.7kb  30.7kb
                                 <=                                      1.13Mb  1.13Mb  1.13Mb
再使用这样的指令
sudo netstat -tpn | grep 151.101.64.194
tcp        0      0 192.168.19.199:58996    151.101.64.194:80       ESTABLISHED 2258/wget
就找到是哪个程序在使用网络了.

这样就可以实现不输入密码登录了:
alias s='sshpass -p sztz369147258 ssh root@192.168.0.1 -p 8357'

11.10
这样连接我的机器:
mount -t nfs 192.168.19.199:/opt/work/ /mnt/nfs --nolock

p59上网:
ifconfig br0:1 192.168.19.198
route add default gw 192.168.19.1
echo nameserer 192.168.1.2 > /etc/resolv.conf

154这台机器居然又不能发邮件了, 远程桌面不能连接, 连接显示器有图, 但移动鼠标, 敲击键盘无响应, 直接关机吧.

桌面这台p59居然在5个小时之前重启了, 什么原因呢? 

现在报错:
ierror while loading shared libraries: libz.so.1: cannot open shared object file: No 
这样试试, 可以开始编译了.
sudo apt-get install lib32z1

11.9
这样就可以运行32位的程序了:
sudo apt install libc6:i386

下载整个网站
wget -r -p -np -k http://xxx.com/xxx

吴曦:
当前p25情况, 陈良去菲律宾场测, 上次是在信号差的情况不能用, 现在改了天线, 在信号差的情况可以用了. 对比以前的硬件有改进.
尼加拉瓜的p27在招标测试. 尼加拉瓜在南美.
斯里兰卡的p27也在测试.
p25的生产并不多, 有了3-4次, 最多的一次只有500台. 第一次试产并没有出现烧掉模块的事情, 虽然硬件的保护电路都是去掉的.
m60的验证软件赵金还在做, 看能否复现复制了文件, 又消失的情况.

还有一种特别的情况, 两台pc连上p25, 一台有线, 一台无线, 两台机器不能ping通, iperf可以使用. 把p25换成其他设备, 就可以ping通了.同样, 如果把无线连接的pc换为一个手机, 又可以ping通.


使用这个指令可以看到和目摄像头的数据流:
./tcpdump -i br0 host 192.168.19.21

当前使用
192.168.19.21.52992 > 120.27.152.80.50920
会不会断线后变掉呢? 先关掉2.4g看看.
断线后变成了:
12:23:20.909491 192.168.19.21.41469 > 114.55.236.207.50920
连服务器都变了啊.
这样可以简单的只查看ip和端口信息:
./tcpdump  -i br0 src 192.168.19.21 -nqt -c 1 2>/dev/null 
IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 186
那么用这个脚本来记录吧:
# cat 1
while [ true ] ; 
do
  ./tcpdump  -i br0 src 192.168.19.21 -nq -c 1 2>/dev/null 
  sleep 60
done
现在非常不稳定呢:
13:56:15.975468 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 1041
13:57:16.009342 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 1448
13:58:16.050067 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 1448
13:59:16.103563 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 389
14:00:16.135934 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 1448
14:01:20.048735 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 186
14:02:24.041165 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 1448
14:03:27.959077 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 1448
14:04:31.095798 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 39
14:05:31.137033 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 389
14:06:31.180022 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 1448
14:07:31.811782 IP 192.168.19.21.41469 > 114.55.236.207.50920: tcp 186
14:08:38.820705 IP 192.168.19.21.41470 > 114.55.236.207.50920: tcp 31
14:09:38.918665 IP 192.168.19.21.41471 > 114.55.236.207.50920: tcp 1309
14:10:40.075863 IP 192.168.19.21.41471 > 114.55.236.207.50920: tcp 1448
14:11:43.760023 IP 192.168.19.21.41473 > 114.55.236.207.50920: tcp 0
14:12:45.912293 IP 192.168.19.21.41474 > 114.55.236.207.50920: tcp 1448
14:13:52.801992 IP 192.168.19.21.41475 > 114.55.236.207.50920: tcp 1448
14:14:53.214129 IP 192.168.19.21.41476 > 114.55.236.207.50920: tcp 1448
14:16:00.865656 IP 192.168.19.21.41477 > 114.55.236.207.50920: tcp 1448
14:17:03.922944 IP 192.168.19.21.41478 > 114.55.236.207.50920: tcp 1448
14:18:14.428582 IP 192.168.19.21.41479 > 114.55.236.207.50920: tcp 0
难道tcpdump会有影响么? 应该也没有道理吧.
好像特别不稳定的样子.

要显示曾经修改过的文件, 包括删除的, 可以使用git whatchanged 列出来.
其他的:
git log --name-status 每次修改的文件列表, 显示状态
git log --name-only 每次修改的文件列表
git log --stat 每次修改的文件列表, 及文件修改的统计
git whatchanged 每次修改的文件列表
git whatchanged --stat 每次修改的文件列表, 及文件修改的统计
git show 显示最后一次的文件改变的具体内容
http://rickie622.blog.163.com/blog/static/2123881120144305217106/

今天这个开发板的rtspd好像比较正常.
在firefox中增加markdown view可以直接查看markdown文件:
https://addons.mozilla.org/en-US/firefox/addon/markdown-viewer/

11.8
cp -n 就不覆盖文件了.

lede中的tcpdump有mini的选项, 但是好像不能编译啊.

在编译.o文件的时候也加上-g选项, 执行:
/usr/share/p11-gcc/staging_dir/usr/bin/mips-linux-gdb dialtool_new core.dialtool_new.6370
Program terminated with signal 11, Segmentation fault.
[New process 6370]
[New process 6357]
[New process 6368]
[New process 6369]
#0  0x77c533b4 in ?? ()

执行bt, 出现了代码: 有一个指针没有判null
#0  0x77b473b4 in ?? ()
#1  0x0040b400 in strip_head_tail_space (str=0x0) at common.c:18
#2  0x00406990 in bm806_report_handle (buffer=0xa57268 "\r\n+SIGNALIND:1,-105,255\r\n") at bm806.c:2861
#3  0x0040195c in thr_process (args=<value optimized out>) at main.c:619
#4  0x77bc83c8 in ?? ()
Backtrace stopped: previous frame inner to this frame (corrupt stack?)

162机器的对外映射端口由13306改为13300-13400。

建一个alias吧, 每次输入好像有点累.
alias s='ssh -p 8357 root@192.168.0.1'

sublime Ctrl+G：跳转到第几行

wget可以安装服务器上的目录进行下载, 然后砍掉目录, 就可以在docs中出现比较好的目录结构了.

在<H264_Rate_Control_User_Guide_V1.0>这个文档中
insmod favc_rc.ko后, 
可以看到
cat /proc/videograph/favce_rc/info
在开发板上:
H264 rate control(VG) version: 1.1.11, built @ Jan  9 2015 13:55:18
 chn   mode         fps          bitrate    max.br    init.q  min.q  max.q   qp   I.qp  ip.r
=====  ======  ===============  =========  =========  ======  =====  =====  ====  ====  ====
   0     CBR        30/1            256          0      25      20     51    29    28   25.5
   1     CBR        30/1           2048          0      25      20     51    22    21    8.4
   2     CBR        30/1           4096          0      25      20     51    31    31    9.0
在卡片机上:
H264 rate control(VG) version: 1.1.12, built @ Aug 26 2016 14:21:34
 chn   mode         fps          bitrate    max.br    init.q  min.q  max.q   qp   I.qp  ip.r
=====  ======  ===============  =========  =========  ======  =====  =====  ====  ====  ====
   0    EVBR        25/1              0        600      32      28     51    32    30   108.5
   1     VBR        25/1              0          0      32      28     51    32    30    0.0
两个看起来有比较大的区别, 一个30frame/sec, 一个25frame/sec. 


11.7
如何使用快捷键预览markdown文件：
https://www.bbsmax.com/A/MAzAWGqM59/


刘云: 
p53的bug修复速度太慢了. 

任银善:
使用苗立双的程序挂了2天, 并没有出现某个程序内存增长的情况.

郑达:
dialtool2, 某些情况下会增加cache内存. 还在看.

郑荣俊, 李柱栋:
菲律宾说的wifi参数问题, 应该是原来就没有测试过. 而且没有告诉节点信息, 很多东西要猜.

梁剑:
onenet的很多东西不完备.

颜斌 翟志华 李金龙:
车载路由器还要本地广告推送.

王伍:
问是否在局域网测试过.

11.6
早上的碰头会: 
吴曦还不知道如何进行iperf, 
徐刚雄: p59的wan似乎不太稳定. 新版带看门狗的p53下周5回来. 摄像头的路由器回来, 还要在摄像头板上增加驱动.

江健: 
海思方案的机器用户名密码: root klv123
rtsp://ip/11

向杰:
c语言指针比较难懂. 

11.5
可以做一个简单的ssh登录器.

11.3
关闭一部分特效, 貌似机器xorg的占有率降低了一点点.
参考这里:https://www.2cto.com/os/201301/181597.html

机器用着用着总觉得好慢, xorg占的cpu比较多, kill掉它, 机器就重新登录了.

atom的流畅度还是没有sublime好吧, 算了, 还是用sublime text吧. 

开机后mediascanner-se这个进程总是占用比较大的cpu, 还是把它关掉把:
sudo sh -c "echo manual >> /usr/share/upstart/sessions/mediascanner-2.0.conf"
stop mediascanner-2.0 
参考:https://binli.github.io/posts/upstart-skill.html

wget http://192.168.19.199/files/rtspd
chmod +x rtspd

金晶: 当前的漫游仍然会弹portal, 想要去掉, 使用探针的数据, 由于10s, 好像有些慢.

陶嵩: 其他公司的人做的多台同时校准工具, 无法做的自动下载校准程序.

在vlc软件中, 设置:rtsp-tcp之前, 要增加空格, 这样就变成tcp协议.

exceltk这个工具看起来还不错:
exceltk.exe -t md -xls example.xls
exceltk.exe -t md -xls example.xls -sheet sheetname
exceltk.exe -t md -xls example.xlsx
exceltk.exe -t md -xls example.xlsx -sheet sheetname

11.2
在开发板上运行
/mnt/flash/rtspd
会有输出:
/mnt/mtd # ./rtspd
  Usage:
  Multiple streams:
    #./rtspd
  Max single h264 stream:
    #./rtspd -s
  Max single mpeg4 stream:
    #./rtspd -m
  Max single mjpeg stream:
    #./rtspd -j
Error! Abnormal AP exit under chipid(0),cpuid(1),graph(1),query_id=0x10001

##### Apply #4 #####

##### Apply #5 #####
GM RTSP Library [build - Oct  2 2014 15:03:35]
Connect command:
    rtsp://192.168.19.55/live/ch00_0
    rtsp://192.168.19.55/live/ch00_1
    rtsp://192.168.19.55/live/ch00_2
Press 'q' to exit.
/live/ch00_0: cap0_0   320x240 H264  31.44fps 315kbps
/live/ch00_1: cap0_0   640x480 H264  31.24fps 2213kbps
/live/ch00_2: cap0_3 1920x1080 H264  31.24fps 5328kbps

然后在ubuntu video中open locatin:
rtsp://192.168.19.55/live/ch00_0
就可以看见视频了.

在windows上的vlc也可以.

在当前的板子里面有个rtspd20这个程序, 运行它,
rtsp://192.168.19.175/live/ch00_0
通过无线方式看, 还是存在丢帧的情况, 屏幕可能存在花屏的情况.应该是有中间帧丢掉了.

感觉ubuntu上的video这个程序, 会停止播放, 上次播放了3分钟. widnows下面的vlc播放器, 貌似可以坚持的比较久.那么在ubuntu下面vlc播放器看看吧. vlc播放器看起来好很多, 播放了1小时50分钟.

在使用录制的功能过程中, vlc居然挂掉了. 也太容易挂了吧.

为啥参考板上会不断报错? 算了先不管吧.

30帧确实会出现闪烁的确情况.

开发板上有跳针选择spi flash的3/4字节模式.

即使在alc中设置 rtsp-tcp方式, 从抓包来看, 还是udp的包. 是不是不支持?
rtsp 是控制协议

郑达: 有一块p53使用联通2g的情况下拨号就复位, 和板子相关, 换模块也一样. 其他两块板子正常.
刘永辉: 只有一块板, 使用开关电源, 使用2a的电源也是一样的. 使用开关电源看电流并没有发现电流变大的情况.

感觉这个atom编辑大文件的时候输入有些延时,那么还是把日志先分为月文件, 后面再合并吧.
atom的多光标还是有些麻烦, 要一个一个去点.
可以用shift+alt+up/down进行, 还不错, 就是好多地方没有对齐就不好用.
把一些文档整理成md表格其实也比较费时间.

0keeper这个ap在4:30到5点左右的时间里面断掉了20分钟左右. 然后自己恢复了. 为什么会这样?

吴曦:
m60仍然存在写文件会错误的情况. 还是要想办法通过实验的方式模拟出来.
p25会出一个大的版本来, 用户又希望这两天有个新版本.

11.1
atom在安装了.net 4.6上的机器上直接安装不了啊, 只有删除4.6, atom就开始安装4.0(4.5?)了.

p53:
libz.a /usr/include 可以删除.
libcrypto.so非常大, 2163668 而在openwrt_ath中, 1392196,
考虑去掉tzupdate
其他库也非常大:
          p53    openwrt_ath
liburl   359564   162668
libgmp   507448   432116
libssl   521364   316424

任银善：问为什么acl设置中使用input output规则无效，这个确实会让人迷惑。

郑达：在写udp网管的时候，建立了一个简单的取数据的机制，从什么文件中读取，上送的json字段名称， 读取方式， 读取内容。

梁剑：周四下午要早一点走。看onenet的视频上传， 准备先做视频文件的上传。

郑荣俊: 正在建立mtk的仓, 做自定义的升级网页. 抱怨点在出一个m60, p25, p21的程序就要测试一遍tr069.

江健: 想在服务端建立udp的语言缓存.




10.31
姚国梁: upnp开始连自己的计算机, 没有规则出现, 移到汪光华那里, 出现了, 回来自己的计算机, 也好了.

江健: 后面的工作还有双向语音, 奥远驱动, p2p代码.

gm8136存在pin指定从spi还是nand启动.

ubuntu下升级flash
选择tar方式,解压文件
sudo cp ~/111/libflashplayer.so ./usr/lib/flashplugin-installer/libflashplayer.so
sudo cp ~/111/usr/* /usr
还需要重新启动firefox, 这样就不会报flash过期了.

已经处理的地址:
211.143.218.108 - 126 已经处理, 118不存在.
211.143.218.35 211.143.218.54已经处理.
福建的登录信息:
远程桌面登陆地址:211.143.218.55,
账号:administrator
密码:Yrf2017!a
网管服务器登陆:211.143.218.55:8000
账号:admin
密码:ND_HSWXKD
ap-si的网页登录密码 NDHSWXKD


10.30
刘云 周湘理: ap客户端不用处理repeator的情况.

运行rtspd20 , 结果重启了.
Usage:
  Multiple H.264 streams (1080p + VGA):
    #./rtspd
  Single H.264 stream (max resolution):
    #./rtspd -s
Error! Abnormal AP exit under graphid=0x1
Error! Abnormal AP exit under graphid=0x2
Error! Abnormal AP exit under graphid=0x3
Poll timeout!!Poll timeout!!GM RTSP Library [build - Oct  2 2014 15:03:35]
Connect command:
    rtsp://104.191.138.126/live/ch00_0
    rtsp://0.0.0.0/live/ch00_1
Press 'q' to exit.
Connection closed by foreign host.

向杰重新安装了机器,生成了新的key.
刘云: 还需要周湘理分析一些网页的问题.
姚国梁: 陶嵩问一拖多的时候如何下载校准文件, 想起来有些困难啊.

金晶: 一个阳光万峰的项目, 是连接若干个传感器, 不同车间显示本车间的传感器, 还有一个总的显示, 取代巡检的功能. 问陈良是否有空.

任银善: wpa2的补丁似乎还没有.
netcwmp软件已经移植, 但是感觉以前的软件做的有些乱, 好多东西揉在了一起. 本周预计完成可以进行portal的配置.
wifidog已经可以使用, 验证过的手机能上网, 没有验证的出现portal页面, 但是感觉有些奇怪的是, 删除了相应的iptables规则,验证的手机仍然可以上网. 重新启动wifidog后, 规则又加入了, 没有找到wifidog保存白名单的地方.
郑达开始做tr069.
赵钢因为在做watchdog, 还没有在做.
现在测试出来的问题主要集中在wifi做客户端的时候, 有时候不能保存, 有时候保存错误. 其他网络做wan的时候, p59的显示看起来是正常的,但p53可能错误.
性能方面, 李建华测试说在p59距离上比p21要差. 吞吐量ok, 另外做客户端的情况下, 不能增加nob这个选项, 否则很多ap都连不上.
华润方面, 在做一个简单的命令行接口. mpls, 移动的已经过了测试期, 不能测了. 电信的没有测试线路, 也没法测. snmp只提供了private等设置, 没有要求mib等.


10.27
当前我的串口线,白线是地线.
连接后uboot可以显示一点内容,然后就全部是乱码了.

10.23
17：11:43

10.20
rm ChinaMobile -rf
killall ChinaMobile
wget ftp://192.168.1.103/ChinaMobile
chmod +x ChinaMobile
date
./ChinaMobile


gpio是: 1 20-21

echo rm ChinaMobile -rf >> 1
echo killall ChinaMobile >> 1
echo wget ftp://192.168.99.100/ChinaMobile >> 1
echo chmod +x ChinaMobile >> 1
echo date >> 1
echo ./ChinaMobile >> 1
chmod +x 1

换宾馆
ID	客户端名	MAC地址	IP地址	有效时间
1	Mike-iPhone	64-B0-A6-CE-B1-EE	192.168.99.100	01:26:30
2	android-3738671a589436c	7C-70-BC-00-08-19	192.168.99.101	01:21:30
3	GJSROX0FSVCLWJ8	2C-6E-85-2D-18-74	192.168.99.102	01:22:12
4	Liangde-iPhone	FC-E9-98-14-58-1F	192.168.99.103	01:59:49
5	SmartHome-ZLT-CM11-001	EC-3D-FD-BD-90-61	192.168.99.104	01:41:19
6	MacBook-Pro	78-31-C1-C0-C5-8E	192.168.99.105	01:37:41
7	android-dc2d0b43308d7f5b	F4-E3-FB-BB-A9-1D	192.168.99.106	01:32:42
8	SmartHome-BRUBADSRTGG6ZZXU111A	00-6C-FD-82-22-0D	192.168.99.107	01:49:08
9	ubuntu	08-00-27-C2-BC-E1	192.168.99.108	01:44:1



权重	时间	问题描述	解决情况	负责人	补充
重	2017.10.17	不规律断开服务器连接，卡顿	Pending	简亮
重	2017.10.17	视频达到25帧	已解决	黎汝祥
重	2017.10.17	关闭移动侦测，关闭声音侦测依然有。	已解决	梁剑
重	2017.10.17	移动侦测区域布防设置无效	Pending	黎汝祥
较重	2017.10.17	自动获得MAC地址及手动写入IMEI号	已解决	梁剑
较重	2017.10.17	WifiTool连接无密码SSID无法完成	已解决	简亮
重	2017.10.17	声音有背景噪音	已解决	黎汝祥
轻	2017.10.17	仅第一次提示连接成功，其余断线不提示语音。	已解决 简亮
轻	2017.10.17	SD卡插入加载生效时间较长（约10秒）	Pending	黎汝祥
轻	2017.10.18	没有IMEI号直接启动提示（文件名修正：IEMI）	Pending
轻	2017.10.19	正在连接路由器语音报半截共两次	Pending
轻	2017.10.19	下发语音再次卡顿	已解决	简亮
轻	2017.10.19	增加恢复默认参数语音提醒	已解决	简亮
轻	2017.10.19	测试说明文件	已解决	江健
轻	2017.10.19	第一张抓图有绿色线，且尺寸很小	已解决	简亮
轻	2017.10.19	收到配置信息偶现程序不往下跑	Pending
以下为平台建议
轻	2017.10.19	了解断网续传时间条刷新机制	Pending
较重	2017.10.19	流量优化15分钟静态，5分钟动态。50M流量得8分	Pending	画质跟码率的折中点
轻	2017.10.19	核实下丢帧策略（P帧发送失败，则主动丢弃后面整个GOP）	Pending		个人理解：有利于缩减延时以及保持时间戳跟平台同步
轻	2017.10.19	音频帧检查是否发送了音频格式类型	Pending
较重	2017.10.19	检查缓存了多少帧，建议100帧为佳（也有50帧的）	Pending
轻	2017.10.19	缓存策略（队列后打包，目前是打包后队列）	Pending
较重	2017.10.19	保持长时间运行，需要保证RTP时间戳的增量和系统时间的增量是匹配的	Pending		这个怎么理解？
轻	2017.10.19	每次发送应该先发视频I桢再发音频	Pending
重	2017.10.19	麦克风静音时，发送声音进程不能停止，仅发送静音数据	Pending
重	2017.10.19	事件要通知到手机通知栏（同时通知OPENAPI）	Pending
较重	2017.10.19	切换视频流时，Rtp时间戳要重取，重新步增（平台分文件存储）	Pending
重	2017.10.19	全双工能力集可以打开，平台要求全双工	Pending
较重	2017.10.19	语音提示要严格按照平台要求做	Pending
较重	2017.10.19	指示灯指示和颜色要严格按照平台要求做	Pending
轻	2017.10.19	按键偶尔引起掉线	Pending
轻	2017.10.19	Wi-Fi模组性能是否可能影响了发送性能，造成断线	Pending
重	2017.10.19	客流统计算法（线性和非线性，平台采用的是矩形非线性）	Pending		矩形结合线性
轻	2017.10.19	音频下发，建议存文件后再播放	Pending
较重	2017.10.19	明早安排寄出双向语音版本机器	Pending
重	2017.10.20	机器断线后，机器缩略图不会自动刷新。	Pending
重	2017.10.20	打开关闭摄像头，实时视频未能恢复，未收到打开消息	Pending
较重	2017.10.20	更换6灯板参加测试，寄6灯灯板	Pending
重	2017.10.20	机器断线后，机器缩略图不会自动刷新。	Pending
轻	2017.10.20	恢复默认参数时间太短	Pending
重	2017.10.20	声音告警不起作用	Pending
轻	2017.10.20	图像瞬间加速	Pending
较重	2017.10.20	发送离线及断线日志	Pending




10.19
序号	中文	英文	文件名
1	正在连接无线路由器。	Y Fi Connecting.	NetInitting
2	无线网络断开。	Y Fi Disconnected.	Disconnected
3	连接无线网络失败。	Connecting Y Fi failed.	DontConnect
4	连接无线网络成功,信号很好。	Connecting Y Fi successfully, signal is excellent.	ConnectedOK_VeryGood
5	连接无线网络成功,信号好。	Connecting Y Fi successfully, signal is good.	ConnectedOK_Good
6	连接无线网络成功,信号一般。	Connecting Y Fi successfully, signal is normal.	Connected_Ordinary
7	连接无线网络成功,信号差。	Connecting Y Fi successfully, signal is poor.	Connected_Poor
8	连接无线网络成功,信号很差。	Connecting Y Fi successfully, signal is very poor.	Connected_VeryPoor
9	请用手机客户端连接设备。	Please use your mobile to connect the device.	ConnectAP
11	设备正在恢复默认参数，请等待。	Device resotring to factory default, please wait.	FactoryCfg
12	云设备升级中。	Device's upgrading, please keep the power on.	update
13	初始化无线AP模式。	Initializing Y Fi AP mode.	InitAPmode
16	无线网络设置失败，请重新设置。	Y Fi setting incorrect, please retry.	ConfigFault
17	无线网络设置成功 	Configure Y Fi successfully.	NetConfigOK
18	收到设置无线网络设置参数，正在连接无线路由器，请等待。		ObtainNetConfigParam




10.18
重庆宾馆：
git remote add tozed ssh://git@113.98.195.201:10003/gm8136s

echo rm ChinaMobile -rf >> 1
echo killall ChinaMobile >> 1
echo wget ftp://192.168.43.66/ChinaMobile >> 1
echo chmod +x ChinaMobile >> 1
echo date >> 1
echo ./ChinaMobile >> 1
chmod +x 1

ubuntu 192.168.43.155
smart-home 192.168.43.165
pc: 192.168.43.66

查看局域网内机器：nmap -sP 192.168.1.0/24

error while loading shared libraries: libmpfr.so.1: cannot open shared object
file: No such file or directory
解决方法：
$ sudo apt-get install libmpfr4:i386


10.15
这样可以做的tcpdump循环抓包.
/tmp/tcpdump -w /tmp/tcpdump_log.cap -i br0 -C 20M -Z root -W 1


FactoryDefault

tftp -g 192.168.19.199 -l iperf3
tftp -g 192.168.19.199 -l libiperf.so.0.0.0
chmod +x iperf3
ln -sf libiperf.so.0.0.0 libiperf.so.0.0
ln -sf libiperf.so.0.0.0 libiperf.so.0
export LD_LIBRARY_PATH=/root


net.core.wmem_max=12582912
net.core.rmem_max=12582912
net.ipv4.tcp_rmem= 10240 87380 12582912
net.ipv4.tcp_wmem= 10240 87380 12582912
net.ipv4.tcp_window_scaling = 1
net.ipv4.tcp_timestamps = 1
net.ipv4.tcp_sack = 1
net.ipv4.tcp_no_metrics_save = 1
net.core.netdev_max_backlog = 5000

10.13
各个仓编译错误：
sequans3220: 真悲催，编译失败！
lc1860: 修改了啥？出错了吧。
zte7520_ap: 不如意事常八九，可与语人无二三。
ath9.5: 路漫漫其修远兮....
gm8136s: 举杯邀明月, 对影成三人...

9.29

rm ChinaMobile -rf
killall ChinaMobile
wget http://192.168.19.199/ChinaMobile
chmod +x ChinaMobile
date
./ChinaMobile

cp ChinaMobile /usr/share/nginx/html

gm8136s 如果使用wget那么速度还是比较快的, 一般在2秒左右.
但昨天使用nfs好像还是慢得很.
使用tftp就要1分多钟的时间穿一个文件.
nginx的文件可以放在/usr/share/nginx/html目录中, 就可以使用wget进行下载了.

9.28
ATH_SUPPORT_TX99=1

9.23
看起来没有的wfi选项:
ATH_SUPPORT_ICM=1
IEEE80211_MCAST_ENHANCEMENT=1
ATH_TXQ_BH_LOCK=1

9.20
这个脚本分裂文本:
#!/bin/bash
arr=$(cat $1)
echo 111111111111111 > $2
for s in ${arr[@]}
do
    echo "$s" >> $2
done


9.18
编译3.18.23的内核居然要使用到bc这个计算器工具
http://blog.csdn.net/wulantian/article/details/11976511
这里有个使用指南:
http://www.cnblogs.com/lovevivi/p/4359296.html
好像好复杂的样子.

9.17
ATH_SUPPORT_DYNAMIC_VENDOR_IE
DBDC_REPEATER_SUPPORT UMAC_SUPPORT_TXDATAPATH_NODESTATS AH_PRIVATE_DIAG
QCA_OL_NAPI_SUPPORT
ATH_SSID_STEERING
ATH_SUPPORT_FIPS
PEER_FLOW_CONTROL
ATH_SUPPORT_GREEN_AP
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4548      2428  65% /

这个脚本可以删除scritps中的东西, 并且自动提交.
if [ "$1" == "" ] ; then
        echo what you want del?
        exit
fi
git rm scripts/$1 -r
git rm ../rootfs/$1 -r
git rm ../apps/busybox-1.01/defconfig-$1
git commit -m "byebye $1, whick want gcc-3.4.4"


9.16
为什么做了buidall.sh clean之后,  ap-cp的driver编译还是报错了, 看来这个脚本出现问题了?
感觉是换了版型后, 出现的问题. 应该是

9.15
ap-cp中继续砍砍砍:ATH_SUPPORT_11N_CHANWIDTH_SWITCH MESH_MODE_SUPPORT DBG_LVL_MAC_FILTERING UMAC_SUPPORT_VI_DBG QCA_OL_VLAN_WAR

ath9.5里面的scripts大部分是无法编译的, 先每天删除一个使用gcc-3.4.4的吧.
ap101-2.6.31              ok
ap101-small               make: *** [toolchain_build] Error 2
ap111-2.6.31              ok
ap111-2.6.31-clean        make: *** [art_mod] Error 127
ap113                     ok
ap120                     make: *** [uboot_mainline] Error 2
ap121-2.6.31              make: *** [sqlzma_build] Error 2
ap121-2.6.31-2MB          make: *** [sqlzma_build] Error 2
ap91-2MB                  make: *** [toolchain_build] Error 2
ap91-2x8                  make: *** [sqlzma_build] Error 2
ap91-small                make: *** [toolchain_build] Error 2
ap93-small                make: *** [toolchain_build] Error 2
ap96-small                make: *** [toolchain_build] Error 2
ap99-2.6.31               ok
ap99-small                make: *** [toolchain_build] Error 2
board953x                 make: *** [kernel_build] Error 2
board955x                 make: *** [kernel_build] Error 2
board955x-offload-host    make: *** [config_fix] Error 1
board955x-offload-target  make: *** [config_fix] Error 1
CaviumFus                 make: *** [wpa2] Error 2
db12x                     ok
db12x-aow                 make: *** [athr-wpa_supplicant] Error 1
db12x-carrier             ok
db12x-db12x-master        make: *** [athlogger_build] Error 2
db12x-enterprise          ok
db12x-extender            make: *** No rule to make target 'uboot_build', needed by 'common_mainline'.  Stop.
db12x-hybrid              Makefile:123: *** "Must specify TOOLCHAIN value".  Stop.
db12x-offload-gmac        make: *** [driver_build] Error 2
db12x-offload-gmac-flash  make: *** [driver_build] Error 2
db12x-offload-pcie-flash  make: *** [driver_build] Error 2
dhp1565                   cp: cannot stat '../rootfs/dhp1565/*': No such file or directory
ika-vox180                scripts/ika-vox180/config.ika-vox180:2: *** "You have to define BSP_VERSION to use this Makefile. 0:BSP 5.8 1:BSP 6.0 2:BSP 6.1 3:BSP 8.0 4:BSP 8.1&8.2&8.3" .  Stop.
pb44-carrier              make: *** [toolchain_build] Error 2
pb44-ce                   cd: can't cd to /home/jian/work/ath9.5/build/../linux/kernels/mips-linux-2.6.15/
pb44-clean                make: *** [toolchain_build] Error 2
pb44-p2p-small            make: *** [toolchain_build] Error 2
pb44-small                make: *** [toolchain_build] Error 2
pb44-usb-p2p-small        can't cd to /home/jian/work/ath9.5/build/../linux/kernels/mips-linux-2.6.15/
pb44-usb-small            make: *** [toolchain_build] Error 2
pb47-xmii                 make: *** [config_fix] Error 1
pb47-xmii-2.6.31          make: *** [kernel_build] Error 2
pb90                      make: *** [toolchain_build] Error 2
pb92                      make: *** No rule to make target 'uboot_build', needed by 'common_mainline'.
pb9x                      make: *** [toolchain_build] Error 2
pb9x-2.6.31               ok
pb9x-aow                  make: *** [toolchain_build] Error 2
pb9x-carrier              make: *** [driver_build] Error 2
pb9x-ce                   make: *** [toolchain_build] Error 2
pb9x-clean                make: *** [driver_build] Error 2
pb9x-offload-gmac-flash   make: *** [acfg_build] Error 2
pb9x-offload-pcie-flash   make: *** [acfg_build] Error 2
pb9x-offload-ub124        make: *** [wpa2] Error 2
pb9x-sta                  make: *** [athr-wpa_supplicant] Error 1
ub124-offload             make: *** [driver_build] Error 2
x86-usb                   make: *** [fusion_hal_build] Error 2

9.16
去掉AH_SUPPORT_WASP=1, 系统启动到这里停止了.
Created ath0 mode ap for 0keeper
wifi0     no wireless extensions.
lo        no wireless extensions.
br0       no wireless extensions.
eth0      no wireless extensions.

9.14
鼎桥工业路由器电话会议:
1 貌似没有通过网络抓log的模式. 需要做硬开关.
2 GE应该不是强制要求.

去掉ATH_SUPPORT_CAL_REUSE, 非常微弱的少了一点点.

占永平
只有p28某个版本后才存在url过滤后网页变慢的现象.

iperf如果采用udp方式, 如果没有加上-b参数指定带宽, 那么速度只有1Mb

9.13
摄像头那个编译器运行报错, 要安装这个:
sudo apt-get install libmpfr4:i386

好像已经很难把qca-wifi-10.4的option减少了, 都是一大堆的编译错误.

郑达
在内核中增加32m支持还非常复杂, 3.15以后的内核修改了mtd接口, 修改非常大. 而只有3.15后的内核才有人打增加nor flash到32m的补丁.

任银善
修改了cfg -e的问题, 但是ipsec放在启动脚本中, 也是不正常的.

9.12
江健
一些基本的摄像头概念:
mipi 这个是sense 和mpu的接口, 还有并行 parallel, sub-LVDS
WDR 宽动态范围.
FHD 全高清输出.
3D de-intenlace 隔行扫描
isp image signal processor.
video scalier 缩放

硬件上主要组成:
镜头: 指标有焦距, 口径, 定焦变焦
传感器 sense,
光敏 感应环境亮度, 可读, 是个adc
红外led灯 6-10m 图像改变为黑白.
白光灯 补光

存储:
tf卡
nvr: 网络存储 rtsp 国际标准
     onvif
云存储: hls 苹果的标准
       rtmp adobe的标准

音频 speaker+mic
双向语音: 半双工, 全双工. 回声消除, 背景噪音, 电路声.

梁剑
使用pppoe的情况下, echo c > ... 发起l2tp连接后, 需要1分钟后才能连接, 而使用4g的情况就很快就回了.
如果是4g切换到pppoe的情况, 那么要到6-7分钟后才正常. 直接使用pppoe, 要2-3分钟才能使用.
检查默认路由的方式应该改为链路检查的方式.
使用一段时间后拔掉网线, 4g不能得到ip, 4-5分钟才能恢复(一次).
当使用了一段时间工业路由器后, 把网线拔到原来用的tplink上后, tplink无法拨上pppoe, 重启后可以拨上了.

摄像头:
长按5秒恢复出厂的状态. ssid以smart开头, 密码是6个9.

刘汉琴
赵金加班在玩魔方.问上报是否有效的. 李总让她了解企业亏损是否对情绪有影响.

李柱栋
fon那里主要是两个问题, 一个是热点, 一个是控制. 控制使用的tr069, 但fon还没有服务器进行测试. 热点方面还有

苗立双将开始联芯提供一个8905的cpe, 但还没有多少资料.

9.11
AH_SUPPORT_AR5416
ATH_SUPPORT_WIFIPOS
UMAC_SUPPORT_WIFIPOS_LEANCC
ATH_SUPPORT_HYFI_ENHANCEMENTS
ATH_SUPPORT_DSCP_OVERRIDE
UNIFIED_SMARTANTENNA
ATH_BAND_STEERING
ATH_TX_OVERFLOW_IND
ATH_SUPPORT_WIFIPOS_ONE_VAP
WMI_RECORDING
ATH_SUPPORT_LOWI

洛晓峰
有个客户只要工业路由器的pppoe功能.

江健:
卡片机和摇头机主要给海外, 需要对视频数据进行加密.

叶京平
欧洲那个车载的对方已经找了一个有现成软件的, 还有欧洲认证的广州公司. 报价也低很多, 只报了100多美金, 我们报了300多.

赵金
没有明白怎么样一个pc访问多个m60.

摄像头监听了这些端口:
Discovered open port 80/tcp on 192.168.19.175
Discovered open port 7001/tcp on 192.168.19.175
Discovered open port 7070/tcp on 192.168.19.175
Discovered open port 8011/tcp on 192.168.19.175

AH_SUPPORT_KITE_x 这几个参数看起来也是在5416内部, 或者是2133内部. 从makefile.inc的结构来看, 必须有AH_SUPPORT_KITE_10或者AH_SUPPORT_KITE_12为1才会把这个any设置, 所以那个any是没有意义的.
AH_SUPPORT_EEPROM_AR9287这个参数貌似在5416内部, 既然去掉AH_SUPPORT_AR5416支持, 那么大小应该不会改变吧. 确实是这样的.

去掉ATH_SUPPORT_WRAP, 有很多的错误啊.

ATH_TX_OVERFLOW_IND=0 没有什么变化:
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4704      2272  67% /

ATH_BAND_STEERING=0
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4704      2272  67% /

WMI_INTERFACE_EVENT_LOGGING这个东西在qca-wifi-10.4目录中找不到.

WMI_RECORDING=0
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4724      2252  68% /
感觉没有变化

ap-cp中设置ATH_SUPPORT_LOWI=0, 再次减少一点点: 没有减少之前是4732
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4724      2252  68% /
默认情况REMOVE_INIT_DEBUG_CODE这个值看起来就是1, 可以不用管它. 按照文档中, 可以忽略这些功能, 现在, UMAC_SUPPORT_ACFG, AH_SUPPORT_AR5416 ATH_SUPPORT_WIFIPOS  ATH_SUPPORT_LOWI ATH_SUPPORT_DSCP_OVERRIDE已经去掉了,剩下的放在文档最前面吧. REMOVE_INIT_DEBUG_CODE默认就是1.
      the following features not only increase the Host Driver package size, but also need user space utility to provide the
      support.
      AH_SUPPORT_AR5416=0
      ATH_SUPPORT_SPECTRAL=0
      ATH_SUPPORT_WIFIPOS=0
      UMAC_SUPPORT_WIFIPOS_LEANCC=0
      ATH_SUPPORT_HYFI_ENHANCEMENTS=0
      ATH_SUPPORT_WRAP=0
      UNIFIED_SMARTANTENNA=0
      UMAC_SUPPORT_ACFG=0
      QCA_AIRTIME_FAIRNESS=0
      ATH_BAND_STEERING=0
      ATH_TX_OVERFLOW_IND=0
      ACFG_NETLINK_TX=0
      ACFG_MON_FILTER=0
      WMI_RECORDING=0
      REMOVE_INIT_DEBUG_CODE=1
      ATH_RXBUF=256
      ATH_SUPPORT_LOWI=0
      WMI_INTERFACE_EVENT_LOGGING=0


复制黎汝祥的虚拟机, 会出现这样的提示:
This virtual machine's snapshot is expecting graphics features that VMware is unable to provide on this host. Restoring the VM might be possible, but could cause serious problems if the guest OS is relying on any of the missing features.
先continue吧. 还有告警:
VMware Player is unable to provide all of the graphics features expected by this VM. The graphics hardware, graphics drivers, or version of VMware software might have changed since this VM was booted. The VM will continue running but some graphics operations might behave unpredictably until the VM is shut down.
然后是黑屏.重启看看吧.
总是提示要安装什么vmware tools for linux version 10.1.6, 那么先安装一个吧.
进去了, 进去了.

这个是黎汝祥写的readme, 貌似太简单了一点:
    1：ubuntu:
      user:root
      password:1234

    2：和目云与onenet平台应用：ChinaMobile
    /usr/src/lrxPrj/APP-ChinaMobile/OpenAPUPD-rtmp
     make 得到ChinaMobile
      其中:1)onnet代码目录:rtmppp
          ont_mqtt_sample_main.c
          rtspmain()
           2)和目代码目录:soure
          main.cpp
    3:卡片机固件打包:
     /root/share/image/target/SmartBell/TZK61-ChinaMobile
      运行：SmartHome136.sh 得到固件Smarttzk61.bin

    4:设备系统命令升级: sysupdate -d -f Smarttzk61.bin


王伍:
赵金正在做m60一拖n的生产工具,这个是袁阳提出的需要, 需要有个计划, 不能做得没有边.
想着用anychat来完成摄像头部分的视频通话工作. 江键的邮件回复:看了下，LINUX平台没有ARM的SDK，在摄像机端无法使用。价格授权好黑。一台服务器下来60几万。

陈玉告诉王伍: dialog的m60天线反馈不好, 在没有信号的地方, 换用华为的cpe, 就能用. 影响了销量. 下一批货推迟一个月.

今天的tftp又不能用了,为什么有时候可以,有时候不可以?
sudo service tftpd-hpa restart


9.3
onenet密码: keeper90

郑达
p53重启测试: 3台测试了 2-3天. 1台测试了6-7天. 无异常.
升级: 1台机器40多小时, 上报就升级, 无异常.

libnetlink.h No such file or directory这个是怎么解的?忘记了.
冲掉
mkfs.jffs2没有增加lzma之前
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 6.8M      5.6M      1.3M  82% /
增加之后
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 6.8M      4.8M      2.0M  70% /


9.1
#!/bin/bash
a="one,two,three,four"
#要将$a分割开，可以这样：
OLD_IFS="$IFS"
IFS=","
arr=($a)
IFS="$OLD_IFS"
for s in ${arr[@]}
do
    echo "$s"
done

8.31
set ipaddr 10.8.0.33 && set serverip 10.8.0.100
set bootargs "console=ttyS0,115200 root=31:01 rootfstype=jffs2 rw init=/sbin/init mtdparts=spi0.0:64k(u-boot),6720k(rootfs),1280k(uImage),64k(mib0),64k(ART) machtype=DB120"

set ipaddr 10.8.0.33 && set serverip 10.8.0.100
tftp 0x80060000 vmlinux_ap123.lzma.uImage&&erase 0x9f6a0000 +$filesize&&cp.b $fileaddr 0x9f6a0000 $filesize
tftp 0x80060000 tozedap-cp_ap123-jffs2 && erase 0x9f010000 +0x690000&&cp.b $fileaddr 0x9f010000 $filesize
bootm 0x9f6a0000


   insmod $MODULE_PATH/adf.ko
    insmod $MODULE_PATH/asf.ko
    insmod $MODULE_PATH/ath_hal.ko
    insmod $MODULE_PATH/ath_spectral.ko $SPECTRAL_ARGS
    if [ "${AP_NO_A_BAND}" != "1" ]; then
        echo AP_NO_A_BAND=${AP_NO_A_BAND}
        #load DFS if A band is supported,default is supported and set AP_NO_A_BAND=1 if not supported
        insmod $MODULE_PATH/ath_dfs.ko $DFS_ARGS
    fi
    insmod $MODULE_PATH/hst_tx99.ko
    insmod $MODULE_PATH/mem_manager.ko
    insmod $MODULE_PATH/umac.ko
    insmod $MODULE_PATH/ath_rate_atheros.ko
    insmod $MODULE_PATH/ath_dev.ko
    insmod $MODULE_PATH/ath_pktlog.ko
    insmod $MODULE_PATH/qca_da.ko
    insmod  $MODULE_PATH/tm.ko


/lib/modules/3.18.23/net # /tmp/busybox depmod -n
net/ath_rate_atheros.ko: net/ath_hal.ko net/umac.ko net/adf.ko net/ath_dfs.ko net/ath_spectral.ko net/asf.ko net/mem_manager.ko
net/ag71xx.ko:
net/ath_dev.ko: net/hst_tx99.ko net/ath_rate_atheros.ko net/ath_hal.ko net/umac.ko net/adf.ko net/ath_dfs.ko net/mem_manager.ko net/ath_spectral.ko net/asf.ko
net/tm.ko: net/umac.ko net/adf.ko net/ath_dfs.ko net/ath_spectral.ko net/asf.ko net/mem_manager.ko
net/ath_pktlog.ko: net/umac.ko net/adf.ko net/ath_dfs.ko net/ath_spectral.ko net/mem_manager.ko net/asf.ko
net/ath_dfs.ko: net/asf.ko
net/mem_manager.ko:
net/ath_spectral.ko: net/asf.ko
net/ath_hal.ko:
net/asf.ko:
net/umac.ko: net/adf.ko net/ath_dfs.ko net/ath_spectral.ko net/asf.ko net/mem_manager.ko
net/adf.ko:
net/hst_tx99.ko: net/adf.ko net/ath_hal.ko


8.30
看看这个文件吧:
jian@jian-OptiPlex-9020:~/work/ath9.5/build$ cat ../drivers/qca-wifi-10.4/lmac/tx99/.ath_tx99.o.cmd
这个区别巨大.

比较offload/htt/.htt_h2t.o.cmd文件看起来没有太多的不同,只有两个.
@@ -256,7 +256,7 @@ export AR5416_INT_MITIGATION=1
 export ATH_SUPPORT_GREEN_AP=1
 export ATH_SUPPORT_DYN_TX_CHAINMASK=1
 export AH_DESC_NOPACK=1
-export UMAC_SUPPORT_OPMODE_APONLY=1
+export UMAC_SUPPORT_OPMODE_APONLY=0
 export UMAC_SUPPORT_STATS_APONLY=1
 export ATH_SUPPORT_STATS_APONLY=1

@@ -375,7 +375,7 @@ export ATH_TXBUF=540

 export KBUILD_MODPOST_WARN=y
 export JUMPSTART_GPIO=16
-export ATH_SUPPORT_TIDSTUCK_WAR=1
+export ATH_SUPPORT_TIDSTUCK_WAR=0
 export ATH_SUPPORT_KEYPLUMB_WAR=1


为什么现在出现的是这样的错误:/home/jian/work/ath9.5/build/../linux/kernels/linux-3.18.23/arch/mips/include/asm/war.h:12:17: fatal error: war.h: No such file or directory?
都是config里面东西搞的,非常非常多的选项.

:set nu可以在vi中显示行号.
http://blog.csdn.net/chuanj1985/article/details/6873830

:89,102s#insmod#modprobe#
在89到102行进行替换
https://segmentfault.com/q/1010000002552573/a-1020000002552589

梁剑
叶京平客户要求的到达公交站后自动连接到公交站的wifi的要求, 可以直接把覆盖的那个ap的改一下, 不变它,这样网页设置的参数改一下存储的参数, 改一下wifi启动脚本, switchwan不用修改.



8.29
任银善
问防火墙设置和操作.

刘云
p59貌似升级挂了. 原因是刘云的机器uboot没有升级.

梁剑
为什么5.8g的频道设置不了,要设置到5.2g去? 难道是国家代码的问题?

王伍
工业路由器:
6台坏机器的说明.
p53的测试表格.
p53的丝印要改.
-40度,要加加热芯片
天线要防雷
不知道的概念:冷压端正, igmp代理, 后路由.

李柱栋
可以在mini-snmp中增加设置操作了.
郑荣俊没有时间来改i2c的芯片了.

吴曦
信可认为找到了写mac等失败的原因, 写mac,imei等是cp侧处理的,而写usb网卡的mac是ap测处理, 写在同一个位置,这样如果同时写,就会出现一个冲突. 但晚上去掉,还有同样的问题.

8.28
C语言实现程序跳转到绝对地址0x100000处执行： ((void(*)(void))0x100000)();
http://blog.csdn.net/jipingyuan/article/details/39297409
跳转到0处，无论放在应用程序还是内核中，都是非法错。

梁剑
编译程序发现不能用4g了，原来是编译p59后，没有做clean动作. 增加一个说明到脚本中吧,也许应该发现修改了类型,就clean.

任银善
参考了openwrt的脚本,发现它的加载umac驱动时增加了testmode=1和ahbskip=1 两个参数。并在wifi驱动编译时，打开了对应的2个开关。现在可以进行art校准2.4G和5G。

汪光华
1860内核中增加了那个no_window的参数,但是发现没有那个文件, dmesg发现这个模块没有加载起来,跟踪程序发现里面的data字段都消失了. android奇怪的现象.

叶京平
要一个p59, 要增加gps, 还有增加一个到了总站自动切换到总站的wifi去.

郑达
反复重启挂掉了, 改为reboot看看.

周洪亮
有个手环的, 硬件由


8.27
来来来，做消除吧:
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/../adf/include/os/adf_os_defer.h:101:1: note: expected 'adf_os_defer_fn_t' but argument is of type 'void * (*)(void *)'


/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm_sta.c: In function 'ieee80211_recv_fms_rsp':
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm_sta.c:331:1: warning: the frame size of 5096 bytes is larger than 1024 bytes [-Wframe-larger-than=]
 }
 ^
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm_sta.c: In function 'ieee80211_add_tfs_resp':
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm_sta.c:447:1: warning: the frame size of 5328 bytes is larger than 1024 bytes [-Wframe-larger-than=]
 }
 ^
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm_sta.c: In function 'ieee80211_recv_tfs_recv_notify':
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm_sta.c:481:1: warning: the frame size of 4128 bytes is larger than 1024 bytes [-Wframe-larger-than=]

/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm.c:1121:1: warning: the frame size of 4136 bytes is larger than 1024 bytes [-Wframe-larger-than=]
 }
 ^
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm.c: In function 'wlan_wnm_set_fms':
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/wnm/ieee80211_wnm.c:1254:1: warning: the frame size of 4144 bytes is larger than 1024 bytes [-Wframe-larger-than=]
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../umac/../os/linux/src/ald_netlink.c:151:1: warning: the frame size of 3688 bytes is larger than 1024 bytes [-Wframe-larger-than=]



WARNING: /opt/work/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ath_dev/ath_dev: 'bus_dma_sync_single' exported twice. Previous export was in /opt/work/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ath_dev/ath_dev.ko
WARNING: /opt/work/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ath_dev/ath_dev: 'bus_unmap_single' exported twice. Previous export was in /opt/work/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ath_dev/ath_dev.ko
WARNING: /opt/work/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ath_dev/ath_dev: 'bus_map_single' exported twice. Previous export was in /opt/work/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ath_dev/ath_dev.ko

/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ratectrl/if_athrate.c:1084:46: warning: 'rix' may be used uninitialized in this function [-Wmaybe-uninitialized]
         pRc->TxRateInMbps += pRateTable->info[rix].rateKbps / 1000;
/opt/work/ath9.5/drivers/wlan_v10/os/linux/../../lmac/spectral/spectral.c:1362:1: warning: the frame size of 10120 bytes is larger than 1024 bytes [-Wframe-larger-than=]






使用3.18.23的
In file included from ./arch/mips/include/asm/page.h:15:0,
                 from /opt/work/temp/ath9.5/drivers/wlan_v10/os/linux/ath_hal/../../../include/compat.h:101,
                 from <command-line>:0:
./arch/mips/include/asm/mipsregs.h:769:33: error: unknown type name 'u16'
 static inline int mm_insn_16bit(u16 insn)
内核，4.8编译器，wlan_v10的无线驱动，好像报错也是一大堆。

这个文章要求改 mipsisa32-be-elf.inc这个文件：
https://codedump.io/share/fPhSVNKO0bjT/1/compiling-a-driver-for-mips-architecture-on-44-kernel
去掉这个system是可以去掉这个错误的，不过：
wlan_v10/os/linux/../../adf/net/linux/adf_net.c:424:38: error: macro "alloc_netdev" requires 4 arguments, but only 3 given
                           ether_setup);
                                      ^
/opt/work/temp/ath9.5/drivers/wlan_v10/os/linux/../../adf/net/linux/adf_net.c:423:14: error: 'alloc_netdev' undeclared (first use in this function)
     netdev = alloc_netdev(sizeof(struct __adf_softc), info->if_name,

按照这个文章的说明，是3.17以后的内核修改了这个函数的定义
http://rglinuxtech.com/?p=1184
Thanks to Erwin Zoer (see his comment below the earlier post for 3.17-rc1..), there is a fix available – for ~/vmware-only/netif.c
For kernel 3.17-rc3 and later, change line 152 from
dev = alloc_netdev(sizeof *netIf, deviceName, VNetNetIfSetup);
to
dev = alloc_netdev(sizeof *netIf, deviceName, NET_NAME_UNKNOWN, VNetNetIfSetup);
那样这样改看起来是不会报错的：
#if LINUX_VERSION_CODE > KERNEL_VERSION(3,17,0)
    netdev = alloc_netdev(sizeof(struct __adf_softc), info->if_name,NET_NAME_UNKNOWN,
                          ether_setup);
#else
    netdev = alloc_netdev(sizeof(struct __adf_softc), info->if_name,
                          ether_setup);
#endif

然后是这个：
error: incompatible types when assigning to type 'u_int32_t' from type 'kuid_t'
这样的问题，强制转换怎么样？
http://blog.csdn.net/CSDN5741/article/details/38637641
这样不行，变成了这样的错误：
os/linux/src/ath_netlink.c:97:30: note: in expansion of macro 'NETLINK_CREDS'
          uid = *(u_int32_t *)NETLINK_CREDS(skb)->uid;
注释掉算了，反正只是一个为了print，赋值没有其他作用。

然后变成了：
/opt/work/temp/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ath_dev/../../os/linux/src/if_bus.o:(___ksymtab+bus_dma_sync_single+0x0): multiple definition of `__ksymtab_bus_dma_sync_single'
直接注释掉aponly中的export，不知道有没有问题。

还有，此恨绵绵无绝期啊：
/opt/work/temp/ath9.5/drivers/wlan_v10/os/linux/../../lmac/ath_pktlog/../../os/linux/include/osdep_adf.h:188:3: error: unknown type name 'ctl_table'
 f(ctl_table *ctl, int write, void *buffer,
加一个struct解决了。

还有：
os/linux/src/if_ath_ahb.c:409:75: error: macro "alloc_netdev" requires 4 arguments, but only 3 given
     dev = alloc_netdev(sizeof(struct ath_ahb_softc), "wifi%d", ether_setup);
和上面的一样，
继续：
/osif_umac.c:6009:59: error: macro "alloc_netdev" requires 4 arguments, but only 3 given
     dev = alloc_netdev(sizeof(osif_dev), name, ether_setup);

换了：
/opt/work/temp/ath9.5/drivers/wlan_v10/os/linux/../../umac/../os/linux/src/adf_net_vlan.c:83:19: error: 'NETIF_F_HW_VLAN_TX' undeclared (first use in this function)
  dev->features |= NETIF_F_HW_VLAN_TX | NETIF_F_HW_VLAN_RX
这个宏可能已经修改了名字：
文件中drivers/net/ethernet/realtek/8139cp.c
 if (features & NETIF_F_HW_VLAN_CTAG_RX)
那么改成这样吧：
#if LINUX_VERSION_CODE > KERNEL_VERSION(3,18,0)
        dev->features |= NETIF_F_HW_VLAN_CTAG_TX | NETIF_F_HW_VLAN_CTAG_RX |
                NETIF_F_HW_VLAN_CTAG_FILTER;
#else
        dev->features |= NETIF_F_HW_VLAN_TX | NETIF_F_HW_VLAN_RX |
                NETIF_F_HW_VLAN_FILTER;
#endif

还有：
os/linux/src/osif_proxyarp.c:40:19: error: conflicting types for 'ipv6_addr_is_multicast'
 static inline int ipv6_addr_is_multicast(const struct in6_addr *addr)
应该是内核中已经存在了，加上
#if LINUX_VERSION_CODE < KERNEL_VERSION(3,18,0)
不编译就可以了。

终于编译通过了。

怎么又有问题了？
/home/jian/work/temp/ath9.5/build/../linux/kernels/linux-3.18.23/include/linux/sysfs.h:457:2: error: pointer targets in passing argument 2 of 'kernfs_find_and_get' differ in signedness [-Werror=pointer-sign
这里有同样的问题，但没有解答https://pastebin.com/gbjTKwSy
干脆让告警通过吧。

可以了，可以了。but连不上了。悲催啊。算了，不管这个分支了。从代码看，还是应该使用10.4的那个wlan驱动。


8.26
[   43.230000] [<801ab2c0>] 0x801ab2c0 ffffffff801ab2c0 t mem32_serial_out
[   43.230000] [<80075794>] 0x80075794 ffffffff80075c90 T sys_syslog
[   43.230000] [<80091af0>] 0x80091af0 ffffffff800918f8 T hrtimer_interrupt
[   43.230000] [<865a8510>] 0x865a8510
[   43.230000] [<865a8548>] 0x865a8548
[   43.230000] [<865b0f70>] 0x865b0f70
[   43.230000] [<865b0000>] 0x865b0000
[   43.230000] [<8582216c>] 0x8582216c
[   43.230000] [<85871a88>] 0x85871a88
[   43.230000] [<801ab9a4>] 0x801ab9a4 ffffffff801ab9a4 t serial8250_console_putchar
[   43.230000] [<80205814>] 0x80205814 ffffffff802057c8 T dev_addr_init
[   43.230000] [<858722a8>] 0x858722a8
[   43.230000] [<801b4cac>] 0x801b4cac ffffffff801b4bf4 T driver_probe_device
[   43.230000] [<801b4e54>] 0x801b4e54 ffffffff801b4ddc t __driver_attach
[   43.230000] [<801b3298>] 0x801b3298 ffffffff801b3288 t next_device
[   43.230000] [<801b4ddc>] 0x801b4ddc ffffffff801b4ddc t __driver_attach
[   43.230000] [<801b3340>] 0x801b3340 ffffffff801b32b0 T bus_for_each_dev
[   43.230000] [<801b3138>] 0x801b3138 ffffffff801b3110 t bus_get
[   43.230000] [<801b4510>] 0x801b4510 ffffffff801b43f4 T bus_add_driver
[   43.230000] [<80094bf0>] 0x80094bf0 ffffffff80094bcc T __wake_up
[   43.230000] [<80089304>] 0x80089304 ffffffff800892d0 T queue_work_on
[   43.230000] [<801b532c>] 0x801b532c ffffffff801b5264 T driver_register
[   43.230000] [<85bff030>] 0x85bff030
[   43.230000] [<85bff000>] 0x85bff000
[   43.230000] [<80060904>] 0x80060904
[   43.230000] [<800db318>] 0x800db318
[   43.230000] [<80092db8>] 0x80092db8
[   43.230000] [<800a6290>] 0x800a6290
[   43.230000] [<800e573c>] 0x800e573c
[   43.230000] [<8006b0b0>] 0x8006b0b0
[   43.230000] [<8017a3bc>] 0x8017a3bc

8.25
编译双wan的p53新程序，使用以太网做为wan，自动获得ip成功，上网成功，拔掉网线自动切换到了4g，换成了静态地址后，如果不是设置的上次获得的地址，就不能ping到192.168.19.1,能ping到其他机器。只好换成上次分配的地址，这样上网后，第一次拔网线sub，出现问题，两个路由都存在，那么check_nat那个脚本出现了问题，不知道该伪装到哪个网卡。再插上网线对了，后面没有再次出现这样的情况。

王伍
工业路由器考虑后面是加一个硬件看门狗。
要郑达做重启测试。

梁剑
还有一直无线单模式没有做。

8.24
[   20.390000] usb 1-1.2: FTDI USB Serial Device converter now attached to ttyUSB0
[   20.490000] usb 1-1.3: new high-speed USB device number 4 using ehci-platform
[   20.700000] usb 1-1.4: new high-speed USB device number 5 using ehci-platform
[   20.820000] cdc_ncm_probe : InterfaceNumber = 0
[   20.820000] USBNCM cdc_ncm_probe : usb\vid_1ab7&pid_1761&mi_00
[   20.830000] cdc_ncm_probe : InterfaceNumber = 1
[   20.830000] USBNCM cdc_ncm_probe : usb\vid_1ab7&pid_1761&mi_01
[   20.850000] option 1-1.4:1.2: GSM modem (1-port) converter detected
[   20.850000] usb 1-1.4: GSM modem (1-port) converter now attached to ttyUSB1
[   20.870000] option 1-1.4:1.3: GSM modem (1-port) converter detected
[   20.870000] usb 1-1.4: GSM modem (1-port) converter now attached to ttyUSB2
[   20.890000] option 1-1.4:1.4: GSM modem (1-port) converter detected
[   20.890000] usb 1-1.4: GSM modem (1-port) converter now attached to ttyUSB3


8.23
ubuntu的wine版本应该比较老吧，装这里的看看：
https://wiki.winehq.org/Ubuntu
jian@jian-OptiPlex-9020:~/work/temp/ath9.5/build$ wine --version
wine-1.6.2
jian@jian-OptiPlex-9020:~/work/temp/ath9.5/build$ wine --version
wine-2.0.2

8.22
是不是这样就解决问题了？
echo 1 > /proc/sys/net/netfilter/nf_conntrack_tcp_no_window_check

在/proc/sys/net/ipv4/conf/default，p53和p25是一样的。
/proc/sys/net/ipv4/conf/all这里也一样

桌面上这个9344的0keeper运行了38天，今天下午3点不能连接了，是不是这段时间连接的客户端超级多？

TOZED_SOFTVERSION TOZED_VERSION
 Symbol: IP_ROUTE_MULTIPATH [=y]                                                                                                │
  │ Type  : boolean
  │ Prompt: IP: equal cost multipath                                                                                               │   Defined at net/ipv4/Kconfig:84                                                                                               │   Depends on: NET [=y] && INET [=y] && IP_ADVANCED_ROUTER [=y]                                                                 │   Location:                                                                                                                    │     -> Networking support (NET [=y])                                                                                           │       -> Networking options                                                                                                    │         -> TCP/IP networking (INET [=y])                                                                                       │           -> IP: advanced router (IP_ADVANCED_ROUTER [=y])


8.21
qsdk中qca/src/qca-wifi-10.4/os/linux/configs/目录中看起来是wifi的配置文件。

看起来区别也不是非常大。
~/work/ath9.5/linux/kernels/linux-3.3.8$ meld .config ~/work/zte7520_ap/linux_plat/base/linux/linux-3.4.x/.config

 Symbol: NF_NAT_SNMP_BASIC [=m]

这个CONFIG_ARCH_HIBERNATION_POSSIBLE=y看起来没有任何地方用到了。

这个TRAD_SIGNALS也不知道是什么
 Symbol: TRAD_SIGNALS [=y]                                                                                                      │
  │ Type  : boolean                                                                                                                │
  │   Selected by: 32BIT [=y] && <choice> && CPU_SUPPORTS_32BIT_KERNEL [=y] && SYS_SUPPORTS_32BIT_KERNEL [=y]

8.20
CONFIG_SLUB=y改为slab，貌似也没有什么效果。

这些选项需要开么：
CONFIG_PERF_EVENTS=y
CONFIG_SLUB=y
CONFIG_TRAD_SIGNALS=y
CONFIG_ARCH_HIBERNATION_POSSIBLE=y
CONFIG_ETHERNET_PACKET_MANGLE=y
CONFIG_XFRM_IPCOMP=m
CONFIG_IP_ROUTE_MULTIPATH=y
CONFIG_NET_IPIP=m
CONFIG_ARPD=y
CONFIG_SYN_COOKIES=y
CONFIG_INET_AH=m
CONFIG_INET_IPCOMP=m
CONFIG_INET_XFRM_TUNNEL=m
CONFIG_TCP_CONG_ADVANCED=y
CONFIG_IPV6_PRIVACY=y
CONFIG_INET6_AH=m
CONFIG_INET6_XFRM_TUNNEL=m
CONFIG_NF_CONNTRACK_EVENTS=y
CONFIG_NF_CONNTRACK_SNMP=m
CONFIG_NETFILTER_XT_TARGET_CONNMARK=m
CONFIG_NETFILTER_XT_TARGET_CT=m
CONFIG_NETFILTER_XT_TARGET_NOTRACK=m
CONFIG_NETFILTER_XT_MATCH_COMMENT=m
CONFIG_NETFILTER_XT_MATCH_CONNBYTES=m
CONFIG_NETFILTER_XT_MATCH_ESP=m
CONFIG_NETFILTER_XT_MATCH_HASHLIMIT=m
CONFIG_NETFILTER_XT_MATCH_HELPER=m
CONFIG_HAVE_IDE=y
CONFIG_INPUT=y

貌似p25开了的

# CONFIG_NETFILTER_NETLINK is not set
# CONFIG_NETFILTER_NETLINK_ACCT is not set
# CONFIG_NETFILTER_NETLINK_QUEUE is not set
# CONFIG_NETFILTER_XT_MARK is not set
# CONFIG_NETFILTER_XT_TARGET_CLASSIFY is not set
# CONFIG_NETFILTER_XT_TARGET_MARK is not set
# CONFIG_NETFILTER_XT_MATCH_DSCP is not set
# CONFIG_NETFILTER_XT_MATCH_LENGTH is not set

8.17
/opt/work/ath9.5/drivers/wlan_v10.4/os/linux/../../umac/../os/linux/src/if_ath_ahb.c:35:21: error: ath_pci.h: No such file or directory
/opt/work/ath9.5/drivers/wlan_v10.4/os/linux/../../umac/../os/linux/src/if_ath_ahb.c: In function 'ath_ahb_probe':
/opt/work/ath9.5/drivers/wlan_v10.4/os/linux/../../umac/../os/linux/src/if_ath_ahb.c:202: error: implicit declaration of function 'ol_ath_ahb_probe'
/opt/work/ath9.5/drivers/wlan_v10.4/os/linux/../../umac/../os/linux/src/if_ath_ahb.c: In function 'ath_ahb_remove':
/opt/work/ath9.5/drivers/wlan_v10.4/os/linux/../../umac/../os/linux/src/if_ath_ahb.c:249: error: implicit declaration of function 'ol_ath_ahb_remove'


/opt/work/ath9.5/drivers/wlan_v10.4/os/linux/../../umac/mlme/ieee80211_mgmt_sta.c: In function 'ieee80211_recv_beacon_sta':
/opt/work/ath9.5/drivers/wlan_v10.4/os/linux/../../umac/mlme/ieee80211_mgmt_sta.c:666: error: 'struct ieee80211com' has no member named 'ic_dfs_cancel_waitfor_csa_timer'

今天使用联芯模块，没有出现在win7下载网易iso下载一段时间，几秒钟，就停止的情况。
使用手机连到wifi，看微博视频貌似也是没有异常。

昨天的情况是用联芯模块，在win7下下载文件，很快就会停止，地址如下
wget http://mirrors.163.com/ubuntu-releases/17.04/ubuntu-17.04-desktop-amd64.iso
其实其他地址也差不多。

QGDW 11009-2013 电能计量封印技术规范
QGDW 11009-2013 电能计量封印技术规范_文库下载http://www.wenkuxiazai.com/doc/b2aa9c81cc175527072208dc-7.html
科陆电子RFID计量封印管理系统
http://solution.rfidworld.com.cn/2013_10/2d2ef4b90af72c28.html

8.14
王伍
电话主要说工业路由器的事情，问2个新人的情况，我需要再次

8.10
当前p53大小，增加了pppoe这个程序。
Filesystem           1K-blocks      Used Available Use% Mounted on
rootfs                    3904      3904         0 100% /


8.9
陈良计划和总结：
菲律宾GLOBE P25项目: 升级还会出现升挂的情况,短消息会出现重复读取的情况。TR069还没有完成。

这几天的提交看起来非常多，应该出一个版本了。

早上过来的时候，桌面上的联芯模块的p53已经不能ping出去了。结果直接升级了。

编译有如下错误：
rm: cannot remove ‘nart.tar.gz’: No such file or directory

8.3
http.cgi居然很容易错误：
/usr/share/p11-gcc/staging_dir/usr/bin/mips-linux-gdb --exec=/home/jian/work/ath9.5/staging/rootfs-tozedap-router_4g_industry_ap123.build/tzwww/cgi-bin/http.cgi -c core.http.cgi.9957 看不到什么。
只要刷新主页就能刷出来。


华润的邮件服务器地址 168.1.2.117
好像pptp和l2tp拨入的速度完全不同。一个正常，另外一个ping值高达几秒.

Ethernet MinSize = 512bit = 64 Byte
Ethernet MaxSize = 1518 Byte
so Ethernet IP MTU = 1518 - 18 ( 6 SRCMAC+ 6 DSTMAC+ 2 TYPE+ 4 CRC) = 1500 B
so Ethernet IP TCP MSS = 1500 - 40 ( 20 IP_HEADER + 20 TCP_HEADER) = 1460 B
so Ethernet IP UDP MTU/MRU = 1500 - 28 ( 20 IP_HEADER + 8 UDP_HEADER ) = 1472 B
so PPPoE MTU/MRU = 1500 - 8 ( 6 PPPoE_SESSION + 2 PPP_HEADER ) = 1492 B
so TCP over PPPoE MSS = 1492 ( PPPoE MTU/MRU ) - 40 ( 20 IP_HEADER + 20 TCP_HEADER) = 1452
so PPTP MTU/MRU = 1500 - 56 ( 20 IP_HEADER + 20 TCP_HEADER + 12 GRE_HEADER + 4 PPP_HEADER ) = 1444 B
so TCP over PPTP MSS = 1444 ( PPTP MTU/MRU ) - 40 ( 20 IP_HEADER + 20 TCP_HEADER) = 1404
so L2TP MTU/MRU = 1500 - 40 ( 20 IP_HEADER +8 UDP_HEADER + 8 L2TP_HEADER + 4 PPP_HEADER ) = 1460 B
so TCP over L2TP MSS = 1460 ( L2TP MTU/MRU ) - 40 ( 20 IP_HEADER + 20 TCP_HEADER) = 1420 B
so PPTP over PPPoE MTU/MRU = 1492 ( PPPoE MTU/MRU ) - 56 ( 20 IP_HEADER + 20 TCP_HEADER + 12 GRE_HEADER + 4 PPP_HEADER ) = 1436 B
so PPTP over PPTP MTU/MRU = 1444 ( PPTP MTU/MRU ) - 56 ( 20 IP_HEADER + 20 TCP_HEADER + 12 GRE_HEADER + 4 PPP_HEADER ) = 1388 B
so PPTP over L2TP MTU/MRU = 1460 ( L2TP MTU/MRU ) - 56 ( 20 IP_HEADER + 20 TCP_HEADER + 12 GRE_HEADER + 4 PPP_HEADER ) = 1404 B
so L2TP over PPPoE MTU/MRU = 1492 ( PPPoE MTU/MRU ) - 40 ( 20 IP_HEADER +8 UDP_HEADER + 8 L2TP_HEADER + 4 PPP_HEADER ) = 1452 B
so L2TP over PPTP MTU/MRU = 1444 ( PPTP MTU/MRU ) - 40 ( 20 IP_HEADER +8 UDP_HEADER + 8 L2TP_HEADER + 4 PPP_HEADER ) = 1404 B
so L2TP over L2TP MTU/MRU = 1460 ( L2TP MTU/MRU ) - 40 ( 20 IP_HEADER +8 UDP_HEADER + 8 L2TP_HEADER + 4 PPP_HEADER ) = 1420 B

p53的端口映射是不起作用的。

好像总是很多事情，然后没有时间记录，这样也不好吧。

郑达：
udpserver的基本功能有了，数据库也建了，但是由于sql server 2008没有内存表这样的东西，所以要考虑一个复杂的内存结构来实现。考虑还是在2016上直接完成。

8.1
去掉recovery程序后的9341，继续测试了792次，停止响应了。

7.31
去掉recovery程序后的9341，已经测试了779次，转到笔记本继续吧。


 Symbol: IP_VS_PE_SIP [=n]                                                                                                                                          │
  │ Type  : tristate                                                                                                                                                  │
  │ Prompt: SIP persistence engine                                                                                                                                     │
  │   Defined at net/netfilter/ipvs/Kconfig:274                                                                                                                        │
  │   Depends on: NET [=y] && NETFILTER [=y] && IP_VS [=n] && IP_VS_PROTO_UDP [=n] && NF_CONNTRACK_SIP [=m]                                                            │
  │   Location:                                                                                                                                                        │
  │     -> Networking support (NET [=y])                                                                                                                               │
  │       -> Networking options                                                                                                                                        │
  │         -> Network packet filtering framework (Netfilter) (NETFILTER [=y])                                                                                         │
  │           -> IP virtual server support (IP_VS [=n])

9531已经测试了2803次，加上前面的700多次，已经超过300次了。
去掉recovery程序后的9341，已经测试了494次。

7.30
...............................................................................2017-07-28 19:18:50
reboot  68 times
conneting...ok
 uptime
 08:01:09 up 1 min,  load average: 0.69, 0.22, 0.07
/tmp/tools #
wait 80 sec.
...............................................................................2017-07-28 19:20:10


7.28
貌似终端寄存器很多，一个一个看看：

GPIO Interrupt Mask (GPIO_INT_MASK)                      18040024 值 0
Miscellaneous Interrupt Mask (RST_MISC_INTERRUPT_MASK)   18060014 值 c
LUTs Ager Interrupt Mask (LUTS_AGER_INTR_MASK) Address:  18070008 值 f
Primary Interrupt Mask (IMR_P)                           181000A0 值 81810175
Secondary Interrupt Mask 0 (IMR_S0)                      181000A4 值 3cf
Secondary Interrupt Mask 1 (IMR_S1)                      181000A8 3cf
Secondary Interrupt Mask 3                               181000B0 0
Secondary Interrupt Mask 4 (IMR_S4)                      181000B4 0
Secondary Interrupt Mask 5 (IMR_S5)                      181000B8 0
Synchronous Interrupt Mask                               1810401C 5c
Asynchronous Interrupt Mask                              18104020 0
Asynchronous Priority Interrupt Mask                     1810408c 0
Synchronous Priority Interrupt Mask                      18104090 0
RTC Interrupt Mask                                       18107058 0
Checksum Interrupt Mask                                  18400044 0
Interrupt Mask (DMAINTRMASK)                             19000198 0
                                                         1A000198 d9


使用9531做复位动作，已经做了728次，现在增加了查看启动时间，继续做吧。


7.27
p59命令升级：
tftp -g 192.168.0.50 -l tozedap-p59_ap143-squashfs
update tozedap-p59_ap143-squashfs /dev/mtd3
tftp -g 192.168.0.50 -l vmlinux_routing.lzma.uImage
flashcp tozedap-p59_ap143-squashfs /dev/mtd3
7.26
只要系统设置为中文版，编译就会出现
/mkimage: invalid entry point -n
这样的东西。

【fedora】设置中文为默认语言
安装Fedora时，界面语言是英语，手动安装简体中文语言包：
1、打开终端，执行yum install system-config-language命令来安装语言套件；
2、然后执行system-config-language
选择中文简体。
在重启后会自动设置成中文。
http://www.cnblogs.com/lizunicon/p/3509559.html
换成英文也要狂下载一堆东西么？


7.24
p25的
 find -type f -print -exec cat {} \;
./ip_conntrack_buckets 	1024
./ip_conntrack_checksum 	1
./ip_conntrack_count 	6
./ip_conntrack_generic_timeout 	600
./ip_conntrack_icmp_timeout 30
./ip_conntrack_log_invalid 0
./ip_conntrack_max 7248
./ip_conntrack_tcp_be_liberal 0
./ip_conntrack_tcp_loose 1
./ip_conntrack_tcp_max_retrans 3
./ip_conntrack_tcp_timeout_close 120
./ip_conntrack_tcp_timeout_close_wait 60
./ip_conntrack_tcp_timeout_established 7200
./ip_conntrack_tcp_timeout_fin_wait 120
./ip_conntrack_tcp_timeout_last_ack 30
./ip_conntrack_tcp_timeout_max_retrans 300
./ip_conntrack_tcp_timeout_syn_recv 60
./ip_conntrack_tcp_timeout_syn_sent 120
./ip_conntrack_tcp_timeout_syn_sent2 120
./ip_conntrack_tcp_timeout_time_wait 120
./ip_conntrack_udp_timeout 120
./ip_conntrack_udp_timeout_stream 180

p53的
 find -type f -print -exec cat {} \;
./ip_conntrack_generic_timeout 600
./ip_conntrack_tcp_timeout_syn_sent 120
./ip_conntrack_tcp_timeout_syn_sent2 120
./ip_conntrack_tcp_timeout_syn_recv 60
./ip_conntrack_tcp_timeout_established 1200
./ip_conntrack_tcp_timeout_fin_wait 120
./ip_conntrack_tcp_timeout_close_wait 60
./ip_conntrack_tcp_timeout_last_ack 30
./ip_conntrack_tcp_timeout_time_wait 120
./ip_conntrack_tcp_timeout_close 10
./ip_conntrack_tcp_timeout_max_retrans 300
./ip_conntrack_tcp_loose 1
./ip_conntrack_tcp_be_liberal 0
./ip_conntrack_tcp_max_retrans 3
./ip_conntrack_udp_timeout 30
./ip_conntrack_udp_timeout_stream 180
./ip_conntrack_icmp_timeout 30
./ip_conntrack_max 8000
./ip_conntrack_count 13
./ip_conntrack_buckets 1024
./ip_conntrack_checksum 1
./ip_conntrack_log_invalid 0


p56
./ip_conntrack_buckets 1024
./ip_conntrack_checksum 0
./ip_conntrack_count 45
./ip_conntrack_generic_timeout 600
./ip_conntrack_icmp_timeout 30
./ip_conntrack_log_invalid 0
./ip_conntrack_max 1964
./ip_conntrack_tcp_be_liberal 1
./ip_conntrack_tcp_loose 1
./ip_conntrack_tcp_max_retrans 3
./ip_conntrack_tcp_timeout_close 10
./ip_conntrack_tcp_timeout_close_wait 60
./ip_conntrack_tcp_timeout_established 432000
./ip_conntrack_tcp_timeout_fin_wait 120
./ip_conntrack_tcp_timeout_last_ack 30
./ip_conntrack_tcp_timeout_max_retrans 300
./ip_conntrack_tcp_timeout_syn_recv 60
./ip_conntrack_tcp_timeout_syn_sent 120
./ip_conntrack_tcp_timeout_syn_sent2 120
./ip_conntrack_tcp_timeout_time_wait 120
./ip_conntrack_udp_timeout 30
./ip_conntrack_udp_timeout_stream 180

如下1860平台的M60和P28参数。
./ip_conntrack_buckets                  2048
./ip_conntrack_checksum               1
./ip_conntrack_count                     26（M60：164）
./ip_conntrack_generic_timeout     600
./ip_conntrack_icmp_timeout         30
./ip_conntrack_log_invalid              0
./ip_conntrack_max                       8012
./ip_conntrack_sctp_timeout_closed                      10
./ip_conntrack_sctp_timeout_cookie_echoed         3
./ip_conntrack_sctp_timeout_cookie_wait              3
./ip_conntrack_sctp_timeout_established               432000
./ip_conntrack_sctp_timeout_shutdown_ack_sent  3
./ip_conntrack_sctp_timeout_shutdown_recd         0
./ip_conntrack_sctp_timeout_shutdown_sent         0
./ip_conntrack_tcp_be_liberal                                 0
./ip_conntrack_tcp_loose                                       1
./ip_conntrack_tcp_max_retrans                            3
./ip_conntrack_tcp_timeout_close                      10
./ip_conntrack_tcp_timeout_close_wait              60
./ip_conntrack_tcp_timeout_established            432000
./ip_conntrack_tcp_timeout_fin_wait                 120
./ip_conntrack_tcp_timeout_last_ack                 30
./ip_conntrack_tcp_timeout_max_retrans          300
./ip_conntrack_tcp_timeout_syn_recv                60
./ip_conntrack_tcp_timeout_syn_sent                120
./ip_conntrack_tcp_timeout_syn_sent2              120
./ip_conntrack_tcp_timeout_time_wait              120
./ip_conntrack_udp_timeout                             30
./ip_conntrack_udp_timeout_stream                 180

7.22
pptpd的程序貌似只有在这里才找到
https://sourceforge.net/projects/pptpclient/files/pptp/

7.21
+l2tp拨号修正4g网络断线重连后可能无法再次拨入（梁剑）
+加上对poweon的操作，兼容联芯L1761模块（刘云）
+pptp拨号修正4g网络断线重连后可能无法再次拨入（梁剑）
+修正新的拨号程序后，tcp网管程序tzupdate不上报数据。（郑达）
+将有线中的IP地址与WIFI客户端中的IP地址分开保存在不同的配置中（向杰）
+当使用以太网客户端模式时，两个网口，左边为wan，右边为lan（梁剑）
+以太网客户端网页配置（向杰）
+增加以太网客户端模式，支持动态地址和静态地址（梁剑）
+pppd参考openwrt中的配置，删除ipx,tdb支持。（简亮）
+udp网管新程序增加上报参数（郑达）
+使用pptp 1.9.0，pptp 1.8.0太老了（任银善）


7.20

./cool ap-p11_4g_router switchwan_build
./cool p10p switchwan_build


只做复位，做到340次的时候没有响应了。
/tmp/tools #
wait 80 sec.
...............................................................................reboot  340 times
conneting...ok
BusyBox v1.24.2 (2017-07-18 09:20:31 CST) built-in shell (ash)
Enter 'help' for a list of built-in commands.
/tmp/tools #
wait 80 sec.
...............................................................................reboot  341 times
conneting...[Errno 110] Connection timed out
wait 80 sec.
...............................................................................reboot  342 times
conneting...[Errno 113] No route to host
wait 80 sec.



7.19
昨天的测试到了74次还是挂了。

7.18
[  126.660766] Kernel panic - not syncing: ERR: send to CP skb->data% != 0
[  126.666839] [<c000d4cc>] (unwind_backtrace+0x0/0xf8) from [<c04d4a24>] (panic+0x78/0x1ac)
[  126.674987] [<c04d4a24>] (panic+0x78/0x1ac) from [<c038cf24>] (insert_toext_dbg+0x15c/0x17c)
[  126.683380] [<c038cf24>] (insert_toext_dbg+0x15c/0x17c) from [<c038d750>] (insert_toext_mem+0xc/0x18)
[  126.692596] [<c038d750>] (insert_toext_mem+0xc/0x18) from [<c02b9d2c>] (ddrnet_tx_packet+0x60/0xe0)
[  126.701629] [<c02b9d2c>] (ddrnet_tx_packet+0x60/0xe0) from [<c03716e8>] (dev_hard_start_xmit+0x3dc/0x63c)
[  126.711181] [<c03716e8>] (dev_hard_start_xmit+0x3dc/0x63c) from [<c0397008>] (sch_direct_xmit+0xa4/0x198)
[  126.720733] [<c0397008>] (sch_direct_xmit+0xa4/0x198) from [<c0371b10>] (dev_queue_xmit+0x1c8/0x518)
[  126.729858] [<c0371b10>] (dev_queue_xmit+0x1c8/0x518) from [<c03db790>] (ip_finish_output+0x138/0x2bc)
[  126.739135] [<c03db790>] (ip_finish_output+0x138/0x2bc) from [<c03dbce0>] (ip_local_out+0x28/0x2c)
[  126.748077] [<c03dbce0>] (ip_local_out+0x28/0x2c) from [<c03dbe1c>] (ip_queue_xmit+0x138/0x394)
[  126.756774] [<c03dbe1c>] (ip_queue_xmit+0x138/0x394) from [<c04ab288>] (l2tp_xmit_skb+0x2fc/0x524)
[  126.765716] [<c04ab288>] (l2tp_xmit_skb+0x2fc/0x524) from [<c04ad45c>] (pppol2tp_xmit+0x140/0x1d0)
[  126.774658] [<c04ad45c>] (pppol2tp_xmit+0x140/0x1d0) from [<c01edd14>] (ppp_channel_push+0x48/0x94)
[  126.783660] [<c01edd14>] (ppp_channel_push+0x48/0x94) from [<c01ede58>] (ppp_write+0xf8/0x138)
[  126.792266] [<c01ede58>] (ppp_write+0xf8/0x138) from [<c007e6cc>] (vfs_write+0xa0/0x144)
[  126.800354] [<c007e6cc>] (vfs_write+0xa0/0x144) from [<c007e958>] (sys_write+0x38/0x70)
[  126.808349] [<c007e958>] (sys_write+0x38/0x70) from [<c0009020>] (ret_fast_syscall+


 killall wlan-server zte_usbCfgMng hotplugnl zte_rj45

各位同事请注意，把开票资料保存好！从7月1号开始无论是普通发票还是专用发票，发票上的这些信息一条都不能少。

公司名称：深圳市通则技术股份有限公司
地址电话：深圳市福田区车公庙天安工业区天吉大厦4楼A1、A2
          0755-83583715
税    号：91440300734188444E
开户银行：建设银行深圳泰然支行
银行帐号：44201530300052506208


早上来，145次挂了，最后一次看起来是
Writing kb: 408/6848 (5%) ntpd: setting time to 2017-07-18 08:43:49.747861 (offset +1500338536.021268s)
Writing kb: 6848/6848 (100%)
Verifying kb: 6848/6848 (100%)
sysfile vice recover end
2048+0 records in
2048+0 records out
1048576 bytes (1.0MB) copied, 0.499123 seconds, 2.0MB/s
Erasing block: 16/16 (100%)
Writing kb: 1024/1024 (100%)
Verifying kb: 868/1024 (8[  123.010000] setting phy reg 180600b8 to value 0...
Verifying kb: 1024/1024 (100%)
ker vice recover end,recover vice successful
write nart flag :ff
[  242.260000] setting phy reg 180600b8 to value 0...
[  284.380000] setting phy reg 1806001c to value 0...
[  287.390000] setting phy reg 1806001c to value ffffffff...



7.16
为什么我的电脑tftp不能默认启动了？
sudo service tftpd-hpa restart

即使使用mtd-util 2.0,mkfs.jffs2里面还是没有对其他压缩格式的支持。

77上面echo 1 >  /proc/sys/net/ipv4/ip_forward 居然没有开。

即使不加开机复位，p53仍然存在开发停住的情况。

Filesystem                Size      Used Available Use% Mounted on
rootfs                    3.8M      3.8M         0 100% /
rootfs                    3840      3840         0 100% /
比zlib算法少了1m。
如果是gcc-4.6编译的，就还要小一点
Filesystem           1K-blocks      Used Available Use% Mounted on
rootfs                    3776      3776         0 100% /


使用xz压缩算法后，p53的文件系统变得小到惊人：


p53上访问/mnt内部的文件
/mnt/etc # cat iptables_config
[  113.210000] JFFS2 compression type 0x06 not available.
[  113.210000] Error: jffs2_decompress returned -5



让vim记住上次编辑的位置
以下内容，保存到 ~/.vimrc 文件即可，以作备份。
" ======= 恢复上次文件打开位置 ======= "
set viminfo='10,\"100,:20,%,n~/.viminfo
au BufReadPost * if line("'\"") > 0|if line("'\"") <= line("$")|exe("norm'\"")|else|exe "norm $"|endif|endif
https://my.oschina.net/dogstar/blog/911998



7.15
铜川电信的测试地址是61.134.53.2
用户： ceshi,密码123456？

现在测试了187次了，应该问题不大了，加强了300次啦。

在ubuntu16中的vi 替换指令要这样写了：:%s#us\.#cn\.#
如果点号前不加\，那么所有的us都变成了cn.

7.14

请记录您的预约编号是：  44030020170714007459

 简亮： 您已预约成功，请您于  2017-07-19 下午 2:00-3:00  凭此预约编号， 提前到达  深圳市福田区  沙头派出所 (地址：深圳市福田区上沙新村20号，联系电话：83303116) 办理   市内移居  业务， 取号时间为：   下午2:00-2:45  ，凭预约成功短信密码可以取消预约，最晚取消预约时间为预约时间的前两小时。


p53升级了148次，停留写复位寄存器这个地方了。
在复位之前停止3秒，停电之前92次，现在继续吧。

7.13
现在7520升级了139次，看起来还是正常的。
p53升级了123次，看起来还是正常的。

何文秋
看起来解决了wifi作为客户端不能存储参数的问题。

余小虎
发现一个cherry-pick，不仅仅加入了那个commit-id的东西，还增加了若干个函数，看起来我们对cherry-pick的理解有误。

任银善
使用pc2site的方式，也可以拨入tplink，可以简化测试，当然，在线监控就难一点了。

轰天炮旗舰店:娇娇 (08:24:22):
简亮   719819175170中通，发票注意查收

federo下的iptables貌似需要这样处理一下：
sudo yum install perl-Errno --best --allowerasing
sudo yum install perl-threads.x86_64 --best --allowerasing

把web_update改为update的方式，recovery这个程序仍然在112次的时候，进入了停住响应的模式。
那么不要关看门狗试试吧。
这次是死在了升级过程中的setting phy reg 1806001c to value ffffffff...
只有20次，只有20次。
那么web中直接写吧，不用转到脚本中去了。

7.12
p25更加10就挂了，不断重启中。

工业路由器今天去掉lteup的重复调用，也拔掉了模块，仍然会出现write 101系统停住的问题。换一个板子来测试吧，现在没有卡，测试了78次了。

fedora 直接安装vim居然失败：
先更新了下vi，再装vim就好了 就是yum update vi 然后yum install vim
http://www.cnblogs.com/flyfish919/p/7152005.html

7.11
直接写复位寄存器都会失败？
[  243.180000] setting phy reg 1806001c to value ffffffff...

7.10
#
# AP91 -- Kernel configuration file for FreeBSD/mips for Atheros AP91 reference
#         board (AR7240)
#
# $FreeBSD$
#


Atheros Reference AP93
Clone this wiki locally

The Atheros AP93 is an AR7240 MIPS24k SoC enterprise reference design.
Overview

It has:

    AR7240 SoC, 400MHz
    64MB RAM
    16MB NOR flash
    USB 2.0 EHCI port
    on-chip 10/100 ethernet switch (LAN ports)
    10/100/1000 WAN port
    AR9280 2x2 2GHz wifi NIC



Atheros AP96 Reference board
Introduction

The Atheros AP96 is an AR7161 based, dual-AR9280 (2GHz + 5GHz) reference design.
Hardware

    AR7161, 680MHz
    64MB RAM
    8MB SPI flash
    1 x AR8316 10/100/1000BaseT ethernet switch
    2 x USB ports
    1 x AR9280 5GHz NIC
    1 x AR9283 2GHz NIC


The AP135 is a Qualcomm Atheros reference board, with:

    QCA9558 SoC (Scorpion) - 720MHz MIPS74kc; 600MHz DDR2 RAM; 3x3 2GHz 11n wifi;
    128MiB RAM;
    16MiB NOR flash (boot);
    128MiB NAND flash;
    AR8327 ethernet switch;
    QCA9880v2 3x3 11ac PCIe NIC.


Atheros PB47 Reference board
Introduction

The Atheros PB47 is an AR7161 based, single Mini-PCI+ slot reference board.
Hardware

    AR7161, 680MHz
    64MB RAM
    8MB SPI flash
    1 x AR8021 10/100/1000BaseT ethernet PHY (attached to arge1)
    1 x Akros Silicon AS1834
    2 x USB ports
    1 x Mini-PCI+ slot (see blow)
    1 x xMII slot



7.7
当前的工业路由器的大小
Filesystem           1K-blocks      Used Available Use% Mounted on
rootfs                    4800      4800         0 100% /

7.6
system_moniter -s /tmp/.system_protect.config

spectraltool这个进程会导致一个segmentation fail, 并导致其他登录的ifconfig 都停住不动。不知道是什么原因了。

7.5
吴曦
信可的说看门狗的做法是一个单片机的核，来监控其他的几个核。发过来的cp程序包括了这个功能，所以升级cp侧程序后，就不断在重启了。

为什么把rootfs改为staging目录就有问题？
cp ../apps/pptp-1.8.0/pptp /home/jian/work/ath9.5/build/../staging/rootfs-tozedap-cp_ap123.build/usr/sbin/
cp: failed to access ‘/home/jian/work/ath9.5/build/../staging/rootfs-tozedap-cp_ap123.build/usr/sbin/’: Not a directory
前面的pppd和chat都没有报错啊。
前面的把pppd和chat复制为sbin这个文件了。
但是，没有加上staging这个文件夹的时候是对的。

7.3
叶京平
问单ap的事情，认为2.4+5.8可以使用300m的带宽。

在没有开启dhcp的情况下，修改ip地址无效果。

当前ath9.5仓 2481464

姚国梁
查80端口默认没有屏蔽
电信卡选择3g还是在4g
把telnet换为ssh方式

7.2
9531 openwrt上
lrwxrwxrwx    1 root     root            16 May  8  2017 dbclient -> ../sbin/dropbear
lrwxrwxrwx    1 root     root            16 May  8  2017 dropbearkey -> ../sbin/dropbear
lrwxrwxrwx    1 root     root            16 May  8  2017 scp -> ../sbin/dropbear
lrwxrwxrwx    1 root     root            16 May  8  2017 ssh -> ../sbin/dropbear
-rwxr-xr-x    1 root     root        160821 Dec  6  2016 dropbear
真的小到离谱啊。


6.30
华润的早上一来就报不能使用了，

当前ath9.5仓大小
du . -s
2537636	.

6.29
王伍
斯里兰卡电信还要做一个类似wifidog的东西。

向杰
越南文版本已经发出。

14:59 手上的这个p53居然串口停止响应，然后复位了。

梁剑
双wan各种情况太复杂了。

喻潇
p53的新程序wifi灯不亮了。

李柱栋
斯里兰卡那里的tr069有多发消息，修改了代码还是有，只有先加log，在根据log来分析。
还要做wifidog这个东西。

早上华润就报不能用了。重启了一下tplink，貌似有4个在线了。
发现那个aaa账号的不会一直断线，而其他的账号在日志中总是有不断的上线消息。

6.28
华润我们的地址是120.197.116.46:8100
tozed 1qazxsw2

当前卡是13602680403

刘云
如果在写文件的时候断电，非常容易出现不能启动的情况。

吴曦
cp侧升级，信可说有进展了，下午去看看。
锁运营商，锁机，锁卡等，不记得是中兴做的还是后面加的。
4g使用speedtest掉网的情况，下午去看看。
锁band，要把当前支持的band在网页上列出来。网页上采用读nv的方式，不直接发生at指令。
apn增加，王伍觉得操作流程不好。
生产，王伍要求加生产页面，其实在生产工具中有各种检查，各种绿色的pass.
生产工具：4g天线，如何读出每个天线的rssi值
重启是设置at+reset
看门狗
开机过程中拔电，看看这个ubi是否正常。

汪光华
感觉可以开始折腾l2tp了。

郑伟峰
柬埔寨的10台样机没法很快出。

王伍
ubi是andriod的标准系统， 所以理论上是没有问题的。

6.27
当前ath9.5仓大小是2.5G ，目标考虑减少到1g。
jian@jian-PowerEdge-2950:~/work/ath9.5$ du . -s
2586872 .

工业路由器增加了什么东西？
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 4864      4864         0 100% /


白俊剑
正在搬家，北站那里1房1厅要到3000了。

刘汉琴
问职称的事情。

任银善
要宽翼的at指令。

喻潇
p53中的智能重启，工具的默认值和设备的默认值是不同的。

河北办 史军龙
没有对cpe 5g升级过。
说升级后也不能搜索到其他厂商的ap.

王伍
认为内核中的ubi系统可能太老了。
说让李柱栋去先折腾p25上的slic程序，如何能够支持voip, 要用7520做一个m60出来。

使用我的机器buildall一次ath9.5，大约需要40分钟吧。

有些进程看起来ctl+c不能停止，即使kill -9了，还是在ps中存在：
jian@jian-OptiPlex-9020:~/work/ath9.5/build$ ps
  PID TTY          TIME CMD
 6101 pts/0    00:00:01 bash
10228 pts/0    00:00:00 bash
10230 pts/0    00:00:00 bash
10326 pts/0    00:00:00 wget <defunct>
21462 pts/0    00:00:00 ps

嗯，这个里面貌似是我在编译的时候退出了？
jian@jian-OptiPlex-9020:~/work/ath9.5/build$ ps -l
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000  6101  6093  0  80   0 -  7840 wait   pts/0    00:00:01 bash
0 R  1000  9552  6101  0  80   0 -  4069 -      pts/0    00:00:00 ps
1 T  1000 10228  6101  0  80   0 -  7840 signal pts/0    00:00:00 bash
1 T  1000 10230 10228  0  80   0 -  7840 signal pts/0    00:00:00 bash
0 Z  1000 10326 10230  0  80   0 -     0 exit   pts/0    00:00:00 wget <defunct>
jian@jian-OptiPlex-9020:~/work/ath9.5/build$ kill -9 10228
jian@jian-OptiPlex-9020:~/work/ath9.5/build$ ps
  PID TTY          TIME CMD
 6101 pts/0    00:00:01 bash
 9901 pts/0    00:00:00 ps
[1]+  Killed                  ./buildall.sh  (wd: ~/work/temp/ath9.5/build)
(wd now: ~/work/ath9.5/build)

河北 翟福坤
河北发了10台5.8g的cpe，但是扫描不到其他公司的ap，把115版本，国家代码改成菲律宾的版本发给他试试。

鄂尔多斯移动李工
服务器已经安装，需要安装网管软件了。

何文秋
居然知道tamper，1 (未经许可擅自) 变更 [原文等] ,窜改[with]这个词。
认为p25虽然在扫描过程中会改变语言，但是扫描后就没事了。

吴曦
联通和柬埔寨的修改已经改成了配置。
升级nv还是存在问题。

金晶
定位需要这些内容：cellid, lac, mnc mcc.
谷歌提供开发的api
在江西永新的设备有奇怪的现象，使用了vlan，上端是华为的交换设备。设备会掉线，开始认为是设备问题，后来发现设备断电重开还是不能连接，连接到交换设备的那些设备在线的口，正常。关电10分钟再开，正常。其他电脑连接，正常。
测试了一下派联的软件，做压力测试非常不满意，每秒写的次数只有30个，应该达到1000个/s才合适。使用的是mysql数据库。

朱卫平
要在wifi覆盖中增加审计软件，需要任银善或赵刚支持。

openwrt里面的程序非常非常小啊。
使用里面的busybox的.config编译的文件
-rwxrwxr-x 1 jian jian 361352  6月 27 10:45 busybox*
而9531中的更小，而且vi sed之类也不缺
-rwxr-xr-x    1 root     root       292928 Jun 26 12:33 busybox

6.26
向杰
明天请假。

刘汉琴
程洪卫问为什么研发一下走了多个人，把我说的顶不住压力的话说了出来。

梁剑
重写switchwan，以期达到支持wan, wifi, 静态地址，动态地址，pppoe的效果。

叶京平
柬埔寨认为我们的工业路由器wifi性能很好，在别墅中比tplink的要好很多，希望我们去掉4g模块，直接出路由器产品给他们。

郑达
还没有验证pin功能是否有效果
大连奥远的来问网管的事情。

陈良
让大连的人去看tr069,建议他们用tr069

吴曦
从04升级到06版本，不升级nv，可以启动，升级nv，进入trap模式。

mini-snmp的1.4版本，比起当前仓中的版本，貌似没有改变。

何文秋：
毕业证已经拿到了。

王伍
为什么p21使用安全工具扫描之后网页不能看到了？
查找了一些ubi系统崩溃的文章。

姚国梁 何文秋
扫描之后确实网页不能打开了，是切换到了中文版本，而中文版本不对，少了个逗号，导致网页无法显示了。

汪光华 吴曦
看起来dnsmasq好像不能只分配一个ip。

6.25
这样openvpn就可以编译了。
OPENVPN_DIR=../apps/openvpn/openvpn-2.3.6
openvpn_build:polarssl-1.2.19_build
        if ( test ! -e $(OPENVPN_DIR)/Makefile );then \
                cd $(OPENVPN_DIR) && ./configure  --host=mips-linux --disable-lzo --disable-plugin-auth-pam --with-crypto-library=polarssl POLARSSL_CFLAGS=-I$(TOPDIR)/apps/polarssl-1.2.19/include POLARSSL_LIBS=$(TOPDIR)/apps/polarssl-1.2.19/library/libpolarssl.a; \
        fi
        make -C  $(OPENVPN_DIR) CC=$(TOOLPATH)/bin/mips-linux-uclibc-gcc

为什么在77上cpe-ap的tozedmgr还是编译报错？

任银善：
第一家企业是做地震监测的。这样在各种地方安装个比较大的铁盒子，里面是陀螺仪监测数据，通过网络发送出去，然后通过计算及时算出结果，在地震发生时对边缘地带进行预警，能提前10多秒的样子。据说很多人都是在家门口被压住，即使只提前1s也能挽救不少。这个还需要很多的志愿者来发送消息。


6.23
向杰
正在改越南文的。

汪光华
增加了ip passthrough的脚本，pc设置ip后可以上网，自动获得还有问题。

郑达
找到了输入的pin的代码，但是网页上输入pin这个功能在工业路由器上从来都是不能用的。
觉得增加一个lt10的程序自己做更快一些，可能给赵金做有些失望。

6.22
吴曦
如果使用系统升级，那么升级后不能发送at指令，后面单独升级一次nv，就好了。这样，说明至少有可以用的情况。

李柱栋
中兴的无法使用便宜的slic，还是要用那颗贵的。


6.21
何文秋
明天下午请假，后天毕业典礼。

任银善
昨晚有太断了，确认了一下，连不上的主要原因好像是服务器的问题，端口不能访问。昨晚0点，我重启了服务器，早晨查看都连接上了。

6.20
张勇
工业路由器在升级后，恢复另外一个系统的过程中，有1/6的可能性会停止，系统完全停止响应。在原来没有出现过的事情。

喻潇
国内的一些联系都是直接到喻潇这里，国外的也可以先走李光达。
软件著作权和宿新艳讨论。

廖媛
问客户支持的内部流程。对于小的项目，没有明显的项目负责人的项目，会出现推责任的现象。

陈良：
p21的sn号原来是tz+0406(日期)+imei(后若干位组成)， tr069要上报sn号。估计要一直采用这个规则了。
要安排软件著作权的事情。

刘云
来要工业路由器的机器。

6.19
郑达
来提加薪的事情，他的同学，一般转正是7k左右，一年左右能加2-3k。最高的那个有14k，觉得自己不比这些同学差，薪水却要低，心里比较失落。

廖媛
意大利的p10出现某些ip ping包周期性掉包的情况。貌似这样的情况不好分析。

李柱栋
p28接到m60后面，发现ping非常慢，两次间隔会到好多秒。但是p28直接连接到公司网络，ping出去没有异常，使用pc连接到m60去ping没有问题，使用busybox的正常。

刘云
bigap1总是编译不过去，还是苗立双手工改了一下。
余小虎发现恢复出厂的情况下pc可能无法得到正常的ip地址，后来王伍发出邮件，如果找不到w13断网口的地方，就不要解了。

张勇
tree是看代码树的工具。

吴曦
湖北：需要锁物理小区，汪光华处理，有at指令
	 登录后直接跳转到apn页面，完成，以后是不是考虑做到配置中去。
	 apn需要登录，这个要在本地测试。
	 band1/3 模块不够，考虑把手头上的模块当做样机发出。信可估计要到周三后才能到。
柬埔寨：叶京平已经把设备带到了现场。这些修改需要变成配置。
基本：cp侧升级。当前升级了几个区，貌似也成功了，但是读取moden的版本还没有变化。
	 感觉每次开机，nv都会改变。
     trap状态通过ap指令关闭后，出现问题机器会重启。
生产：wifi校准工具，郑伟峰认为使用这个工具灵敏度较差。
短信：存储修改，重复显示问题。
通讯录：也出现过重复显示的问题。

工业路由器免密码登录：
改成这样看起来是可以用了：
ttyS0::respawn:/bin/sh

如果改成：
::respawn:/bin/sh
那么会出现这样的提示：
/bin/sh: can't access tty; job control turned off

在inittab这个文件去掉
::respawn:/sbin/getty ttyS0 115200
加上
::askconsole:/bin/ash --login
串口不会出现任何提示。

6.16
inittab改成这样，那么串口登录不了：
::respawn:/sbin/getty -l /bin/sh ttyS0 115200

iperf3的最新版本增加了ssl，还不知道如何砍掉。
感觉是iperf_auth.c这个文件导致的。

/usr/sbin/httpd -h /tzwww -c /etc/httpd.conf
cat /etc/httpd.conf
/moduleinfo.txt:module:info
这个文件什么概念？


网页的wan配置中
PIN码验证: 	已关闭
PIN操作: 	开启PIN码验证
似乎是网页去发at进行pin查询的，在sim7000c时，会出现这样的情况：
12471 root      1476 S    http.cgi
12498 root      1196 S    sh -c sendat -d/dev/ttyUSB1 -f/tmp/at_send -o/tmp/at
12502 root      1120 S    sendat -d/dev/ttyUSB1 -f/tmp/at_send -o/tmp/at_recv
12506 root      1120 S    sendat -d/dev/ttyUSB1 -f/tmp/at_send -o/tmp/at_recv
12507 root      1120 S    sendat -d/dev/ttyUSB1 -f/tmp/at_send -o/tmp/at_recv
~ # cat /tmp/at_send
AT+CPIN?
网页为什么要查cpin?貌似有些搞笑。

6.15
张勇
原来的那个tzupdate的程序完全不靠谱，写的非常随意。

CQ17051111
allrun1111

当前的ath0中，txbyte还是错误的，永远都是0.
recover config.tozedap-cp,and repair RX error

去掉checkmoduletype_build checkusbnet_build checksysmanagetool_build system_updater_build monitortool_build后
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 4672      4672         0 100% /

ntpclient这个应用貌似已经被放弃，还有rc.date这个脚本。

whatsapp经常提示更新，现在的版本是2.17.221

如果去掉libm这个数学库，那么这些函数就没有实现了：
cJSON.o: In function `parse_number':
cJSON.c:(.text+0xc00): undefined reference to `pow'
cJSON.o: In function `print_number':
cJSON.c:(.text+0xef0): undefined reference to `floor'
collect2: ld returned 1 exit status

6.14
周连鹏 打流的效果：
7620 单流 20m： 56m
7628 单流 20m： 只有40-50m
从编码上看，7628是ofdm，而7620是ht。

王伍
sip-alg的实现方式有两种，一种是使用内核的方式，加上sipalg的支持，并且加上iptable的命令就可以实现。
另外一种方式是在应用级别的程序，这样做的问题可能是本地的sip程序就无法监听5060?端口了。

张勇
当前的公司测试的网络结构
1.77 gw/1.3 ------------- 1.3/113..202
	 ppp0 192.168.33.1

1.148 gw/1.3


pc 0.236		p53 ----4g
    			ppp0 192.168.33.2

从pc可以ping到1.148，但是0.236这个地址看起来被直接带到了148上面。从1.77上抓包看，是出现了0.236这个地址的。

刘云
如果不开设备网页，那么运行正常，一开设备页面，内存马上下降。

菲律宾的5g看来是全的：
cfg -a ATH_countrycode=608

喻潇
p21的测试是在李光达，没有进行屏蔽房不断开关门测试。

苗立双
开始编译1826程序。另外一个压缩包中有编译的说明。

赵金去掉了busybox中的静态库
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 4800      4800         0 100% /
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 4.7M      4.7M         0 100% /
去掉iproute2,使用busybox中的ip
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 4736      4736         0 100% /

吴曦
没有看到升级脚本中升级内核的地方。
对升级nv有些担忧。

curl的功能还是强大的：
http://flyheaven.blog.163.com/blog/static/7401172201193111112273/

廖媛
那个sip alg还是enable不能用,disable可以用.

6.13
余小虎
v10:
要增加会议和转接

p11s:
测试出修改室外单元的dhcp后,pc获得ip存在不正常的情况。
gre算通过了，需要写一个说明。

p28
存在硬件问题，充电ic，电池不供电了。有重启问题，电路要改。
软件上voip有回声。
三个运营商都有送。dialog: fax要匹配华为的设备。
斯里兰卡电信：测试voip, fax。要想办法换掉客户手中的机器。
兰卡贝尔：已经发现重启问题，修改后在挂测。

m60:
dialog还有检查2000台，1500台很难收回来。物料可能今天到，没有物料，检查也没有用。
整体的故障率在8-9%.
本月下旬，m60的新版本算完成了，要自测。

斯里兰卡电信 上voip+volte，程序+配置进行升级。
外置天线要测试。
扯皮中。

赵金去掉了剩下的几个cmdlib.c
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 4864      4864         0 100% /

tftp $loadaddr $firmware_name && erase 0x9F000000 +$filesize && cp.b $loadaddr 0x9F000000 $filesize

周连鹏
使用nmap扫描在公网上的路由器，会出现这样的情况：
Completed NSE at 14:08, 16.16s elapsed
Nmap scan report for 122.190.248.194
Host is up (0.13s latency).
Not shown: 992 closed ports
PORT     STATE    SERVICE        VERSION
53/tcp   open     tcpwrapped
80/tcp   filtered http
135/tcp  filtered msrpc
139/tcp  filtered netbios-ssn
445/tcp  filtered microsoft-ds
593/tcp  filtered http-rpc-epmap
4444/tcp filtered krb524
8080/tcp filtered http-proxy
这几个filtered有些奇怪，看解释是这样：

filtered(被过滤的)
    由于包过滤阻止探测报文到达端口， Nmap无法确定该端口是否开放。过滤可能来自专业的防火墙设备，路由器规则 或者主机上的软件防火墙。这样的端口让攻击者感觉很挫折，因为它们几乎不提供 任何信息。有时候它们响应ICMP错误消息如类型3代码13 (无法到达目标: 通信被管理员禁止)，但更普遍的是过滤器只是丢弃探测帧， 不做任何响应。 这迫使Nmap重试若干次以访万一探测包是由于网络阻塞丢弃的。 这使得扫描速度明显变慢。



郑达
手机上连接wifi后，直接出登录界面的情况，苹果和android的实现是不同的。
苹果的做法是使用http 1.0的方法去访问apple的网站，如果发现访问的和预期的不一样，那么就认为这个wifi需要登录，弹出登录的页面。
android的情况比较复杂，有些是使用url转移的。
还是要使用dns劫持来完成，这样这个系统无法这样做。

另外存在p28的中文ssid无法连接的情况，这个发现p28使用的是gbk编码，手机支持显示他的中文。

这个板子上的灯是折腾，有些板子的灯是错的，不同的板子灯gpio不同。
cd /sys/class/leds
# disable everything
echo none > ap123\:green\:lan/trigger
echo none > ap123\:blue\:wan/trigger
echo none > ap123\:green\:wan/trigger
echo none > ap123\:red\:wan/trigger
# then do tests
echo default-on > ap123\:blue\:wan/trigger
echo none > ap123\:blue\:wan/trigger
echo default-on > ap123\:green\:wan/trigger
echo none > ap123\:green\:wan/trigger
echo default-on > ap123\:red\:wan/trigger
echo none > ap123\:red\:wan/trigger

领佳板子刷个topap的程序吧
setenv ipaddr 10.8.0.33 && setenv serverip 10.8.0.100
tftpboot 0x80060000 vmlinux_ap123.lzma.uImage&&erase 0x9f6e0000 +$filesize&&cp.b $fileaddr 0x9f6e0000 $filesize
tftpboot 0x80060000 tozedap-cp_ap123-jffs2 && erase 0x9f010000 +0x6d0000&&cp.b $fileaddr 0x9f010000 $filesize
bootm 0x9f6e0000

6.12
张勇
cfg -t 确实存在问题，有读不到的情况。

周湘理
要开始9x07的tr069, 要求有7000多行，可能需要1000多个参数。当然存在可选项。菲律宾当前做了300多个。

李柱栋
新的slic已经调通，但是由于在驱动部分和原来的slic行为不同，这个slic必须发空，所以不能兼容，准备先用一种方式读id，如果读不到，就使用另外一种方式。


6.11
去掉：UMAC_SUPPORT_WNM
-rw-rw-r--    1 1000     normal       18112 Jun 11  2017 adf.ko
-rw-rw-r--    1 1000     normal       47120 Jun 11  2017 ag71xx.ko
-rw-rw-r--    1 1000     normal       10228 Jun 11  2017 asf.ko
-rw-rw-r--    1 1000     normal      305940 Jun 11  2017 ath_dev.ko
-rw-rw-r--    1 1000     normal       64260 Mar 20  2017 ath_dfs.ko
-rw-rw-r--    1 1000     normal      732800 Jun 11  2017 ath_hal.ko
-rw-rw-r--    1 1000     normal       20988 Jun 11  2017 ath_pktlog.ko
-rw-rw-r--    1 1000     normal       38948 Jun 11  2017 ath_rate_atheros.ko
-rw-rw-r--    1 1000     normal       36680 Mar 20  2017 ath_spectral.ko
-rw-rw-r--    1 1000     normal       13100 Jun 11  2017 hst_tx99.ko
-rw-rw-r--    1 1000     normal     1094860 Jun 11  2017 umac.ko

sar的用法：
整体CPU使用统计(-u)   sar -u 1 2cd
各个CPU使用统计(-P)   sar -P ALL 1 1
内存使用情况统计(-r)   sar -r  1 2
整体I/O情况(-b)       sar -b 1 2
各个I/O设备情况(-d)    sar -d -p 1 1
网络统计(-n)          sar -n DEV 1 1
http://www.cnblogs.com/bangerlee/articles/2545747.html

6.9
为什么新的程序会变成这样？
Jan  1 08:09:29 (none) daemon.err pppd[9812]: Can't create lock file /var/lock/LCK..ttyUSB3: No such file or directory

工业路由器中一开始就加载了所有的ko，貌似这样内存占用就太大了。

梁剑
脚本中使用了大量的cfg -e 来取参数，应该直接使用参数。

kate这个文本编辑器，198.4mb when installed，好像超大的样子。
ubuntu带的居然是4.x,而官网上已经到了16了，貌似也不是那么好用的样子，算了，还是用这个subline text吧。

李柱栋
认为没有必要去
认为支持验证是所有acs服务器必须遵循的标准。不过maik貌似对他这样搬标准的行为有些不满：
It supports both but globe production does not use unauthenticated http, so regardless, your device must support unauthenticated http
Every other device does and your last firmware did as well
So.... ? Let's please not push standard papers onto each other?

吴曦
开始进行版本合并操作，有些不敢动手

郑达
repeator 直接使用静态网页，也会出现错码。
有时候这些错误又非常非常难出现。wep不管，那么就只有dns劫持后出现的问题。也许使用wifi连接后出现的登录页面也是个不错的选择。

王伍
把周连鹏的机器用nmap扫描一下。
认为领佳已经知道了那个板子后面的黄绿灯已经修改。
有板子还是会重启。

屈峥嵘
不知道那个板子已经改了gpio。

何文秋
把那些js优化了一下，减少到几百k，那个晚显示的问题没有明显的改善。

6.8
汪光华
gre配置已经可以手工ping到pc了。

吴曦 7520
1 wifi 校准工具，如果使用信可提供的工具，需要升级两次。
2 升级cp
3 陈良提出的短信修改
4 改logo
5 配置问题
6 监控网络的容错程序，reboot需要重启cp侧
7 挂测

梁剑
升级第一次，一定不能读到cfg的参数，后面随机读不到参数。

set bootargs "root=/dev/nfs rw nfsroot=192.168.0.50:/opt/work/ath9.5/rootfs-tozedap-router_4g_industry_ap123.optbuild,nolock  init=/sbin/init noinitrd ip=192.168.0.1:192.168.0.50:192.168.0.1:255.255.255.0::eth0::off console=ttyS0,115200 machtype=DB120"

set bootargs "root=nfs nfsroot=192.168.0.50:/opt/work/ath9.5/rootfs-tozedap-router_4g_industry_ap123.optbuild,nolock   ip=192.168.0.1:192.168.0.50:192.168.0.1:255.255.255.0::eth0:off console=ttyS0,115200 machtype=DB120"

set bootargs "root=nfs nfsroot=192.168.0.50:/opt/work/ath9.5/rootfs-tozedap-router_4g_industry_ap123.optbuild,nolock   ip=dhcp::eth0:off console=ttyS0,115200 machtype=TZ-9341"

setenv bootargs board=AP143 console=ttyS0,115200 nfsroot=192.168.0.10:/tftpboot/rootfs rw ip=192.168.0.99:192.168.0.10:196.168.0.1:255.255.255.0::eth1:off
解释：

    board=AP143，板子类型最好设对，不然kernel可能启动失败；
    nfsroot=192.168.0.10:/tftpboot/rootfs，就是tftp server ip: + rootfs路径，解压xxx-rootfs.tar.gz出来的；
    rw设置可读可写权限；
    ip=板子IP: tftp server ip :网关ip(都在同一网段，网关ip随意填写):掩码：板子eth接口；（这里使用的是静态IP，如果想设置成dhcp，需要在make kernel_menuconfig中，在Networking support里，打开IP: kernel level autoconfiguration的dhcp支持）

set bootargs "console=ttyS0,115200 root=31:01 rootfstype=squanshfs ro init=/sbin/init mtdparts=spi0.0:64k(u-boot),6848k(rootfs),1152k(uImage),64k(mib0),64k(ART) machtype=DB120"

Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 5184      5184         0 100% /

6.7
何文秋
使用js控制的按键，会在页面出来1-2秒才会出现。

当前工业路由器的内核还是有些大：
-rw-rw-r-- 1 jian jian  1034294  6月  6 18:02 vmlinux_routing.lzma.uImage
去掉乱七八糟的板子的支持：
-rw-rw-r-- 1 jian jian  1019593  6月  7 14:17 vmlinux_ap123.lzma.uImage

6.6
为什么每次都会重启：
4g disconnect reboot

菲律宾功能测试第一次反馈

1.logo修改，具体由陈良提供
2.支持3G，shpa+显示为4G，LTE还是显示为LTE
3.internet 设置按钮没有下划线，与其他不一样
4.快速设置与短信之间添加“device setting”
5.主菜单中的导航菜单列表，需要在每个子菜单可见可选
6.connected devices 下添加帮助信息，告知wifi的operation功能如何使用
7.短信，发送短信多号码时不要分开存储，列表显示时多号码都要显示出来
8.流量统计：
  关闭流量统计功能时清除已使用流量;
  禁止编辑，只能打开或者关闭;（陈良确认一下是不是只是用户禁止编辑）
  单位与数字之间加个空格
9.一键自检的运行时间显示格式不对
10.网页上有实时参数的，需要实时刷新
11.apn做两套参数，不让编辑，仅能勾选测试或默认。（具体默认参数由陈良提供）


空闲时：
CPU:  0.8% usr  5.0% sys  0.0% nic 93.3% idle  0.0% io  0.0% irq  0.8% sirq
Mem: 22504K used, 18008K free, 0K shrd, 0K buff, 3736K cached

使用sweetspot
Mem: 22444K used, 18068K free, 0K shrd, 0K buff, 3736K cached
CPU:  0.2% usr 36.8% sys  0.0% nic 46.5% idle  0.0% io  0.0% irq 16.3% sirq
Load average: 8.42 7.39 4.31 1/137 1651
  PID  PPID USER     STAT   VSZ %VSZ CPU %CPU COMMAND
  598     2 admin    DW       0  0.0   0 24.4 [sdio_thread0/mm]
 1109     2 admin    DW       0  0.0   0 14.6 [ksdioirqd/mmc0]
  614     2 admin    DW       0  0.0   0 11.8 [rtw_rx/wlan0]

iperf
Mem: 23128K used, 17384K free, 0K shrd, 0K buff, 4044K cached
CPU:  0.6% usr 45.5% sys  0.0% nic 40.2% idle  0.0% io  0.0% irq 13.5% sirq
Load average: 8.36 8.01 5.70 1/142 1663
  PID  PPID USER     STAT   VSZ %VSZ CPU %CPU COMMAND
  598     2 admin    DW       0  0.0   0 29.1 [sdio_thread0/mm]
 1109     2 admin    SW       0  0.0   0  9.1 [ksdioirqd/mmc0]
  614     2 admin    DW       0  0.0   0  7.9 [rtw_rx/wlan0]



192.168.1.154 c盘满了。
把 ErrorLog scss10 转移到F盘
c.inetpub.logs.LogFiles.W3SVC3里面的文件超级大，移动到F盘。

6.5
华润的招标的技术部分，任银善做了备注，请查看:
路由器_设备应用标准
指标类别	指标名称	指标说明	应用场景	是否核心指标	是否必须满足项	备注	说明
硬件要求	产品类型	企业级路由器（支持4G，可直接插卡）	门店、DC内外网连接	是	是	适用于大超门店、DC、小业态门店内外网连接
	内存	容量：16-512MB	门店、DC内外网连接	是	是
		FLASH:16-512MB	门店、DC内外网连接	是	是	必填项
	线速转发能力	转发性能：350-550Kpps	门店、DC内外网连接	是	是	必填项
		带业务转发性能：150Mbps	门店、DC内外网连接	是	是
	固定WAN端口	2*GE(其中1个GE由以太网交换端口提供)	门店、DC内外网连接	是	是	必填项
	固定以太网交换端口	4*GE	门店、DC内外网连接	是	是
	内置LTE	FDD LTE	A4文件打印	是	是	必填项
	USB2.0端口	1个	A3文件打印	是	是
	串行辅助/控制台端口	1个
	串行辅助/控制台端口	1个
软件要求	基础功能	DHCP server/client/relay，PPPoE server/client，PPPoA server/client，PPPoEoA server/client，NAT，子接口管理	门店、DC内外网连接	是	是		PPPoE无server,PPPoA无server，无子接口管理
	无线局域网(AP)	AP设备管理（VAP管理），WLAN QoS（WMM），WLAN安全（WEP/WPA/WPA2/密钥管理），WLAN射频管理（802.11 b/g/n），WLAN用户管理(AP功能仅W无线款型支持)	门店、DC内外网连接	是	是		无用户管理，只能查看
	无线局域网(AC)	AP设备管理(AC发现/AP接入/AP管理)，CAPWAP协议, WLAN用户管理，WLAN射频管理（802.11 b/g/n），WLAN QoS（WMM），WLAN安全（WEP/WPA/WPA2/密钥管理）	门店、DC内外网连接	是	是	必填项	AC先只有派联的平台，无WLAN Qos（WMM），WLAN安全（WEP/WPA/WPA2）
	局域网功能	IEEE 802.1P，IEEE 802.1Q，IEEE 802.3，VLAN管理，MAC管理，MSTP等	门店、DC内外网连接	是	是	必填项	无IEEE 802.1P，IEEE 802.1Q，IEEE 802.3，VLAN管理，MSTP等
	IPv4单播路由	路由策略，静态路由，RIP，OSPF，IS-IS，BGP	门店、DC内外网连接	是	是	必填项
	IPv6基本功能	IPv6 ND，IPv6 PMTU，IPv6 FIB，IPv6 ACL	门店、DC内外网连接	是	是	必填项	？
	IPv6隧道技术	手工隧道，自动隧道，GRE隧道，6to4，ISATAP	门店、DC内外网连接	是	是	必填项	？
	IPv6单播路由	路由策略，静态路由，RIPng，OSPFv3，IS-ISv6，BGP4+	门店、DC内外网连接	是	是	必填项	？
	组播功能	IGMP version1/2/3，PIM SM，PIM DM，MSDP	门店、DC内外网连接	是	是	必填项	无
	QoS	Diffserv模式，优先级映射，流量监管（CAR），流量整形，拥塞避免（基于IP优先级/DSCP WRED），拥塞管理（LAN接口：SP/WRR/SP+WRR；WAN接口：PQ/CBWFQ），MQC（流分类，流行为，流策略），端口三级调度和三级整形（Hierarchical QoS），智能应用控制（SAC	门店、DC内外网连接	是	是	必填项	无
	安全	ACL，防火墙，802.1x认证，AAA认证，RADIUS认证，HWTACACS认证，广播风暴抑制，ARP安全，ICMP反攻击，URPF，CPCAR，黑名单，攻击源追踪，PKI	门店、DC内外网连接	是	是	必填项	无
	管理维护	升级管理，设备管理，Web网管，GTL，SNMP（v1/v2c/v3），RMON，NTP，CWMP，Auto-Config，U盘开局，NetConf，命令行	门店、DC内外网连接	是	是	必填项	无GTL，RMON，Auto-Config，NetConf，U盘开局
	VPN	PSec VPN，GRE VPN，DSVPN，SSL VPN，L2TP VPN	门店、DC内外网连接	是	是	必填项	无DSVPN，SSL VPN
功率及保修信息	电源及功率	电源：100-240V	门店、DC内外网连接	是	是	选填项
		支持最大功率：24W	门店、DC内外网连接
	环境参数	工作温度：0-45℃，工作湿度：5-95%	门店、DC内外网连接
	售后	一年标准维保	门店、DC内外网连接	是	是



~ # cat /proc/meminfo
MemTotal:          40512 kB
MemFree:           15976 kB
Buffers:               0 kB
Cached:             5876 kB

[New process 9776]
#0  0x004041c0 in main (argc=3, argv=0x7fedcbf4) at main.c:546
warning: Source file is more recent than executable.
546				if(ids_module->idVendor==modules_info_summary[i]->module_serial.idVendor &&

[ 2055.170000] rc.check_reboot invoked oom-killer: gfp_mask=0xd0, order=1, oom_adj=0, oom_score_adj=0
[ 2055.180000] Call Trace:[<80077f88>] 0x80077f88
[ 2055.190000] [<802b0b98>] 0x802b0b98
[ 2055.190000] [<802b0b98>] 0x802b0b98
[ 2055.190000] [<800c09cc>] 0x800c09cc
[ 2055.200000] [<800ccbc4>] 0x800ccbc4
[ 2055.200000] [<800c0ddc>] 0x800c0ddc
[ 2055.210000] [<800c0d28>] 0x800c0d28
[ 2055.210000] [<800c129c>] 0x800c129c
[ 2055.210000] [<800c4be4>] 0x800c4be4
[ 2055.220000] [<80075740>] 0x80075740
[ 2055.220000] [<800ef1ec>] 0x800ef1ec
[ 2055.220000] [<80101d90>] 0x80101d90
[ 2055.230000] [<8007642c>] 0x8007642c
[ 2055.230000] [<800f5a04>] 0x800f5a04
[ 2055.230000] [<800f5f18>] 0x800f5f18
[ 2055.240000] [<80068fac>] 0x80068fac
[ 2055.240000] [<8006c6a4>] 0x8006c6a4
[ 2055.250000]
[ 2055.250000] Mem-Info:
[ 2055.250000] Normal per-cpu:
[ 2055.250000] CPU    0: hi:   18, btch:   3 usd:   1
[ 2055.260000] active_anon:560 inactive_anon:1 isolated_anon:0
[ 2055.260000]  active_file:10 inactive_file:11 isolated_file:0
[ 2055.260000]  unevictable:8129 dirty:0 writeback:0 unstable:0
[ 2055.260000]  free:1082 slab_reclaimable:236 slab_unreclaimable:2809
[ 2055.260000]  mapped:2 shmem:1 pagetables:77 bounce:0
[ 2055.290000] Normal free:4328kB min:1016kB low:1268kB high:1524kB active_anon:2240kB inactive_anon:4kB active_file:40kB inactive_fils
[ 2055.330000] lowmem_reserve[]: 0 0
[ 2055.330000] Normal: 954*4kB 58*8kB 3*16kB 0*32kB 0*64kB 0*128kB 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096kB = 4328kB
[ 2055.340000] 8151 total pagecache pages
[ 2055.350000] 0 pages in swap cache
[ 2055.350000] Swap cache stats: add 0, delete 0, find 0/0
[ 2055.360000] Free swap  = 0kB
[ 2055.360000] Total swap = 0kB
[ 2055.370000] 16384 pages RAM
[ 2055.370000] 1012 pages reserved
[ 2055.370000] 26 pages shared
[ 2055.370000] 14176 pages non-shared
[ 2055.380000] [ pid ]   uid  tgid total_vm      rss cpu oom_adj oom_score_adj name
[ 2055.390000] [ 1447]     0  1447      289       22   0       0             0 macwriter
[ 2055.390000] [ 1452]     0  1452      216       10   0       0             0 httpd
[ 2055.400000] [ 2260] 65534  2260      261       21   0       0             0 dnsmasq
[ 2055.410000] [ 2324]     0  2324      370       20   0       0             0 hostapd
[ 2055.420000] [ 2325]     0  2325      524      120   0       0             0 autoset_channel
[ 2055.430000] [ 2326]     0  2326      296       16   0       0             0 tzupdate
[ 2055.430000] [ 2370]     0  2370      217       11   0       0             0 syslogd
[ 2055.440000] [ 2480]     0  2480      217       12   0       0             0 logread
[ 2055.450000] [ 2822]     0  2822      218       12   0       0             0 dialtool_d
[ 2055.460000] [ 2823]     0  2823      279       21   0       0             0 flowstat
[ 2055.470000] [ 2824]     0  2824      218       13   0       0             0 rc.check_reboot
[ 2055.480000] [ 2835]     0  2835      277       19   0       0             0 ntpsupplicant
[ 2055.480000] [ 2837]     0  2837      523      118   0       0             0 autoset_channel
[ 2055.490000] [ 2845]     0  2845      235       34   0       0             0 system_moniter
[ 2055.500000] [ 3126]     0  3126      267       12   0       0             0 tzresetd
[ 2055.510000] [ 3127]     0  3127      218       13   0       0             0 rc.check_nat_is
[ 2055.520000] [ 3151]     0  3151      217       11   0       0             0 telnetd
[ 2055.530000] [ 3945]     0  3945      222       20   0       0             0 sh
[ 2055.530000] [ 6242]     0  6242      217       11   0       0             0 getty
[ 2055.540000] [ 1526]     0  1526      220       15   0       0             0 sh
[ 2055.550000] [ 3135]     0  3135      220       15   0       0             0 vi
[ 2055.560000] [16926]     0 16926      216       10   0       0             0 sleep
[ 2055.570000] Out of memory: Kill process 1447 (macwriter) score 1 or sacrifice child
[ 2055.570000] Killed process 1447 (macwriter) total-vm:1156kB, anon-rss:88kB, file-rss:0kB

占永平
菲律宾p21，有时会出现中英文选择的选项出来。

廖媛：
2017年6月5日  P21 会议记录 ------尼日利亚
待解决问题 :
1. Key 测试，确认生产工具 ，并且给到生产。
2.内部搭建VOIP 服务器。
3.WIFI 掉线原因分析。
4. 出最后一版本“ 生产程序 ” 给客户测试。
5.TRO69 远程升级：请姚协调同事安排本地远程测试，同时我会再次跟客户确认 "ZIP “文件 是否可行 。

最近发现越来越多的office里过多的在上班时间滥用视频网站，可能是由于脑残会的影响，但必竟是上班时间，不应该做与工作无关的事，也过多地影响了office的工作带宽。我在路由上测试了一条规则来block视频网站的访问请求，发现非常有效：
iptables -A FORWARD  -m string –-string “ku6.com” --algo bm -j DROP
iptables -A FORWARD  -m string –-string “tudou.com” –-algo bm -j DROP
iptables -A FORWARD  -m string –-string “ouou.com” –-algo bm -j DROP
http://blog.sina.com.cn/s/blog_690b92530100zggp.html

6.2
p25 测试 占永平
ID	缺陷名	现象	修复状态	备注
P25	版本:v15	配置版本：P25_1.17	模块	信可
1	导入功能不可用	将备份好的防火钱文件加载进去，直接返回失败	未修复
2	在网络工具长时间pnig，仍会出现超时	在网络工具中ping外网，一直ping下去，十五分钟后仍会显示超时	未修复
3	网络工具中的trace无法使用	URL中输入“www.baidu.com”,端口为“1-65535”或者80，网页 上没有显示路由信息	未修复
4	网络工具中抓包功能用不了		未修复
5	APN设置手动下无法编辑		未修复	这个不确定是不是bug,不知道实际的实现方式
6	PIN无法开启	输入当前PIN码，网页上一直返回失败的提示	未修复
7	PIN码设置为disable下仍可以输入	开始在默认下输入会有禁止输入提示，点击PIN码开启，再关闭，就一直没有禁止输入的提示	未修复
8	流量到达阈值后，页面提示是否断开网络，点击确定，页面返回失败		未修复


只编译squashfs_build貌似修改的文件没有合并到squashfs中去。

killall  sh
killall dialtool_new
rm /tmp/.dialtool_indicator
cd /tmp
tftp -g 10.8.0.100 -l dialtool_new
chmod +x dialtool_new
./dialtool_new -s /tmp/dialtool_config &

sim卡的pin相关指令，好久了。
1.AT+CLCK="SC",1,"1234"		使用SIM卡锁功能,密码为为上次设置的(或初始密码),或者使用CPWD更改后的密码
2.AT+CLCK="SC",2				查询SIM卡锁功能
3.AT+CLCK="SC",0,"1234"		关闭SIM卡锁功能
4.AT+CPWD="SC","1234","4321"	修改PIN码
5.AT+CPIN?					查询PIN码的状态,是否需要输入PIN码
6.AT+CPIN="1234"				输入PIN码
7.AT+CPIN="88139522","1234"	输入PUK码和新的PIN码

6.1
郑达
那个写了mac后ssid无法搜索的问题，是不但要写wifi的地址，还要写wan,lan等地址，还要按照规则写。

还有若干个端口是开放的。
nmap 192.168.254.254 -v -A -p1-65535
Scanning 192.168.254.254 [65535 ports]
Discovered open port 80/tcp on 192.168.254.254
Discovered open port 53/tcp on 192.168.254.254
Discovered open port 10020/tcp on 192.168.254.254
Discovered open port 4719/tcp on 192.168.254.254
Discovered open port 3535/tcp on 192.168.254.254
Discovered open port 10005/tcp on 192.168.254.254

netstat -lnp
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 127.0.0.1:5037          0.0.0.0:*               LISTEN      1491/adbd
tcp        0      0 0.0.0.0:3535            0.0.0.0:*               LISTEN      1500/chkSvr
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      1486/goahead
tcp        0      0 0.0.0.0:10005           0.0.0.0:*               LISTEN      1445/zte_tools_agen
tcp        0      0 0.0.0.0:53              0.0.0.0:*               LISTEN      1239/dnsmasq
tcp        6      0 192.168.254.254:10020   0.0.0.0:*               LISTEN      1448/pc_server
tcp        0      0 :::4719                 :::*                    LISTEN      1515/telnetd
tcp        0      0 :::53                   :::*                    LISTEN      1239/dnsmasq
udp        0      0 0.0.0.0:53              0.0.0.0:*                           1239/dnsmasq
udp        0      0 :::53                   :::*                                1239/dnsmasq
Active UNIX domain sockets (only servers)
Proto RefCnt Flags       Type       State         I-Node PID/Program name    Path
unix  2      [ ACC ]     STREAM     LISTENING       1514 1491/adbd           @jdwp-control

goahead，有网页连接，那么有非常多的TIME_WAIT存在。

我这里网卡不能自动起来的事情，应该是：
linux_plat/base/linux/lib/zte_libs/libnetapi这个so里面的MSG_NET_PLUGIN消息，变成了MSG_STATIC_DHCP这个消息。

苑德强
要p21的root密码。以后的程序要默认关闭telnetd

吴曦
1 信可说，可以关闭trap模式，碰到问题直接重启。
2 nv 坏掉， 反复重启不能上网的，需要在信可模拟出来
3 未来几天将在信可上班，一起工作。

每次上传github都要输入用户名密码么？

5.31
王伍：
张勇 3号要把程序发出去。还有在电信2g的情况下信号显示不正常，可能是解析方式不对。
电源已经给夏荣平，去路测。
姚国梁：陈良测的锁频有问题，要使用屏蔽房不断开门关门来测试。

更换内核，还是可以自动把eth0起来的。

比较一下，我编译的系统在这几个程序大小和汪光华的不一样：
unzip
zte_fota_reco
zte_topsw_dmapp
dhcp6c
这些和网卡有什么不同呢？

这个地址还能用，还是用起来吧，多一个备份的地方。
https://github.com/netjianl/work-doc.git

升级到汪光华编译的程序就可以自动把eth0起来，奇怪的事情，从脚本来看是没有什么区别的，但是有些程序的大小不一样。但是二进制也看不出来啊。原来是没有加上执行权限。

梁剑
ath0总是被设置到桥中，奇怪的现象。

廖媛
抱怨白俊剑ip passthrogh出的太慢了。

白俊剑
ippassthrogh只剩下默认网关没有设置了。

刘凯内蒙办
问网管服务器变得很慢了。

吴曦
问明天去信可的情况，当前主要的问题是搜网锁band，下at有时候正常，有时候不正常。
还有就是校准区被冲掉的情况了。

吴开利
问内蒙联通和湖北联通的模块是否一样，我印象中是不同的。

我这里编译的程序以太网默认就没有启动。奇怪的事情。

郑达
中继器网页升级是可以的。
现在问题还有有一个ap无法连接，但是其他的手机，我的9341的cpe是可以连这个ap的。
还有一个ap，是魏启婷的，无法搜索到它。
riltek说无法做的检查一个天线能否联通。
还修改了原有的自动信道，是处于自动信道时无法搜索到repeator的ssid，改成了即使在client情况下也设置固定信道，而这个固定信道是在搜索的设置设置的。但这样对那些20/40的ap就有问题。
现在修正了自动信道的问题，但是那个无法连接的ap还是无法连接。

使用这个5.15版本似乎也是正常的，那么这个问题可以采用2分法去查了。
汪光华找了一遍，是b3bb6246ee39e81ac97e3d74a5387851cd75a393这个提交，那么认为是赵刚没有判断(wp->path)是否为空造成的。

赵金的生产工具又很久没有上传了。

5.27
吴曦
1 wep加密选择非第一组秘钥错误，建议只有一组给用户输入。
2 锁band ，已手工验证，无异常，继续加入到程序中
3 生产工具 imei, mac 灯，按键， wifi信号
  出现冲掉校准区的问题，严重问题。
4 网络选择，需要关闭数据再设置，可以在后台这样执行， 不行重启。
5 进入trap状态 信可未解决
6 有一次nv所在的cfg文件不能访问，导致系统工作不正常，继续复现
7 有一次上网显示正常，但无数据，使用cfun=0,cfun=1解决。后续增加监控程序。
8 wifi 校准工具 信可未提供
9 watchdog 信可未解决
10 使用nmap -v -A 192.168.254.254会导致goahead挂掉，继续查找原因
11 安全问题，还有一个，继续修改。

郑达
去连接派联的Scorpius无线，显示的是wpa2，但它页面设置的是wpa，不能连接。

张勇
不能恢复出厂是由于wlan10中的cfg程序没有做他原来的修改。
史辉发现电信卡有个状态显示的问题。

现在NET_ZX29_GMAC_SWITCH这个选项在内核中被删除了，即使加上，会出现sw0，但是ping没有作用。

这样来删除地址：
sudo ip addr del 192.168.254.50/32 dev eth0

使用 nmap -v -A 192.168.254.254这样的指令，在
tz_version:P25_1.09
tz_real_version:P25_1.09
tz_build_time:2017-05-18_16:05
tz_build_by:wgh@wgh-ThinkPad-E550
tz_branch:master
tz_sha1:1f9dd5d71b3198dc7bf07a1a40cd3fd3bbd1698b
tz_commit_by: hewq/2017-05-18 15:56:00 +0800
tz_commita:prefect traffic alarm page
这个版本上貌似是正常的。

5.26
魏启婷
测试一个p11，出现断网后无法再次上网的情况，

梁剑
问无线有没有拨号这样的概念。

汪光华
中兴7520低成本cpe方面写生成工具碰到了一些奇怪的问题，其中一个问题是由于参数变量名和吴曦原来的变量名一样，导致奇怪的行为。另外的估计和写mac, imei一起进行时，中兴底层的保护没有做好，会出现校准区不正常的情况。估计后面只写imei，mac等自己处理。

貌似在ath9.5中的cpe-df的apup中还没有对extap的支持。
        if [ "${EXTAP}" = "on" ]; then
            iwpriv ath0 extap 1
        fi

以前的文档貌似有错误，1860的要这样设置
WANIP=`ifconfig lmi40 | grep inet | busybox cut -d : -f 2 | busybox cut -d ' ' -f 1`
echo $WANIP
ifconfig lmi40 0.0.0.0 up
busybox route add -host $WANIP dev br0
busybox route add default dev lmi40
echo "1" > /proc/sys/net/ipv4/conf/lmi40/proxy_arp
echo "1" > /proc/sys/net/ipv4/conf/br0/proxy_arp
iptables -F -t nat
iptables -t nat -I POSTROUTING -s 192.168.1.1/255.255.255.0 -o lmi40 -j SNAT --to-source $WANIP

pc这样设置，要删掉那个masq的规则，现在有个容错的程序，要砍掉。
ip  10.42.39.122
netmask  255.255.255.255
dns 221.179.38.7 120.192.165.7

可以这样设置是可以的
ip  192.168.0.100
netmask  255.255.255.255
dns 221.179.38.7 120.192.165.7

汪光华
对makefile, 编译中-l的使用还不了解。

王伍
还有加强web的人手

5.25
领佳 屈工
来拿走了一个刷过uboot的板子。

郑达
突然，中继器的软件不能申请内存了，只有编译到10几号向杰增加的大量网页前才不报错，这样，基本不能使用了。

李金龙
问了一下各个项目的情况，说将在自助，工业路由器， ict上加大力量。ict主要是wifi覆盖。今年过关，不亏本，信心能够提示一个层次，下决心重启上市。

这个sublime打开有些文本文件，里面的双字节的符号似乎总是乱码。

郑达 赵金
问中继器是否所以的命令从串口出。

姚国梁
那个不读卡的p11，通过加上拉电阻解决的。

王凯
有一台cpe显示wifi 未启动，重新升级无效。可能要试试换校准区了。

5.24
王伍
居然没有和李总提加工资的事情。

算下来工业路由器p53的剩余空间只有1m了。
梁剑已经完成了工业路由器中的gre, l2tp, pptp。


吴开利
问研发是否给出正在开发的产品的简单说明。

王伍
cat-m，在华为测试通过后就要在其他地方使用了。

吴曦
昨天的trap后，抓包后认为是goahead进程造成的。

占永平
p21的ip passthrough，使用联芯的模块可以，宽翼的不行。

孙先锋 内蒙工程
在网管平台增加设备后，点击获取参数不能得到数据。保存后，都是红色。但是点击其ip，能够看到设备的网页。
后来说知道问题了，也不知道是什么问题。

5.23
setenv ipaddr 10.8.0.33 && setenv serverip 10.8.0.100
tftpboot 0x80060000 uboot.1 && erase 0x9f000000 +0x20000&&cp.b $fileaddr 0x9f000000 $filesize
u-boot> md 18050000

喻潇
派联的要把平台的使用培训一下。

苗立双
1 赞比亚iperf，
  1761 会自动重启，安徽出现过，胡媛媛在现场，刘云处理
2 阿根廷 三旗模块
  加ssh，原来加过。
  锁物理小区 刘云处理
3 四川联通标书

5.22
换w10这个板子来吧：
setenv ipaddr 10.8.0.33 && setenv serverip 10.8.0.100
tftpboot 0x80060000 uboot.bin.topap && erase 0x9f000000 +0x20000&&cp.b $fileaddr 0x9f000000 $filesize
tftpboot 0x80060000 vmlinux_ap123.lzma.uImage&&erase 0x9f6e0000 +$filesize&&cp.b $fileaddr 0x9f6e0000 $filesize
tftpboot 0x80060000 tozedap-cp_ap123-jffs2 && erase 0x9f010000 +0x6d0000&&cp.b $fileaddr 0x9f010000 $filesize

第12次
Booting image from 0x9F020000...

   Image name:    MIPS OpenWrt Linux-3.18.36
   Build date:    2016-09-28 16:05:46 UTC
   Architecture:  MIPS
   OS/image type: Linux Kernel
   Compression:   LZMA
   Data size:     1003.8 kB (1027913 bytes)
   Load address:  0x80060000
   Entry point:   0x80060000

   Header CRC...  OK!
   Data CRC...    skipped

Stopping network... OK!
Uncompressing Kernel... ERROR
## Error: LZMA error '1'!

第22次
[    1.980000] SQUASHFS error: xz decompression failed, data probably corrupt
[    1.990000] SQUASHFS error: squashfs_read_data failed to read block 0x604f6
[    2.030000] SQUASHFS error: xz decompression failed, data probably corrupt
[    2.040000] SQUASHFS error: squashfs_read_data failed to read block 0x604f6
[    2.040000] Kernel panic - not syncing: Attempted to kill init! exitcode=0x0000000a
[    2.040000]
[    2.040000] ---[ end Kernel panic - not syncing: Attempted to kill init! exitcode=0x0000000a
[    2.040000]



# $(1): vendor, board name/model
# $(2): hostname
# $(3): default FLASH size in MB
# $(4): reset button GPIO number
# $(5): 1 if reset button is active low
# $(6): SOC_TYPE
define config_init

lsdk_kernel:
        @$(call define_add,CONFIG_LSDK_KERNEL,1)
#if defined(CONFIG_LSDK_KERNEL)
                "lsdk_kernel=1\0"
#endif

法国佬的uboot似乎加了CONFIG_FOR_TPLINK_WR842N_V3这个类型。也许应该是tp-link_tl-wr842n_v3这个？
setenv ipaddr 10.8.0.33 && setenv serverip 10.8.0.100
tftpboot 0x80060000 u-boot.1 && erase 0x9f000000 +0x20000&&cp.b $fileaddr 0x9f000000 $filesize

setenv bootargs "console=ttyS0,115200 root=31:02 rootfstype=squashfs rw init=/sbin/init mtdparts=mtdparts=ath-nor0:128k(u-boot)ro,1280k(uImage),6656k(rootfs),64k(mib0),64k(ART)"

u-boot> md 18050000
18050000: 00021580 00214000 01308000 00000000    .....!@..0......
18050010: 40010400 C009FFFE 0009F33A 00000014    @..........:....
18050020: 00000000 00000271 00098000 00000101    .......q........
18050030: 000010B3 0A47F028 00004000 0523F828    .....G.(..@..#.(
18050040: 41020CCC 781003E8 0050103C 00000000    A...x....P.<....
18050050: 00000000 00000000 00000000 00000000    ................
18050060: 00000000 00000000 00000000 00000000    ................
18050070: 00000000 00000000 00000000 00000000    ................


uboot> md 18050000
18050000: 00021580 00214000 01308000 00000000    .....!@..0......
18050010: 00000800 C013FFFE 00138000 00000014    ................
18050020: 00000000 00000271 0013BB10 00000101    .......q........
18050030: 000010B3 0A47F028 00004000 0523F828    .....G.(..@..#.(
18050040: 41020CCC 781003E8 0050103C 00000000    A...x....P.<....


第8次：
[    1.250000] Freeing unused kernel memory: 248K (80332000 - 80370000)
[    1.980000] SQUASHFS error: xz decompression failed, data probably corrupt
[    1.990000] SQUASHFS error: squashfs_read_data failed to read block 0x604f6
[    2.030000] SQUASHFS error: xz decompression failed, data probably corrupt
[    2.040000] SQUASHFS error: squashfs_read_data failed to read block 0x604f6
[    2.040000] Kernel panic - not syncing: Attempted to kill init! exitcode=0x0000000a
[    2.040000]
[    2.040000] ---[ end Kernel panic - not syncing: Attempted to kill init! exitcode=0x0000000a
[    2.040000]

第12次 哪里不对的样子，modem没有看到起来。
[    1.990000] init: Console is alive
[    1.990000] init: - watchdog -
[   81.700000] random: nonblocking pool is initialized
[  122.010000] init: - preinit -
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[  126.330000] eth0: link up (100Mbps/Full duplex)
[  127.010000] jffs2: notice: (310) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan.
[  127.020000] mount_root: switching to jffs2 overlay
[  127.100000] eth0: link down
[  127.110000] procd: - early -
[  127.110000] procd: - watchdog -
[  128.090000] procd: - ubus -
[  129.280000] procd: - init -
Please press Enter to activate this console.

第22次：
Booting image from 0x9F020000...

   Image name:    MIPS OpenWrt Linux-3.18.36
   Build date:    2016-09-28 16:05:46 UTC
   Architecture:  MIPS
   OS/image type: Linux Kernel
   Compression:   LZMA
   Data size:     1003.8 kB (1027913 bytes)
   Load address:  0x80060000
   Entry point:   0x80060000

   Header CRC...  OK!
   Data CRC...    skipped

Stopping network... OK!
Uncompressing Kernel... ERROR
## Error: LZMA error '1'!

何文秋
又碰到了速度慢的问题。关闭网页一段时间后，貌似正常了，他前几天还以为是nv导致的，今天又不知道是什么导致的，看的时候不停的有ifconfig wlan0 up的命令出现。从top 命令追源，发现是wlan-sever发出的命令。他现在觉得是不是他折腾了一天，就出现了这个情况。

陶嵩
1860的机器，现在不能不插卡测信号了，原来是可以的。

吴曦
信可的说trap拔电可以恢复，实际上貌似不是这样。或者使用watchdog进行恢复，但watchdog的操作当前是无效的。
1 锁band28后，不能搜网，加上41也不能搜到网。
2 reboot不能重启moden的还没有在init文件中尝试。
3 改风格准备让何文秋来做
4 汪光华还有生产工具和m60的一些东西要做。
 6 ussd还没有进行处理

梁剑
自助那个打印机终于差不多了，它的接口dll必须使用静态加载的方式，而且是接口都是类中的方法。等对方的测试了。
准备做工业路由器的wifi sta模式。

王伍
工业路由器还有emtc，和加入sta模式两个功能。

张勇
工业路由器使用的新的拨号程序，看起来直接用到p11s上还要改若干个脚本之类，貌似不容易直接使用。

喻潇
发邮件说那个p11s的支持电信拨号的程序在公司测试是可以用的，但是在用户那里还是说不行。

姚国梁
意大利的p10p： 今天向杰能改好。
越南多语言：周三开始
其他的事情是尼日利亚的voip还可能要进行程序更新。

张勇 当前工业路由器还需要做的功能：
1 使用ping来测网络，写到watchdog功能中。
2 备份art区，已经完成
3 其他模块的拨号程序， 当前只有bm806，其他的都还没有加。
4 4g参数的修改后的重启去掉了，要测试。测试可以进行的只有开关机和长时间挂机两种。其中开关机cfg -t2换为cfg -t就没有问题了，还有一种拨号程序会退出的情况感觉和保留了原有的拨号程序有关。考虑去掉在进行测试。
5 完善发送at指令的程序
6 入库程序，周湘理应该做完了，需要再看一下。
其他： 系统还有多少空间还要确定，
大连奥远：ssid会出现恢复出厂的情况。
网页发生at指令考虑做出一个控制台来，比网页发送好。
没有做锁机锁卡等功能，暂时可以不处理。

郑达：
中继器搜索ssid时会出现一个for循环变量被改变而中途退出的情况，必然发生在某个中文ssid的情况。
是一个地方会对中文的ssid进行处理，变成0xE9...这样的模式。

占永平
三条电源线发了一个星期了，还没有动静。采购那边说今天才发到。
已经说去买了。

5.19
setenv ipaddr 10.8.0.33 && setenv serverip 10.8.0.100
tftpboot 0x80060000 uboot.bin.lingjia && erase 0x9f000000 +0x20000&&cp.b $fileaddr 0x9f000000 $filesize
这样把老外的uboot写进去看起来正常启动了系统。

启动第三次发现
[    0.600000] libphy: ag71xx_mdio: probed
[    1.190000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.1:00 [uid=004dd042, driver=Generic PHY]
[    1.200000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
[    1.200000] TCP: cubic registered
[    1.210000] NET: Registered protocol family 17
[    1.210000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you n.
[    1.230000] 8021q: 802.1Q VLAN Support v1.8
[    1.240000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    1.250000] Freeing unused kernel memory: 248K (80332000 - 80370000)
[    1.980000] SQUASHFS error: xz decompression failed, data probably corrupt
[    1.990000] SQUASHFS error: squashfs_read_data failed to read block 0x604f6
[    2.030000] SQUASHFS error: xz decompression failed, data probably corrupt
[    2.030000] SQUASHFS error: squashfs_read_data failed to read block 0x604f6
[    2.040000] Kernel panic - not syncing: Attempted to kill init! exitcode=0x0000000a
[    2.040000]
[    2.040000] ---[ end Kernel panic - not syncing: Attempted to kill init! exitcode=0x0000000a
[    2.040000]

重新来的第5次：
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    6.260000] eth0: link up (100Mbps/Full duplex)
[    7.170000] jffs2: notice: (327) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan.
[    7.190000] mount_root: switching to jffs2 overlay
[    7.220000] eth0: link down
[   11.300000] usb 1-1.4: new high-speed USB device number 3 using ehci-platform
然后重启。

第6次：
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    6.260000] eth0: link up (100Mbps/Full duplex)
[    7.170000] jffs2: notice: (327) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan.
[    7.190000] mount_root: switching to jffs2 overlay
[    7.220000] eth0: link down
[   11.300000] usb 1-1.4: new high-speed USB device number 3 using ehci-platform
[   82.560000] random: nonblocking pool is initialized
好像也不动了，拔电继续。

第14次：
[    0.000000] NR_IRQS:51
[    0.000000] Clocks: CPU:550.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Calibrating delay loop... 274.02 BogoMIPS (lpj=1370112)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
停止了，拔电继续。

第16次：
[    0.000000] Calibrating delay loop... 274.02 BogoMIPS (lpj=1370112)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
停止了，拔电继续。好像和上一次一样。





看起来换了那个uboot，跑了一个晚上，另外一台机器，连续拔插，也都正常启动了。

何文秋：
他的板子插了卡后，看起来也跑到了那个trap状态去了。

郑达：
在dns劫持中，手机发送了大量的dns请求，造成需要50秒手机才能自动转到中继器的界面。

5.18
苗立双
在9341原来的系统中echo 3 > /proc/sys/vm/drop_caches不返回，看代码是被改为使用内核定时器的方式来做了，也没有起到左右，cache一直有30多m

梁剑
在折腾虚拟机

张勇
拨号程序提前，那么就可能出现启动后无响应的情况。

雒晓峰
问关于apn的问题。
上海那个1400台工业路由器的单，是一个代理给人民日报社上海分社，由于党报已经没有没有人看了，所以搞一个大屏，推送新闻或社论用。而这样的自助，安徽也要做，并且可以自助+工业路由器全给我们做，只是已经转了2次手，所以安徽利润会受影响。
上海的报价是535 7模， 5模 505？
在微信上看起来对方还有还价。

金晶
看起来已经说动了郑杏泉，给他来做app。
要在派联的对路由器的app中增加对摄像头的控制。

eddy
要9341的cpuid，貌似没有找到这样的东西。

王伍
折腾给领佳死机的问题

ar7240> md 18050000
18050000: 40021540 40818000 01308000 00000000    @..@@....0......
18050010: 40010400 c009fffe 0009f33a 00000014    @..........:....
18050020: 00000000 00000271 00098000 00000101    .......q........
18050030: 000010b3 0a47f028 00004000 0523f828    .....G.(..@..#.(
18050040: 41020ccc 78100000 00ac0000 00000000    A...x...........

uboot> md 18050000
18050000: 00021580 00214000 01308000 00000000    .....!@..0......
18050010: 00000800 C013FFFE 00138000 00000014    ................
18050020: 00000000 00000271 0013BB10 00000101    .......q........
18050030: 000010B3 0A47F028 00004000 0523F828    .....G.(..@..#.(
18050040: 41020CCC 781003E8 0050103C 00000000    A...x....P.<....

bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ath-nor0:128k(u-boot)ro,1280k(uImage),6656k(rootfs),64k(mib0),64k(ART),7936k@0x20000(firmware),8192k@0x0(all)ro
bootcmd=bootm 0x9F020000

console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ath-nor0:128k(u-boot)ro,1280k(uImage),6656k(rootfs),64k(mib0),64k(ART),7936k@0x20000(firmware),8192k@0x0(all)ro mem=64M rootfstype=squashfs,jffs2 noinitrd

setenv ipaddr 10.8.0.33 && setenv serverip 10.8.0.100
tftp 0x80060000 tuboot.bin && erase 0x9f000000 +0x10000&&cp.b $fileaddr 0x9f000000 $filesize

tftp 0x80060000 uboot.bin.lingjia
go 0x80060000 也是一样挂掉，应该没有成功过的。

汪光华：
来说不愿意去开会，觉得无非是说要努力工作的事情。谈到他弟弟的孩子都已经3岁了，他父母会用一种感觉他对未来有一种焦虑，结婚，买房，小孩。

白俊剑：
tr069的ssl连接功能是自动适应的，给出的地址是http，那么就是普通的，如果是https，那么就是ssl加密的，也分别测试过，所以直接何必就可以了，不需要额外的设置。


5.17
居然一个git checkout 把今天写的无数东西都清空了，那么是不是要重写呢？

吴曦：同学在平安金融， 14k，上班8小时，年终奖50k， 做android
另外一个在做coolb？手机，给国外供货，学妹，10+k， +6个月年终奖。

5.16
看起来9344的主频比9341高一点。
SoC: Atheros AR9341 rev 1
Clocks: CPU:535.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
SoC: Atheros AR9344 rev 2
Clocks: CPU:560.000MHz, DDR:450.000MHz, AHB:225.000MHz, Ref:40.000MHz

编译ath9.5 #cool 3看起来也加sudo apt install squashfs-tools
15:37 和俄罗斯客户交流，他希望下一代工业路由器需要双频wifi， 4个千兆网口。问到了ipv6和slaac这样的问题。

周湘理看起来有点空，让他先处理一下工业路由器的网页。

洛晓峰：问上海的轮船的拨号问题，姚国梁今天请假。认为已经拖了太久。

占永平 p21曾经出现过一次wifi不能连接的情况，当时以太网也是不能得到地址的。所以和刚刚生产的100台p21的情况不一样，说有5台wifi不能起来，但是重新参数初始化之后就可以了。

5.15

梁剑：原来吸顶ap的多ssid网页有错误，加密选项不能生效，如果写好参数，那么加密是正常的。

16:49 貌似最新的vmave player 12.5 可以安装ubunt17了。原来的12.1在头几步那里会报个错误，已经不记得是什么错误了。
居然安装的是32位系统，还需要重新来过。

telnetd -l /bin/sh 这样运行的telnet，就不用密码就进入系统了。
riltek这个wifi有无数的工具，包括了auth, utility, wsc,wireless_tools.25等
auth目录中有auth和iwcontrol， 貌似和scan都没有关系
utility中有flash和webs，貌似和scan也没有关系
wireless_tools.25中有iwlist这个工具，原生的makefile中没有复制进去，复制了scanning第一次运行没有结果，第二次就系统挂起了，从usb连接的电脑上显示了trap状态。
wscd这个工具从命令上来看是给wps使用的。

李柱栋：
http://blog.csdn.net/cnmilan/article/details/38369519
这个网页解决adb shell 报没有权限的问题。

王伍：
要吴曦每周发出需要信可解决的问题。
要工业路由器加快完成vpn等，完成这个项目

汪光华：
上午陈良那边开始出现网页不能出来的情况，发现是realtime_tx_xxxx什么值总是在报错。查看调用的地方，发现sizeof一个指针，那么就只取4个。修改gohead后，暂时没有报网页刷不出来的情况。不过也不对，已经做了保护，当取出来的值长度大于传入的值，那么只会复制相应的字节数出去，不应有错。

陈富军：
修改uboot的难度太大了。

5.12
17:33 曾小星 问湖北联通减成本方案。就是中兴的方案。
17:07 毛浩明 问是否有中继的功能，原来的cpe是有的。他卖掉了200个使用cpe改成ap的小cpe, 现在还有200个的订单意向。
王伍 marval方案：
cat 6 只是在marval和 gct之间选择。
gct： 没有volte，需要买软件，费用在上百万。gct本身还要$2-3万，套片价格也到了$16. 优点是支持cat 5 6 7
marval： 报价$12,可能谈到$10
   但marval这个部门可能被卖掉，而且传言已经和asr谈好了。当前这个部门还有3-400人。
   asr这个公司几年就烧掉了几个亿。
   只支持4*2mimo。
cat 6 : 下行载波聚合
cat 7 : 上下行载波聚合
cat 5: 4*4mimo

5.11
晚上发现网页无法刷出来，开始应该使用那个finder来抓包看看的。

9:48 姚国梁： 查看一下其他的应用，是否也编译了cmdlib但没有修改为so方式。
10:51  python的循环打印
for i in range(1300,1500) : print i

廖媛
尼日利亚 m60
1 bridge 2 ipsec 3 tr069+ssl

叶京平
南非p21 加wan口功能。

5.10
占永平
那张卡在所有其他的机器中都没有出现不读卡的问题。

程洪卫
关于5.20在海贝湾的研发大会，计划早上9：30出发，9点集合，中午左右到，吃饭，下午到晚上自由活动，晚上吃烧烤。21号早上留给李总，下午从1点半到4点留给研发部。
对于新人，要实时关注，合适不合适，及时换。看有没有进取心，有没有成长的愿望。

郑达
repeator 1 https 无法推送 2 带路径的地址无法推送 3 带html后缀的无法推送

朱卫平
工业路由器要求 1：流量报警 2 对ip限速。

赵芳文：
正在改onvif，需要和onvif管理软件相配合。
当前使用的是hi3516cv200这个芯片
要完成：搜索 设置 取视频流 交互 报警 取参数等功能。
预计下周五完成onvif协议交互。

sudo apt-get install libgnomeui-dev
gcc -shared -o libsublime-imfix.so sublime_imfix.c  `pkg-config --libs --cflags gtk+-2.0` -fPIC
LD_PRELOAD=./libsublime-imfix.so subl
終於可以輸入中文了。
http://blog.csdn.net/cywosp/article/details/32350899
还要使用搜狗的输入法，这个输入法为什么输入框总是在屏幕的左下角？

5.9
what? I could not input chinese in sublime text3. how bad.

赵金：
生产工具还有：
p25 1 写imei, mac 2 测试4g信号值， wifi，3 连通性测试 wifi， 4 打流测试 iperf 5 校验 版本imei等 6 升级 配置升级
m60 存在掉校准信息

张勇：
工业路由器还有各种锁运营商之类的没有做。

刘文齐：
sdk的编译难度并不大，一个刚毕业的员工，使用了2周编译运行了一个板子。
刘芳文也用了2周。
使用vlc？视频播放器，windows下的视频播放器，都可以使用输入摄像头ip地址的方式直接播放摄像头的视频。
刘芳文做onvif协议已经是第四周了。

5.8
总是有人不写日志，给王伍发了个消息
通知：4月开始，日志每月少于15篇的，绩效直接在0.8以下，5月开始，由于日志少绩效低的，扣绩效不设豁免期，发放时直接扣除。6月开始，连续3个月日志少于15篇的，降岗降职。
他倒是没有什么意见。颜斌这边硬件基本上没有人写。如果这样发，不知道有没有麻烦。

5.7
ARP daemon support的解释在：
http://linux.chinaunix.net/techdoc/net/2005/03/21/921746.shtml
不过去掉这个功能也只减少了内核3个字节的大小。

nfs:
sudo apt-get install nfs-kernel-server
sudo vi /etc/exports
/opt/work *(rw,sync,no_root_squash,no_subtree_check)
sudo /etc/init.d/rpcbind restart
sudo /etc/init.d/nfs-kernel-server restart
mkdir -p /tmp/1
mount -t nfs 192.168.254.50:/opt/work/ /tmp/1 --nolock

5.3
任银善：
1 按键
2 灯
3 tf 卡
4 usb支持u盘
5 usb->serial
6 uboot   ok
7 16m的flash分区划分：考虑uboot到128k，去掉uboot-env区，内核1.5m，data区1m，art 64k，这样文件系统区能到13m，应该可以满足以后的需要。
8 网页升级修正
9 网页5.8g信息设置，查看
10 usb信息查看
11 校准操作流程

5.2
tftp -g 10.8.0.100 -l ag71xx.ko
rmmod ag71xx
insmod ag71xx.ko
ifconfig eth0 up
brctl addif br0 eth0
brctl addif br0 eth1

余小虎去斯里兰卡的工作：
1 p11s 兰卡贝尔的gre测试跟进工作
2 dialog m60
  a 问题机器的跟进，dialog只发了不到6k的机器，只发了200台左右到客户那里，共有9台出现各种问题。通过查找生产imei号，其中6台机器是前面斯里兰卡电信的尾机。这样的尾机有200台。当前还无法确实是否是尾机造成的。
  b 培训
  c 多ssid和多nat 的验证
  d 外置天线测试
  e 合并moden后的验证
3 dialog p28
  a 测试跟进
  b 外置天线测试
 4 斯里兰卡电信
  a m60 p28  r12三个产品招标
  b 前期m60出货遗留的两个问题：ssid密码显示问题，斯里兰卡电信有提出不能在话机上看到wlan密码，一个是kandy的信号弱。

郑达：
中继器：手机网页，接口已经提供了scan列表，还要提供设置ap信息，ssid， 加密方式等。这样就可以做到所有手机通用了。
还有dns劫持。
其他项目r10:俄罗斯需要，已经编译成功，没有下载尝试。余小虎希望他来做后期的设备支持。
r12: 各地没有反馈需求。

2017-4-27
为什么我的电脑tftp不能默认启动了？
sudo service tftpd-hpa restart

2017-4-25
board=AP147 console=ttyS0,115200 mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),14528k(rootfs),1472k(kernel),64k(art),16000k@0x50000(firmware) rootfstype=squashfs,jffs2 noinitrd crashkernel=10M@20M


2017-4-22
arm编译出来的东西还是比mips要小好多：
jian@jian-OptiPlex-9020:~/work/ath9.5$ ll rootfs-tozedap-cp_ap123.optbuild/bin/update
-rwxrwxr-x 1 jian jian 6540  4月 15 21:59 rootfs-tozedap-cp_ap123.optbuild/bin/update*
jian@jian-OptiPlex-9020:~/work/zte7520_ap$ ll ./linux_plat/base/linux/romfs/bin/update
-rwxrwxr-x 1 jian jian 5048  4月 22 15:53 ./linux_plat/base/linux/romfs/bin/update*
居然能小15k。

2017-4-21
MemFree:            6708 kB MemAvailable:       9356 kB Cached:            10988 kB
MemFree:            7544 kB MemAvailable:       9500 kB Cached:            10144 kB
MemFree:            6640 kB MemAvailable:       8628 kB Cached:            10172 kB
MemFree:            7184 kB MemAvailable:       8948 kB Cached:             9816 kB
MemFree:            7044 kB MemAvailable:       8856 kB Cached:             9844 kB
MemFree:            6996 kB MemAvailable:       8816 kB Cached:             9848 kB
MemFree:            6976 kB MemAvailable:       8796 kB Cached:             9848 kB
MemFree:            7096 kB MemAvailable:       8920 kB Cached:             9856 kB
MemFree:            7084 kB MemAvailable:       8912 kB Cached:             9860 kB
MemFree:            7188 kB MemAvailable:       8956 kB Cached:             9804 kB
MemFree:            7096 kB MemAvailable:       8904 kB Cached:             9828 kB

2017-4-20
中兴中 HOST_NCPU=1 可以指定单cpu编译。

2017-4-19
        src/xlat/gen.sh src/xlat/blkpg_ops.in src/xlat/blkpg_ops.h
        src/xlat/gen.sh src/xlat/bpf_commands.in src/xlat/bpf_commands.h
        src/xlat/gen.sh src/xlat/bpf_map_types.in src/xlat/bpf_map_types.h
        src/xlat/gen.sh src/xlat/bpf_prog_types.in src/xlat/bpf_prog_types.h
        src/xlat/gen.sh src/xlat/bpf_map_update_elem_flags.in src/xlat/bpf_map_update_elem_flags.h
        src/xlat/gen.sh src/xlat/cap_mask0.in src/xlat/cap_mask0.h
        src/xlat/gen.sh src/xlat/cap_mask1.in src/xlat/cap_mask1.h
        src/xlat/gen.sh src/xlat/cap_version.in src/xlat/cap_version.h
        src/xlat/gen.sh src/xlat/clone_flags.in src/xlat/clone_flags.h
        src/xlat/gen.sh src/xlat/advise.in src/xlat/advise.h
        src/xlat/gen.sh src/xlat/at_flags.in src/xlat/at_flags.h
        src/xlat/gen.sh src/xlat/addrfams.in src/xlat/addrfams.h
        src/xlat/gen.sh src/xlat/af_packet_types.in src/xlat/af_packet_types.h
        src/xlat/gen.sh src/xlat/cap.in src/xlat/cap.h
        src/xlat/gen.sh src/xlat/adjtimex_modes.in src/xlat/adjtimex_modes.h
        src/xlat/gen.sh src/xlat/adjtimex_status.in src/xlat/adjtimex_status.h
        src/xlat/gen.sh src/xlat/audit_arch.in src/xlat/audit_arch.h



zte_libs/libnl_2这个目录看起来是完全重新编译了的。          ok
zte_apps/auth/src/dlisten里面也是做了clean操作。              ok
zte_apps/c-ares 								     ok
zte_web_util.c 这些文件警告太多。
/zte_apps/miniupnpd_linux               				     应该没有问题。
zte_apps/netdog/refcode/net_test		                             ok
zte_apps/netpcap                                                                 ok
zte_apps/zte_arp_proxy                                                        ok
zte_apps/zte_fota/zte_topsw_dmapp                                     应该没有问题。
zte_apps/zte_ipv6_addr_conver                                             ok
zte_apps/zte_ipv6_slaac                                                     ok
zte_apps/zte_ndp                                                         ok
zte_apps/zte_router                                                       ok
zte_apps/zte_topsw_qrcode                                        ok

lib的先记录下来：
	if [ -e libnl-2.0/Makefile ] ; then \
		echo libnl-2.0 configure seemed ok; \
	else \
	(cd libnl-2.0 && cp configure.linux configure && CFLAGS="-O2 -g -fomit-frame-pointer -pipe -msoft-float -fno-common -fno-builtin -Wall -DEMBED  -Dlinux -D__linux__ -Dunix " ./configure $(CONFIGURE_OPTS) $(CONFOPTS) --host=arm-linux --build=i686-pc-linux-gnu --target=arm-linux --enable-static --disable-shared ) ;\
	fi

为什么strace编译不了了：
-all: confcode
-       cd ./src && sh ./configure --host=arm-linux $(CONFIGURE_OPTS) $(CONFOPTS)
+all:
+       if [ -e ./src/Makefile ] ; then \
+               echo strace seemed configured.;\
+       else \
+               cd ./src && sh ./configure --host=arm-linux $(CONFIGURE_OPTS) $(CONFOPTS); \
+       fi
        $(MAKE) -C src

 confcode:
        -rm -rf *.o ./.deps

 clean:
-       -rm -rf ./src/strace ./src/*.o ./src/.deps
+       -rm -rf ./src/strace ./src/*.o ./src/.deps
+       -cat .gitignore | xargs rm -rf

4.17
占永平
禅道很难用起来，沟通方面，说的比较少。有些东西不知道是不是bug，主要测试的是p21和p10p

2017-4-16
编译iptables 1.16.1
sudo apt-get install libmnl-dev

在ubuntu16 server上编译工业路由器的程序，编译到iptables的时候报
fatal error: libnfnetlink/libnfnetlink.h: No such file or directory
这样的错误。先留着吧。

我的机器上的tftp server居然不支持-r里面的路径，总是说文件未找到。

umount /fotaupdate
ubirmvol /dev/ubi2 -n 0

ubiattach /dev/ubi_ctrl -m 18
 ubimkvol /dev/ubi2  -s 55000000  -N fota_bui
mount -t ubifs ubi2_0 /fotaupdate/

/fotaupdate/busybox tar xzvf /fotaupdate/rootfs.tgz -C /
tftp -g 192.168.0.50 -l securefs.tgz
mount -o remount w /securefs
tar xzvf securefs.tgz -C /
update ap_cpuap.bin /dev/mtd12

开始只有3m的free内存，执行一下
echo 3 > /proc/sys/vm/drop_caches
就变成20m了。

程洪卫
5.20准备开研发大会， 李总讲企业文化，对研发的希望，要求。
过程： 谁来讲，讲什么，设计理念，怎么做。
碰到的问题，案例，下一步如何
去海外支持的分享

2017-4-15
新安装的ubuntu1610server的ssh总是无法登录，报22端口被拒接，重启虚拟机，重启虚拟机程序貌似都不行。

2017-4-8

11185快递：9974465912026 不知道是谁的东西，哦有可能是茶叶。
p21上联芯的模块吧：
行   								不行
10.150.239.124					10.79.224.41
10.29.182.46						10.92.218.43
10.21.13.132						10.31.237.99
10.172.131.151
10.3.61.107

用电脑吧：
行   								不行
10.101.107.127                               10.75.32.99
-							10.8.179.255
-							10.61.126.40


用工业路由器来测试吧：
c1的模块：
不行  1
行      1  2  3 4 5  6
记录ip吧：
行   								不行
10.9.14.184						10.13.69.237
10.7.188.139
10.41.37.102
10.6.254.189

可以不行10.100.47.23310.25.200.24510.146.69.16910.60.224.5210.1.122.1710.26.67.21810.26.79.7410.60.186.10310.159.127.199
换个模块吧
行   								不行
10.17.75.38                                            10.2.107.151
10.172.22.212						10.59.47.86
10.152.202.34						10.61.59.118
10.161.102.219					10.45.219.184
10.221.132.101


这样看工业路由器的版本貌似正常。
usb0      Link encap:Ethernet  HWaddr B2:D9:7A:D1:9E:C2
          inet addr:10.160.216.88  Bcast:10.160.216.95  Mask:255.255.255.240

cat /proc/version
Linux version 3.3.8- (zy@zy-OptiPlex-9020) (gcc version 4.3.3 (GCC) ) #92 Wed Mar 29 11:43:05 CST 2017
 # iptables -S
-P INPUT ACCEPT
-P FORWARD ACCEPT
-P OUTPUT ACCEPT
/tmp # iptables -S -t nat
-P PREROUTING ACCEPT
-P INPUT ACCEPT
-P OUTPUT ACCEPT
-P POSTROUTING ACCEPT
-A PREROUTING -i br0 -p udp -m udp --dport 5060 -j REDIRECT
-A POSTROUTING -o usb0 -j MASQUERADE

工业路由器使用宽翼模块：
/tmp # ./busybox traceroute -I www.163.com
traceroute to www.163.com (112.51.121.164), 30 hops max, 38 byte packets
 1  *  *  *
 2  *  *  *
 3  *  *  *
 4  *  *  *
 5  183.235.32.133 (183.235.32.133)  42.088 ms  22.033 ms  19.157 ms
 6  *  *  *
 7  221.183.18.217 (221.183.18.217)  40.263 ms  24.643 ms  25.926 ms
 8  *  *  *
 9  *  *  *
10  112.5.209.2 (112.5.209.2)  44.655 ms  30.321 ms  34.221 ms
11  *  *  *
12  183.252.196.52 (183.252.196.52)  45.431 ms  31.151 ms  34.833 ms
13  112.51.121.164 (112.51.121.164)  34.680 ms  33.753 ms  34.801 ms
/tmp # ./busybox traceroute  www.163.com
traceroute to www.163.com (112.51.121.164), 30 hops max, 38 byte packets
 1  *  *  *
 2  *  *  *
 3  *  *  *
 4  *  *  *
 5  183.235.32.133 (183.235.32.133)  43.120 ms  27.951 ms  22.489 ms
 6  211.136.240.205 (211.136.240.205)  21.373 ms  211.136.240.201 (211.136.240.201)  18.001 ms  211.136.240.205 (211.136.240.205)  17.924 ms
 7  221.183.38.141 (221.183.38.141)  24.634 ms  221.183.18.217 (221.183.18.217)  22.173 ms  221.183.12.117 (221.183.12.117)  23.554 ms
 8  *  221.176.16.133 (221.176.16.133)  45.342 ms  *
 9  221.183.27.230 (221.183.27.230)  44.268 ms  *  *
10  112.5.209.2 (112.5.209.2)  47.981 ms  31.370 ms  *
11  *  *  *
12  183.252.196.52 (183.252.196.52)  40.083 ms  34.790 ms  40.273 ms
13  112.51.121.164 (112.51.121.164)  34.839 ms  31.263 ms  34.809 ms

工业路由器上使用联芯的模块：
 ./busybox traceroute -I www.163.com
traceroute to www.163.com (112.51.121.165), 30 hops max, 38 byte packets
 1  *  *  *
 2  *  *  *
 3  *  *  *
 4  *  *  *
 5  183.235.32.101 (183.235.32.101)  52.618 ms  38.832 ms  39.799 ms
 6  211.136.240.197 (211.136.240.197)  39.809 ms  *  *
 7  221.183.19.233 (221.183.19.233)  56.656 ms  45.582 ms  49.939 ms
 8  *  *  *
 9  *  *  *
10  *  *  *
11  112.5.209.2 (112.5.209.2)  99.758 ms  65.345 ms  69.810 ms
12  *  *  *
13  183.252.196.52 (183.252.196.52)  75.398 ms  68.775 ms  69.839 ms
14  112.51.121.165 (112.51.121.165)  69.758 ms  64.691 ms  69.673 ms


2017-4-7
在仓中看起来没有的文件：
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/securefs/
看起来这些文件在 ./linux_plat/base/linux/user/zte_apps/zte_webui中
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/user/gdb/gdb/ada-exp.c 若干个
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/user/Kconfig
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/user/Makefile
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/vendors/ZXIC/zx297520v2/config.linux
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/vendors/ZXIC/zx297520v2/config.vendor

usbproxy中的文件确实有区别：
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/linux-3.4.x/drivers/staging/usbproxy/Kconfig
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/linux-3.4.x/drivers/staging/usbproxy/Makefile
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/linux-3.4.x/drivers/staging/usbproxy/cp_log_drv.c
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/linux-3.4.x/drivers/staging/usbproxy/f_adb.c
ZMPSDK7520V2V1.0.4B02P02_20170329/linux_plat/base/linux/linux-3.4.x/drivers/staging/usbproxy/ramdump_drv.c

2017-4-5
湖北联通p10p开箱10台有2台无配置问题：
同样的程序已经出过9000台，以前的设备没有报这样严重的问题。湖北联通的程序是去年8月发行的，一直没有做任何修改。wifi上已经去掉了prot-mode和软件强制提高功率。

3-31
为什么要用git checkout -b sip-alg origin/sip-alg 这样来跟踪远程分支呢？

 insmod ip_gre.ko
 ip tunnel add tunnel0 mode gre remote 192.168.1.10  local 192.168.1.220  ttl 255
 ip link set tunnel0 up
 ip addr add  192.168.33.1 dev tunnel0
 ip route add 192.168.33.0/24 dev tunnel0

sudo ip tunnel add tunnel0 mode gre remote 192.168.1.220 local 192.168.1.10  ttl 255
sudo ip link set tunnel0 up
sudo ip addr add 192.168.33.2 dev tunnel0
sudo ip route add 192.168.33.0/24 dev tunnel0

考虑去掉的wlan参数：
export AH_SUPPORT_EEPROM_AR9287=1
export NUM_TX_CHAINS=2
export SA_NUMANT_PERCHAIN=2
export SA_11N_SUPPORT=1
export ATH_SUPPORT_TxBF=1

网易的这个云笔记体验也太差了，动不动就停止不动若干秒。

set ipaddr 10.8.0.33 && set serverip 10.8.0.100
tftp 0x80060000 u-boot.bin
好像不管什么样的地址，使用go都会直接复位。

3-30
新的zte7520使用了ubi的文件系统，在build中增加了工具，所以要删除原来的build重新下载一个。
rm linux_plat/base/build -r

3-29
这样的简历
１９８１－－１９８５东南大学无线电工程系。
１９８５－－１９８８北京理工大学电子工程系。南京十四所研究生。

１９８８－－１９９１南京十四所４０４室
１９９１－－１９９５南京康奇电子技术公司
１９９５－－１９９６巨龙通信公司南京办事处
１９９６－－１９９７新地网络公司南京办事处
１９９７－－１９９８南京光阳通信公司
１９９８－－１９９９南京自动化设备三厂
１９９９－－２０００江苏宏图高科技公司
２０００－－２００１中科院紫金山天文台华福数字视频公司
2001-2002苏源高科技公司
2002年9月-2002年12月南京西三艾电子公司
2002-2003年 南京汇翔自动化公司
2003-2003年8月金宁星拓电源设备研究所
2003年8月-2003年10月 科融数据系统有限公司
2003年10月-2004年2月 钢加远程数据系统有限公司
2004年8月--2005年8月苏州华硕电脑有限公司
2005年９月－2006年3月 上虞市胜昔信息科技有限公司
2006年4月-2006年7月北京正荣网际公司
2007年12月---2008年2月成都市佳灵电气制造有限公司
2008年2月---2009年12月十堰市华海达汽车安全技术有限公司
2010年1月---2010年11月北京固安信通铁路信号科技有限公司
2010年11月----2011年02月南京文采科技有限公司
2011年03月----2012年04月南京日新机电有限公司
2012年04月----2012年07月北京东方泰华投资有限公司
2012年07月-------2013年07月青岛日森机电有限公司
2013年07月-----2014年07月南京正銮电子有限公司 开发
2014 /7--2015 /7： 南京milink电子有限公司 （500-1000人）
2015 /7--2016 /11： 深圳维兴顺科技有限公司 （5-200人）

3-28
周湘理
在公司认识了更多的人，学到更多的知识。
刚开始做网页的时候，太忙，吃力。当时是2月底，从伊朗的开始。
网页知识复杂在网页布局，javascript， JQuery封装。有点难。
何文秋： 还了解后端，能修改c语言
尚杰：c语言基础差，只能做前端。
以前是做控制电机的，使用C， fpga，stm32这样的cpu。其中fpga可以写逻辑，产生各种不同的波形，方波，三角波等。
还在arm9上做过控制面板，使用linux，qt系统。
对4g参数不了解，对网络了解有限。
其他公司的优势：管理措施多一些。强制性规定较多。比如要写周计划，每两周开会，每个人用几分钟说一下计划。每次一个多小时。
有其他培训，演讲，礼仪等。和领导见面沟通的机会多一些，经理会主动召集会议，主动关心进度。生产经常去，看看有什么问题。

3-27
赵刚：
系统基于非openwrt的系统，比较底层，不太熟悉，升级等和openwrt都不同。
对fireware分区使用mtd命令，可能把必要的命令放到了tmp下。
主要认为做项目的交流比较少。
原来在成都瑞小博，技术氛围比较好，任务规划比较细，具体功能能细化出来，现做什么，后做什么，比较明确。
有完善的流程。
提交代码有code review过程。这个过程也是交流的过程。
这个公司固件4-5人，平台20多人以上。
在通则开始移植网页，很多东西不知道，没有文档，没有统一风格，标准。读状态都有若干种方式，配置，环境变量，tmp下的文件等。
希望对业务熟悉一些。希望基于openwrt系统开发。

jian@jian-OptiPlex-9020:~/work/zte7520_ap/apps/zte/common/apps$ find  . -name 'Makefile' | xargs cat | grep EXEC | grep =
EXEC = embms_data
EXEC    = fluxstat
EXEC    = sale_stat
EXEC = net_test
EXEC = igmpproxy
EXEC    += dhcp6c
EXEC 	+= dhcp6s
EXEC    = zte_tools_agent
EXEC = slictool
EXEC    = zte_blc
EXEC    = cfgnv_init
EXEC = tr069
EXEC = zte_router
EXEC = dnsmasq
EXEC    = zte_pcs
EXEC = clatd
EXEC    = zte_log_agent
EXEC = ipv6_addr_conver
EXEC = sntp
EXEC    = zte_rj45
EXEC    = at_cmd
EXEC = auto_connect
EXEC = zte_ipv6_slaac
EXEC    = nv
EXEC    = goahead
#EXEC = libwebuiwifi.a
#EXEC = libwebuinet.a
EXEC = hotplugnl
EXEC = eth_auto_connect
EXEC = nvserver
EXECUTABLES = testobsdrdr testpfpinhole
EXECUTABLES = testgetifstats
EXECUTABLES = testgetifstats testifacewatcher
EXECUTABLES = miniupnpd testupnpdescgen testgetifstats \
EXEC = zte_ipsec_proxy
EXEC    = at_main
EXEC    = zte_bip
EXEC = pc_server
EXEC = uart_proxy
EXEC = sd_hotplug
EXEC    = wl
EXEC = ccapp
EXEC    = embms_ctrl
EXEC = zte_ndp
EXEC = zte_arp_proxy
EXEC = zte_ipv6_addr_collect


3-26
openwrt使用了#ifdef CONFIG_MTD_ROOTFS_ROOT_DEV

把那个padjffs2部分加载
mount -t jffs2 /dev/mtdblock2 /tmp/1
内容是存在的，但是为什么空间的容量有问题：
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 3.3M      3.3M         0 100% /
/dev/mtdblock2           56.0M      4.1M     51.9M   7% /tmp/1

set ipaddr 10.8.0.33 && set serverip 10.8.0.100
tftp 0x80060000 vmlinux_ap123.lzma.uImage&&erase 0x9f6e0000 +$filesize&&cp.b $fileaddr 0x9f6e0000 $filesize
tftp 0x80060000 tozedap-cp_ap123-squashfs && erase 0x9f010000 +0x6d0000&&cp.b $fileaddr 0x9f010000 $filesize

3-25
这个东西好像没有使用：
ATH_SUPPORT_ICM=1
OL_ATH_SUPPORT_STATS

9341在3.3.8的内核中默认进行了端口隔离：
echo 10c 3e0000 > /proc/phys26/reg
echo 20c 3d0000 > /proc/phys26/reg
echo 30c 3b0000 > /proc/phys26/reg
echo 40c 370000 > /proc/phys26/reg
echo 50c 2f0000 > /proc/phys26/reg
echo 60c 1f0000 > /proc/phys26/reg


3-24
9x07中snmp执行
 /usr/sbin/snmpd -Lsd -Lf /dev/null -p /var/run/snmpd.pid

./scripts/feeds update -a
接下来安装feeds包，只有安装之后，在make menuconfig的时候才能够对相关的配置进行修改：
http://www.cnblogs.com/rohens-hbg/articles/4969222.html

3-23
mini_snmpd:
http://troglobit.com/mini-snmpd.html
https://github.com/troglobit/mini-snmpd/blob/master/README.develop
使用：
http://riceball.com/d/content/mini-howto-minisnmpd-small-snmpd-embedded-systems-openwrt
snmpwalk -v 1 -c public 192.168.0.1

3-22
去掉了 ATH_SUPPORT_DFS
-rw-rw-r-- 1 jian jian   21704  3月 22 17:44 adf.ko
-rw-rw-r-- 1 jian jian   50844  3月 22 17:44 ag71xx.ko
-rw-rw-r-- 1 jian jian   11592  3月 22 17:44 asf.ko
-rw-rw-r-- 1 jian jian  332624  3月 22 17:44 ath_dev.ko
-rw-rw-r-- 1 jian jian   67828  3月 22 17:44 ath_dfs.ko
-rw-rw-r-- 1 jian jian  753748  3月 22 17:44 ath_hal.ko
-rw-rw-r-- 1 jian jian   22928  3月 22 17:44 ath_pktlog.ko
-rw-rw-r-- 1 jian jian   40616  3月 22 17:44 ath_rate_atheros.ko
-rw-rw-r-- 1 jian jian   13928  3月 22 17:44 hst_tx99.ko
-rw-rw-r-- 1 jian jian 1253880  3月 22 17:44 umac.ko
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4572      2404  66% /

3-21
把修改了的文件列出来：
git status . | cut -c 14-  >my
cat my | xargs git checkout
cat my |xargs git rm
cat my >> .gitingore

3-20
去掉ATH_SUPPORT_SPECTRAL
-rw-rw-r-- 1 jian jian   21704  3月 20 13:33 adf.ko
-rw-rw-r-- 1 jian jian   50844  3月 20 13:33 ag71xx.ko
-rw-rw-r-- 1 jian jian   11592  3月 20 13:33 asf.ko
-rw-rw-r-- 1 jian jian  337872  3月 20 13:33 ath_dev.ko
-rw-rw-r-- 1 jian jian   67828  3月 20 13:33 ath_dfs.ko
-rw-rw-r-- 1 jian jian  764664  3月 20 13:33 ath_hal.ko
-rw-rw-r-- 1 jian jian   22952  3月 20 13:33 ath_pktlog.ko
-rw-rw-r-- 1 jian jian   40616  3月 20 13:33 ath_rate_atheros.ko
-rw-rw-r-- 1 jian jian   40076  3月 20 13:33 ath_spectral.ko
-rw-rw-r-- 1 jian jian   13928  3月 20 13:33 hst_tx99.ko
-rw-rw-r-- 1 jian jian 1270656  3月 20 13:33 umac.ko
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4764      2212  68% /

/tzadmin/cgi-bin # df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4824      2152  69% /
/tzadmin/cgi-bin # ls -l
-rwxrwxr-x    1 1000     normal      314860 Mar 20  2017 shakehand.cgi

web的shakehand改为使用so之后
/tzadmin/cgi-bin # df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 6976      4816      2160  69% /
/tzadmin/cgi-bin # ls -l
-rwxrwxr-x    1 1000     normal      157980 Mar 20  2017 shakehand.cgi
如果一块是1k，那么省了8k吧。

3-19
 tftp -g 10.8.0.100 -l /tmp/my.tar.gz -r my.tar.gz
tar zxvf /tmp/my.tar.gz

去掉hyfi
-rw-rw-r-- 1 jian jian   21704  3月 19 11:47 adf.ko
-rw-rw-r-- 1 jian jian   50844  3月 19 11:47 ag71xx.ko
-rw-rw-r-- 1 jian jian   11592  3月 19 11:47 asf.ko
-rw-rw-r-- 1 jian jian  344836  3月 19 11:47 ath_dev.ko
-rw-rw-r-- 1 jian jian   67828  3月 19 11:47 ath_dfs.ko
-rw-rw-r-- 1 jian jian  777392  3月 19 11:47 ath_hal.ko
-rw-rw-r-- 1 jian jian   22952  3月 19 11:47 ath_pktlog.ko
-rw-rw-r-- 1 jian jian   40616  3月 19 11:47 ath_rate_atheros.ko
-rw-rw-r-- 1 jian jian   40076  3月 19 11:47 ath_spectral.ko
-rw-rw-r-- 1 jian jian   13928  3月 19 11:47 hst_tx99.ko
-rw-rw-r-- 1 jian jian 1272460  3月 19 11:47 umac.ko

去掉wapi这个
-rw-rw-r-- 1 jian jian   21704  3月 19 11:18 adf.ko
-rw-rw-r-- 1 jian jian   50844  3月 19 11:18 ag71xx.ko
-rw-rw-r-- 1 jian jian   11592  3月 19 11:18 asf.ko
-rw-rw-r-- 1 jian jian  347240  3月 19 11:18 ath_dev.ko
-rw-rw-r-- 1 jian jian   67828  3月 19 11:18 ath_dfs.ko
-rw-rw-r-- 1 jian jian  777392  3月 19 11:18 ath_hal.ko
-rw-rw-r-- 1 jian jian   22952  3月 19 11:18 ath_pktlog.ko
-rw-rw-r-- 1 jian jian   40848  3月 19 11:18 ath_rate_atheros.ko
-rw-rw-r-- 1 jian jian   40076  3月 19 11:18 ath_spectral.ko
-rw-rw-r-- 1 jian jian   13928  3月 19 11:18 hst_tx99.ko
-rw-rw-r-- 1 jian jian 1292648  3月 19 11:18 umac.ko

原有文件大小
-rw-rw-r-- 1 jian jian   21704  3月 19 10:04 adf.ko
-rw-rw-r-- 1 jian jian   50841  3月 19 10:23 ag71xx.ko
-rw-rw-r-- 1 jian jian   11592  3月 19 10:04 asf.ko
-rw-rw-r-- 1 jian jian  347352  3月 19 10:04 ath_dev.ko
-rw-rw-r-- 1 jian jian   67828  3月 19 10:04 ath_dfs.ko
-rw-rw-r-- 1 jian jian  779664  3月 19 10:04 ath_hal.ko
-rw-rw-r-- 1 jian jian   22952  3月 19 10:04 ath_pktlog.ko
-rw-rw-r-- 1 jian jian   40848  3月 19 10:04 ath_rate_atheros.ko
-rw-rw-r-- 1 jian jian   40076  3月 19 10:04 ath_spectral.ko
-rw-rw-r-- 1 jian jian   13928  3月 19 10:04 hst_tx99.ko
-rw-rw-r-- 1 jian jian 1307668  3月 19 10:04 umac.ko

3-18
那个升级错误居然是内核中的mtd错了，把内核扩大了些，问题是boot没有改，还是在同样的位置去启动，就不行了。

今天怎么dnsmasq 2.76不用修改任何东西就能编译通过了，奇怪的事情，原来谢世乐上传的时候总是编译不过。

 insmod ip_gre.ko
 ip tunnel add tunnel0 mode gre remote 10.8.0.100 local 10.8.0.103 ttl 255
 ip link set tunnel0 up
 ip addr add  192.168.33.1 dev tunnel0
 ip route add 192.168.33.0/24 dev tunnel0

2828  sudo ip tunnel add tunnel0 mode gre remote 10.8.0.103 local 10.8.0.100 ttl 255
 2831  sudo ip link set tunnel0 up
 2833  sudo ip addr add 192.168.33.2 dev tunnel0
 2835  sudo ip route add 192.168.33.0/24 dev tunnel0



cp ./net/ipv4/ip_gre.ko ~/tftpboot
cp ./net/ipv4/gre.ko ~/tftpboot
cp ./net/ipv6/ipv6.ko ~/tftpboot

strongswan使用mips-gcc4.3.3编译出的问题：
checking gmp.h version >= 4.1.4... no
configure: error: No usable gmp.h found!

 Symbol: ATH79_DEV_NAND [=y]                                                                                                    │
  │ Type  : boolean                                                                                                                │
  │   Selects: ATH79_NAND_CALDATA_FIXUP [=y]                                                                                       │
  │   Selected by: ATH79_MACH_AP135_DUAL [=y] && ATH79 [=y] || ATH79_MACH_CUS227 [=y] && ATH79 [=y] || ATH79_MACH_CUS531_NAND [=y] │
  │

Symbol: ATH79_MACH_AP135_DUAL [=y]                                                                                             │
  │ Type  : boolean                                                                                                                │
  │ Prompt: Atheros AP135 Dual reference board                                                                                     │
  │   Defined at arch/mips/ath79/Kconfig:98                                                                                        │
  │   Depends on: ATH79 [=y]                                                                                                       │
  │   Location:                                                                                                                    │
  │     -> Machine selection                                                                                                       │
  │       -> Atheros AR71XX/AR724X/AR913X machine selection

3-17
为什么ap-cp改到qsdk版本网页升级不行了，网页执行了：
 update /tmp/vmlinux.lzma.uImage /dev/mtd2 > /tmp/updateboot
然后变成了：## Booting image at 9f6e0000 ...
Bad Magic Number

3-14
好容易把cpe-df的软件改成了qsdk版本。为什么每次都这么复杂呢？
cpe-df qsdk版
set ipaddr 10.8.0.33 && set serverip 10.8.0.100
tftp 0x80060000 tozedcpe-df_ap123-jffs2 && erase 0x9f010000 +0x6d0000 && cp.b $fileaddr 0x9f010000 $filesize
tftp 0x80060000 vmlinux_ap123.lzma.uImage && erase 0x9f6e0000 +$filesize && cp.b $fileaddr 0x9f6e0000 $filesize

3-13
ubuntu 运行32位程序
sudo apt-get install libc6:i386

libz.so.1: cannot open shared object file: No such file or directory

3-11
tftp -g 10.8.0.100 -l ag71xx.ko
rmmod ag71xx
insmod ag71xx.ko
ifconfig eth0 up
brctl addif br0 eth0


3-2
列出所有的用户和提交次数：
git log --pretty='%aN' | sort | uniq -c | sort -k1 -n -r

3-1
找到所有的ko, 并复制到当前目录：find . -name '*.ko'  -exec cp  {} . \;

2-25
终端颜色：
http://weakbrother.blog.163.com/blog/static/14067678120113125183337/

2-23
使用：
Linux version 3.4.110 (jian@jian-OptiPlex-9020) (gcc version 4.7.2 (Buildroot 2013.02) ) #16 Wed Feb 22 18:08:26 CST 2017
tcp pc->cpe [  8]  0.0-10.1 sec   112 MBytes  93.3 Mbits/sec
tcp cpe->pc [  6]  0.0-10.0 sec   109 MBytes  91.4 Mbits/sec
udp pc->cpe [  3]  0.0-10.0 sec   114 MBytes  95.5 Mbits/sec  (-b 100M)
udp cpe->pc [  6]  0.0-10.0 sec   111 MBytes  93.2 Mbits/sec

Linux version 3.4.110 (zq@zq-ThinkPad-E450) (gcc version 4.7.2 (Buildroot 2013.02) ) #2 Wed Feb 22 10:30:56 CST 2017
tcp pc->cpe [  3]  0.0-10.1 sec  7.88 MBytes  6.53 Mbits/sec
tcp cpe->pc [  6]  0.0-10.1 sec  2.50 MBytes  2.07 Mbits/sec
udp pc->cpe [  3]  0.0-10.0 sec   114 MBytes  95.5 Mbits/sec
udp cpe-pc [  6]  0.0-10.0 sec  1.88 MBytes  1.58 Mbits/sec

2-21
福建的ip从211.143.218.54,  211.143.218.35 211.143.218.108-122

2-17
phy 0 reg =0x3100 	phy 1 reg =0x7849		phy 2 reg =0x243	phy 3 reg =0xc54
phy 4 reg =0x1e1	phy 5 reg =0x0	phy 6 reg =0x4	phy 7 reg =0x2001
phy 8 reg =0x0	phy 9 reg =0x0	phy 10 reg =0x0	phy 11 reg =0x0
phy 12 reg =0x0	phy 13 reg =0x0	phy 14 reg =0x0	phy 15 reg =0x0
phy 16 reg =0x2	phy 17 reg =0x700	phy 18 reg =0x6101	phy 19 reg =0x0
phy 20 reg =0x10	phy 21 reg =0x0	phy 22 reg =0x0	phy 23 reg =0x0
phy 24 reg =0x0	phy 25 reg =0x12	phy 26 reg =0x1249	phy 27 reg =0x12
phy 28 reg =0x1	phy 29 reg =0x182	phy 30 reg =0x0	phy 31 reg =0x1409

qsdk: uboot boot kernel ok.
adb shell mkdir /jian
adb push ./linux_plat/base/linux/user/busybox/busybox /jian/
adb shell chmod +x /jian/busybox

2-16
adb push ./project/prj_cpe/bins/allbins/ap_cpuap.bin /tmp
adb push ./linux_plat/base/linux/user/updatesystem/update /tmp
adb shell cp /tmp/update /sbin
adb shell chmod +x /sbin/update
adb shell update /tmp/ap_cpuap.bin /dev/mtd10

2-15
中兴平台上的fota分区还比较大，而且可以mount上来，作为升级使用。
mount -t jffs2 -o rw mtd:fotaupdate /tmp/1
这个是以前的kernel:
Linux (zx297510-A9) 3.4.110 #2 Wed Jan 4 13:48:29 CST 2017 armv7l GNU/Linux
使用update后，看来没有什么问题
Linux (zx297510-A9) 3.4.110 #2 Wed Feb 15 11:21:18 CST 2017 armv7l GNU/Linux

2-14
zte7520的板子回来，第一个刷信可的程序貌似正常，第二个就没法启动了，从usb口上看，pc端总是显示两个trap口。

ccapp这个程序难道是控制slic的，里面又slic的消息。

zte7520中的nv set 后，nv save重新启动，设置的参数看起来没有保存。

Warning: nss-myhostname is not installed. Changing the local hostname might make it unresolveable. Please install nss-myhostname!
这个要安装：sudo apt-get install libnss-myhostname

看起来wifi也没有起来。

2-13
赵刚 和李瑶一起，在pc上可以连接尼日利亚的tr069服务器了。还需要在板子上实现。
张勇 江西那边在公交站台进行工业路由器的测试，发现需要使用静态地址的，这样，拨号程序还需要进行修改。

忙了3天，总算把ap-cp使用qsdk再次编译成功了，以太网部分的eth0和eth1也出来了，可以ping通了，那么还有其他的扩展的部分还不知道怎么做。编译上去的u11的以太网驱动报错：phy not found!

使用mount -t debugfs none /tmp/1可以把debugfs建立起来，不过看起来里面的东西不多。

任银善手上的工作：
1 巴西openwrt 9531, 拨号需要加容错
2 9531 lsdk版本 性能测试
3 9531+9887双频， 5.8g感觉还有不正常
4 vpn
5 4018 已经编译成功
6 32m 的双系统

工业路由器在测试中会出现概率性的启动后完全

2-10
grep -n '\.$' pp     //小数点是特殊字符 需要用\进行转义

黄武 问p21生产能否和m60一样检查天线是否扣好。

任银善 这个2.4g+5.8g的机器修改了mac结果好像校准的内容后移动了一个字节，所以看到5.8g的txpower是off，这也是头一次看到。也没有搞过ipsec，但原来的公司有人做过。

张勇 即使是7模的模块，使用电信的卡，cs还是写着“注册被拒接”的红字。在电信3g的情况下，拨号程序无法正常拨号，而额外的使用指令是可以的。所以估计还要改拨号程序。

早上华润的商务人员来了，希望尽快完成测试。

2-9
好像非常忙的样子。
首先是李瑶 若干个产品都要改网页，当前已经成为阻碍节点。他终于愿意招一个人，只要愿意做网页就好了。
廖媛 尼日利亚的p21还差ssl方式的tr069, voip。

2-7
zte为什么telnet进去速度响应非常慢，而使用adb则看起来是正常的。

2-6
菲律宾使用的是一个叫做wifi sweetspot的软件进行测速，这个软件直接发送udp包，不需要其他软件支持，连接wifi后即可使用。使用我的华为手机一直平稳，而使用占永平的手机就会明显的有起伏的现象。如果农宽cpe改为ap使用，那么看起来是平稳的。

年前的5.8g cpe报的不好用的问题是距离远了就不行，原因还是天线的问题。

zte7520以前的记录：
mmi模块的主要功能对不同的业务进行lcd或lde显示，lde是什么？
mmi存在对关机充电的支持。
已经存在恢复出厂的实现
adb看起来一定是通过usb来实现的
busybox中，没有dmesg和uptime这些指令。
存在nv这个指令，nv get telnted_enable
atserver的at log在/etc_rw/config/satlog这个文件中，还有一个ratlog不知道是谁发的。

海外会议。


1-22
上午王伍 白俊剑 等说m60相关产品后面的做的东西。

还是换一个本地的笔记吧，先用tomboy这个ubuntu自带的用着吧，其他都开始收费了。
折腾了半天，居然没有办法在win7上运行，算了，不能就不能吧。

1-20
这次年度的汇报本来我准备多汇报一点的，但是通知出来后发现研发的汇报时间被减少了不少，真是人生不如意，十有八九。我这里不是抱怨，下一次也不用增加时间，而是以这个作为一个计划不如变化的例子。

1-19
p21上的开机过一段时间天线检测错误居然是wifi驱动中ar9300Reset这个函数里面对这个gpio直接进行了操作。怎么会有这样的事情发生？
可以使用dd命令直接把iso文件写入u盘，简单的方法，不用找各种软件了。
http://www.veryhuo.com/a/view/80220.html

1-18
任银善 还在编译wlan_10.4，有个奇怪的define，总是报没有定义，应该是某些配置的问题。在我这里试试，cool 5是编译成功的，原来编译的是v10的，而不是v10_4的无线驱动。
工业路由器当前报每周有3-4台安装的机器不能使用的情况。
王伍重新写了一个i2c的程序，开始没有加延时，后来读寄存器有问题，应该是gpio的读法有问题
苑德强 tplink也在做海外市场，巴西一半的路由器被它占领。tp的质量其实不算完美，但是管理上应该有独到的地方。他举了个例子，有客户需要生产后立即得到发货的产品的sn号，tp可以立即给出，而他上个公司，动用了好多人力，一个个去扫描sn码，费了非常大的力气。

赵刚 openwrt上的openssl比较小，不过也有1.5m
梁剑 湖北自助一旦绑定了工号后，就不会去加载ocx，应该是移动数据的问题。
占永平 工业路由器断电48次也出现了不能ping到的情况，重启正常。要接串口看了。
张勇 3.3.8的程序出现了不能telnet，但能上网的情况。

p10刷工业路由器qsdk程序
set ipaddr 10.8.0.33 && set serverip 10.8.0.100
tftp 0x80060000 vmlinux_ap123.lzma.uImage&&erase 0x9f6e0000 +$filesize&&cp.b $fileaddr 0x9f6e0000 $filesize
tftp 0x80060000 tozedap-router_4g_industry_ap123-squashfs && erase 0x9f010000 +0x6d0000&&cp.b $fileaddr 0x9f010000 $filesize
set bootargs "console=ttyS0,115200 root=31:01 rootfstype=squanshfs ro init=/sbin/init mtdparts=spi0.0:64k(u-boot),6848k(rootfs),1152k(uImage),64k(mib0),64k(ART) machtype=DB120"

1-17
赵刚 可以使用在tr069中增加openssl的库了，但是openssl非常大，不是要裁减，就是要换库。

1-16
梁剑 明天请假，但是还是要远程查湖北自助不能使用的问题。谌杰现在在证通，当前是在做自助，已经申请转岗。广东自助这次谢世乐还是找他要了程序，才发现问题，能够使用银联了。方舒现在在人民银行，貌似折腾网上对银行不利的言论。万辉已经回南昌，貌似也是在做linux相关。

下午把原来的以太网驱动在3.3.8下编译过去。

早上那个9531的机器出现不能连接wifi的问题，telnet进去发现系统响应也很慢。还是那个问题，ubusd已经无法运行了，导致hostapd无法运行，所以wifi能搜索到，但是不能连接。另外log中保存了dmesg.log这个文件，非常大，有19m，删除它以后，系统看起来响应没有那么慢了。对于tftp不能上传创建文件的事情，使用那个tftp-hpa，进行配置后，就可以了。参考这个网页：http://wiki.ubuntu.com.cn/Tftpd-hpa
当前使用的配置文件：
/etc/default$ cat tftpd-hpa
TFTP_USERNAME="tftp"
TFTP_DIRECTORY="/var/lib/tftpboot"
TFTP_ADDRESS="0.0.0.0:69"
#TFTP_ADDRESS="[::]:69"
#TFTP_OPTIONS="--secure"
TFTP_OPTIONS="-l -c -s"

张勇 在ubuntu16下编译zte7520，也出现了编译openwrt下面的那个config工具编译inline错误。
大连奥远的电梯运用场景是这样的，设备不是安装在电梯里，而是安装在电梯井的最上端机房内，wifi采用定向天下向下，设备也不多，所以wifi从来没有报问题，主要是4g上1761模块有不能用的情况。当前就只有重启机器了，如果按照苗立双那样去重启模块，脚本做的太复杂。

1-12
郑荣俊 河南人。从前在一个做后视镜的公司，主要做单片机的工作。

1-9
上午王伍催着把9250分配下去，找来张勇和周湘理简单说了一下。
电梯里面的工业路由器存在拨号程序挂掉的情况，这样就有运行了一周多后不能上网的情况。先做一个容错吧。
把qsdk2.9中的nart编译成一个整个的文件看起来还比较繁琐，还是使用原来的方式吧。做makefile的时候跳过那些作为链接的so文件。
单总召开会议讨论南美和菲律宾的事情。

1-6
lc1860这个仓的内核每次都会完全重新编译了。
王伍：7520是个优先级最高的项目。
7520编译boot也没有什么问题。
rdesktop 增加-x 0x80这个参数，那么字体就不会发虚了。这个被称为user experience level
使用rdesktop有个好处是窗口大小不变，这样避免了virtualbox窗口变化时，thebat跟着调整，每次都要拉，比较麻烦。
任赢善 搞定了校准。9341的qsdk驱动移植基本没有难点了。下面就要把p21的改成这个程序。
git commit --amend 可以修改最后一次 commit

1-5
张勇 移植qsdk3的nart，不能开始校准。仁赢善给中电电话，说是官方不支持在9341上使用qsdk，后来换了qsdk2.9的，可以开始校准了，但是脚本需要重新写。

梁剑 修改了uboot，当然内核跑完成后，文件系统没有成功加载。

白俊剑 还是放周湘理来做7520的网页部分。

下午折腾了半天的虚拟机，试图安装一个64的win7，直接上win7 64位sp1的版本，出现了那个寻找驱动程序的界面就不走了。查找是说使用u盘安装才会有这样的错误。安装ghost版，选择第一项立即停止响应了。还是安装ghost版，先进入pe系统，然后选择ghost，这样就安装成功了。里面大量的各种软件，可以卸载。但是主页永远都在2345那个，算了，直接删除吧。受不了了。
主要是昨天开启了一次win7虚拟机器之后，xp就不识别那个1t的硬盘了。

Shell脚本中$0、$?、$!等的意义
http://www.sijitao.net/1613.html
$$
Shell本身的PID（ProcessID）
$!
Shell最后运行的后台Process的PID
$?
最后运行的命令的结束代码（返回值）
$-
使用Set命令设定的Flag一览
$*
所有参数列表。如"$*"用「"」括起来的情况、以"$1 $2 … $n"的形式输出所有参数。
$@
所有参数列表。如"$@"用「"」括起来的情况、以"$1" "$2" … "$n" 的形式输出所有参数。
$#
添加到Shell的参数个数
$0
Shell本身的文件名
$1～$n
添加到Shell的各参数值。$1是第1参数、$2是第2参数…。

7520可以上网，但是看起来pc上无法得到ipv6的地址。貌似也没有radvd程序。
按照这个文章的修改，也不能使用linux下的adb来连接7520
http://wyoojune.blog.163.com/blog/static/57093325201452753323250/

1-4
张勇 无论怎么尝试，都只能出一个eth0或者eth1。那就算了吧。编译原来那个校准的ko，在新的内核下面加载会失败。
在3.3.8下，暂时没有出现宽翼模块不停的报错的情况。
信可的成伟平过来，试图在虚拟机中使用刷机程序，看起来是无法成功的，直接使用笔记本才能成功。系统中adbd已经在运行。是不是要在9341上也移植一个看看，这样即使没有网络地址的情况下，是不是也能进入系统。如何单独编译某个模块，显然他们还没有折腾过。还不能在adb中直接发送at指令。后来何伟和王伍也过来，说的主要是升级的事情。不做差分，fota，只做全包升级。
对于存在大量空目录的系统，先这样折腾一下再git add, 这些空目录就保存下来了。
find . -type d -empty -exec touch {}/.gitignore \;

1-3
16:48
张勇 问phy, switch等的区别
王伍 说中兴的目录很有借鉴，apps里面是各种程序。这个都是这样做的啊。
中兴的编译貌似没有碰到什么问题，直接过了。
中兴的内核居然已经把其他的arch删除了，比较好。

15:32
git for windows 2.11以后的版本就不再支持xp系统了，只能下载一个2.10版本的用着了。

14:58
来给郑荣俊分配git权限吧。

13:56
看起来如果在linux下操作另外挂载的那个磁盘，在linux下创建的文件，在windows下是没有看见的。如果在linux弹出设备，再重新挂载，那么那些文件也就不存在了。总感觉这样做，同样一块硬盘，变成了两个独立的系统。

11：56
好像好忙碌的样子，其实也没有。
张勇：9341一种新的类型，使用2.6.31的内核启动宽翼模块还是会挂掉。需要在复位后30秒再去加载usb模块，又要出新程序了。
3.3.8内核程序还有两个问题，一个是校准的ko编译，一个只出一个是eth0的问题。
刘云 苗立双 刘咏辉 徐钢雄 华域设备启动有概率不能起来的情况：当前使用华域本身的程序，无论什么硬件都没有问题，使用通则的软件，使用华域的底板没有问题，使用通则的底板就可能会出现不启动的情况。

昨天下午林小珊还打电话来问新同事坐哪里。
