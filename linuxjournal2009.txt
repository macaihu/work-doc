2009-9-3 
使用无线网络复制文件时，会死掉。 
httpd进程莫名其妙的消失了。 
路由器重新启动过一次。在把笔记本的ubuntu进行升级的时候。 
2009-8-24 
今天又出现了可用内存到达4m的情况，路由器已经运行了4天，之前无线部分是关的，只是开了，就成了这样的情况了： 
# free
              total         used         free       shared      buffers
  Mem:        13348         8416         4932            0          996
 Swap:            0            0            0
Total:        13348         8416         4932 
2009-8-17 
去掉linux中ipmi支持。 
2009-8-14 
试图使用最新的busybox，成功的编译了，但是insmod却没有找到其需要加载的库，可能是路径设置的问题。 
2009-8-13 
如果在busybox中配置 
（1）busybox的配置
    对Telnetd的配置部分：
Networking Utilities ---> 
telnetd
  Support standalone telnetd (not inetd only) 
linux中加入Device Drivers->Character devices->Unix98 PTY support (UNIX98_PTYS)启动后运行 
＃cd /dev 
# mkdir pts 
# mount -t devpts devpts /dev/pts 
# telnetd 
这样，从其他机器就可以telnet 登录上去了。注意如果在busybox中增加login，那么就会出login提示，而无法登录。 
2009-8-12 
vsftpd只能上传不能删除问题
vsftpd.conf加上anon_other_write_enable=YES 
虚拟用户如何实现 , 上传的文件权限为 777这样，就可以直接在资源管理器中拖拽了 
2009-8-11 
看《构建嵌入式linux系统》 
去掉Support for Intel/Sharp flash chips,Support for AMD/Fujitsu flash chips,Support for ST (Advanced Architecture) flash chips三个选项。 
2009-8-10 
试图让gprs上网的灯和局域网的灯一样闪，看来有些困难。 
2009-8-6 
只需要安装一下manpages-dev就可以了man函数的帮助了。 
udhcpd中，很晚的版本才出现hostname，而在broadcom中的另外一个版本中，则出现了hostname，但是没有static_leases，最终使用busybox中的版本，加上hostname，又参考最新的busybox中的程序，修改了static_leases的IP不能显示hostname的情况这个bug。 
2009-8-5 
这次安装nxserver非常奇怪，没有中文输入法了，后来发现，开一个终端窗口，运行scim就可以了，非常奇怪的现象。 
安装csftpd了，配置方法基本参考这个文档：Vsftpd虚拟用户设置 
2009-8-4 
忙碌的一天，安装了服务器，看了移动的新标准。 
2009-7-31 
去掉了linux中Enable futex support选项，看看会有什么样的情况。很快就出现了Disable IRQ ＃6了，关于Enable futex support的一篇文章 
2009-7-30 
忽略了一个MAKE中的错误，让库优化可以继续，现在看来，貌似没有发现什么问题。 
2009-7-29 
花生壳貌似只要在内网的一台计算机上安装就可以解析了。 
2009-7-14 
sdram_init要改为0x000a，这样才能使用16m内存。 
2009-7-9 
发送短消息出现问题： 
+CMS ERROR: 96
+HTCERROR: d,60
根据文档： 
Cause no. 96: "Invalid mandatory information". 
      This cause indicates that the equipment sending this cause has received a message with non‑semantical mandatory information element errors. 
不是很明白。 
2009-6-24 
man xxx|col -b>outfile 这样可以把man中的内容打印下来，不过这样列宽似乎是和当时的终端窗口列宽是一样的。 
我现在使用的域名过滤和这篇文章一样，但是他的dns53端口转向似乎没有作用。 
2009-6-23 
去掉了udev/test目录中的一些文件，这样在windows下也可以完整的cvs下来全部的程序了。但仍然有一个问题，linux下的cvsd似乎并不区分什么文本格式和bin格式，通通是文本格式，虽然有些文件显然是二进制文件，在linux这似乎不成什么问题，而如果使用windows客户端，则会在\r后面自动加上\n，或者相反，总之会加点东西，这对于二进制文件是致命的，有问题的。 
似乎只要在filter表中增加一个forward链规则就可以阻止对某些ip的访问，那么允许呢？似乎就有些问题了。 
2009-6-22 
从上个周末开始，路由器应该是比较稳定了，貌似还没有死掉过。 
2009-6-18 
今天发现奇怪的事情，首先是75这台机器死掉了，强制关机后，nxserver也照样留下了一个僵尸连接，这次从其他机器却不能终止它，不过/usr/NX/bin/nxserver --shutdown后，就可以在客户端的admin界面中删掉它了。 
2009-6-17 
增加了一些网页。 
2009-6-16 
syslogd -R 192.168.1.74 就可以把syslogd的信息发送出来，不必写在/var/log中了。但是似乎指定了ip后，并没有自动启动syslogd。 
在任何失败后，pppd都不会自动退出，也不知道是什么原因，算了，在定时器里面来杀死它吧。 
2009-6-15 
找到了一个source insight的绿色版，再加上wine，就可以在linux中使用source insight了。 
如果要禁止访问某些网外的ip，似乎只要这样就可以了： 
iptables -t nat -A POSTROUTING -d 220.162.247.149 -j DROP，这样，这个地址就无法访问了。 
2009-6-12 
77的共控机硬盘完蛋了，只好在55上重新建立cvs了。 
find $(TARGETDIR) -name .cvsignore | xargs cvs add 这个指令真是方便啊。 
2009-6-11 
按需拨号也很简单，只要加一个demand就可以了。 
2009-6-8 
一个submit的按钮必须加上 class="button" 这个属性后，才能显示css中button对应的样子。而在css中加入input.submit这样的东西是没有用的。 
2009-6-5 
为什么局域网的静态路由表就没办法修改正确呢？真是奇怪阿。怎么都不对，先不管了。那个多播的设置，页面内容也写到了程序中，非常搞笑，算了，不管了。 
在脚本中加入 set -x可以显示命令本身。 
2009-6-4 
把wan设置中的东西基本上加进去了。 
broadcom中，局域网部分也有静态路由表，这个表就不知道有什么作用了。 
在lc6311没有起来的情况下，由于不断的拨号，板子上的进程id号增加的很快，一天多下来已经到了17000了。 
2009-6-3 
加入Load all symbols for debugging/ksymoops这个选项试试。 
把板子该成了内网地址后，传程序成了问题，来试试端口映射能不能做到。貌似没有什么反应。 
<input type="hidden" name="wan_desc" value="<% nvram_get("wan_desc"); %>">
<div style="display:none;"><select name="wan_ifname" ><% wan_iflist(); %></select></div> 
这两个句子分别对网页上的input 和select 进行隐藏。 
现在来改边wan为dhcp方式。将135的dhcp打开，并只分配1个地址192.168.1.1吧。 
broadcom的释放似乎没有真正释放，地址仍然是原来的地址，当然在dhcp服务器上显示的确实是消失了。 
对于radio这样的input，如果没有选择他，那么在post中，是没有它的选项的，这样对于wan_pppoe这个网页，就有些复杂了。又要加上一些看不见的radio了。 
2009-6-2 
加上了swap，跑一个晚上看来还在坚持。 
tplink中wan设置的网页应该是引导网页，在其每个页面设置的网页中，都不是跳转到左边给的连结。 
使用一个简单的脚本，就可以实现网页自动转向需要的网页： 
<html>
<head>
<script language="JavaScript" type="text/javascript">
<!--
function choseWanPage()
{
    var wan_proto = "<% nvram_get("wan_proto"); %>";
    
    if(wan_proto == "dhcp")
        location.href = "wan_dhcp.asp";
    else if(wan_proto == "static")
        location.href = "wan_static"
    else if(wan_proto == "pppoe")
        location.href = "wan_pppoe.asp";
    else if(wan_proto == "disabled")
        location.href = "wan_disabled.asp";
}    
//-->
</script>
</head>
<body onload="choseWanPage()">

</body>
</html> 
linux下现在有一个aolnweb提供vpn服务，使用其服务参见http://www.alonweb.com/node/3 
然后：sudo /etc/init.d/openvpn stop结束服务 
奇怪，今天再看dhcp的服务列表中，其过期时间就是对的了。 
wan口的地址修改现在也是只能看，不能改。应该是少了第一个条件，什么connnection的。加上了，还是有问题，要使用包捕获的方式来看看了。 
改一下程序，如果存在/tmp/www目录，那么httpd就在/tmp/www目录启动，如果不存在，就在/tzwww启动，这样可以少输入一些指令。如果判断一个目录是否存在呢？现看看chdir这个函数。这个函数如果返回0表示正常执行了，－1表示没有正确执行。 
2009-6-1 
晚上又出现了disabling irq的事情，而且内存增加到4m似乎没有那么容易复现了。 
现在去掉cfi支持看看会有什么情况出现，刚刚下载的时候死掉了，复位后现在貌似还好.但是后来似乎死过若干次。 
dhcp列表是显示了，但是立即就过期了，不知道是什么地方的原因。 
是不是打开了dhcp server就很容易死掉？ 
wan的设置实际上有多个界面来处理，由于选择不同而出现不同的页面，broadcom是采用disable的方式来进行处理的，显然不是很方便，而tplink则使用不同的网页。似乎三个页面的切换也不是很难，但是对于menu来说，应该调用哪个页面才合适呢？这就是一个问题，还有一种方法就是再分一个frame，这样就比较简单了，不过这样，就需要更多个wan的页面文件了。就这么做吧，还有一些通用的设置需要在每个页面出现。 
现在看来更象是哪个swap的问题，增加了它好像就不容易死掉了。 
2009-5-31 
这3天看来是停电了，所以也无法知道这3天的运行情况。 
为什么时区的选择就能够保存，而ntpserver这些edit中的数据就不能保存了呢？现在也没有找到时区是在什么地方保存的。 
如果多重新启动几次httpd，就很容易出现disbling irq的错误，不够也许今天是因为我没有打开lc6311，使得系统在不断地拨号的缘故？ 
时间设置忠的ntp server终于可以使用了，原因是必须把net_server这个变量要先设置，才可以设置net_server0这些变量，为什么每次都要这样设置呢？真是奇怪。 
而局域网部分，可能是if_name之类的变量没有设置。要把原来的网页中的javascript脚本看看设置了一些什么样的变量。那么加上lan_ifname和lan1_ifname这两个变量后，貌似就可以修改了。 
现在的文件大小是3608576。现在手工修改了一下linux的.config，去掉了其中的ehci支持。如果是选择，那么直接这两个选项就已经选择了。去掉了如果没有完全重新编译，文件的大小没有改变，但是可用内存一下子增加了很多，虽然在刚启动是也是1.6M左右，但一会儿后居然到了4M。应该不是这个原因，因为.config自动恢复了原样。是不是我没有修改它？ 
udhcpc -i eth0 ....这个进程难道不能杀死，多设置一次lan方面的参数就多一个在运行？ 
2009-5-23 
再次出现了21日的那种串口无响应的情况，奇怪了。 
在busybox中加入了ftpget和tar，这样，就可以在pc下编辑好网页，打包，在板子上下载，解包，还是比较方便的，比起每次重新编译，下载要方便多了。 
2009-5-22 
如何在ubuntu中加入ftp server FTP Server on ubuntu 
如果改变了linux的选择，还是很有可能会出现死机的情况的，比如去掉了kernel .config support和prompt for developemnt and/or imcomplete code.deivers。 
找到了一个叫做sdmenu的脚步，他的菜单貌似符合我的要求。 
2009-5-21 
今天的现象非常奇怪，开发板的其他功能似乎正常，web也能访问，td也在网，iptables工作也正常，能通过这个板子ping出去，但是串口不通了。奇怪的是75这台机器也停止了响应。 
广西的维护人员打电话来说原来的那种插卡话机会出现无来电显示的情况，而且1，0等数字也会显示消失，奇怪的事情。 
tplink路由器的网页菜单使用了...html?dd=ss这样的形式，这样，它后面的解析器应该是比较复杂的。 
2009-5-15 
仔细查看usb/core下面linux2.6.28的最新代码，还是算了，不修改那么多了，先只修改一点点用吧。 
2009-5-14 
找到所有某种文件并且删除他们： 
find . -type d -name ".svn"|xargs rm -rf 
在cvs 做import时，最后的两个参数一定要加，加上的结果是建立了第一参数的分支，建立了第二个参数的标签，不知道其设计者一定要这样做的理由。 
ls -R 列出子目录中的内容。 
如果不修改usb部分的代码，现在的程序上网后是必死的。 
2009-5-13 
似乎/tmp/下的ip-up，if-down并没有得到运行。 

如果加入lc6311的初始化代码到cmtc-isp文件中，其初始化代码能得到执行，但是貌似就不能上网了。也许是由于at^dsq=0这个指令无法执行？也许可以单独写一个脚本，由chat单独运行一下看看是什么结果。 
如果要pppd自动断开，试试在cmnet中加入nopersist试试是什么情况。不行，nopersist是默认的情况。 
修改了pppd中在线时间统计的错误。pppd中在线时间统计错误 
终于在ubuntu中安装了cvsd，有一些麻烦的地方。参看在ubuntu 9.04中安装cvsd。然后在客户端使用： 
cvs -d :pserver:jl@192.168.1.77:/router import -m "first" -I ! src src initial创建一个新模块 
cvs -d :pserver:jl@192.168.1.77:/router import -m "first" -I ! src src initial取出该模块
可以使用
CVSROOT=:pserver:jl@192.168.1.77:/router
export CVSROOT
来简化输入。

2009-5-12 
从 
http://www.linuxsir.org/bbs/thread229926.html 
其中的这段描述： 
You MUST disable the lines that give values for lcp-echo-interval and lcp-echo-failure or your connection will always terminate (eg after two minutes). It appears that GPRS providers do not reply to lcp echo requests but pppd normally uses these to determine if the connection is still good. 
这样，就无法判断ppp是否是完好的？ 
以上判断应该是错误的，至少现在中国移动网络支持lcp-echo-interval and lcp-echo-failure，昨天犯了个愚蠢的错误，两个都是lcp-echo-interval了，这样当然不会自己断线了。现在的问题是虽然ppp0会消失，但是pppd并没有从进程中消失。貌似只有killall pppd来消灭它。从man中说，当ip-down,ip-up时，pppd会分别调用/etc/ppp/下面的两个同名脚本，从一上网就开始去取时间来看，貌似确实是这样的。不过板子调用的是/tmp/ppp这个目录下的，而这个目录下的这两个文件，又是链接到rc上的。 
国家授时中心服务器的IP地址是(210.72.145.44) 
2009-5-11 
终于设置好了nxserver，设置的过程在nxserver的安装 这个文档中，终于可以不用vnc这样的工具了，速度就和本机操作一样了。 
在cmnet文件中设置了moden, lcp-echo-interval 1,lcp-echo-interval 10等内容，但是并没有如同想象的那样，pppd会去自动判断是否断线而自动退出和断开ppp0。不貌似不那么容易断线了。 
在3322.org上申请了一个动态的dns，jianl.3322.org，但是3322提供的linux客户端ez-ipudate必须指定网卡，对于公司这样的上网方式显然无法实现，而lynx这个命令也消失了。还有一个这样的指令可以完成这个功能： 
wget "http://username:password@members.3322.org/dyndns/update?system=dyndns&hostname=yourhost.ourdomain.ext&myip=ipaddress&wildcard=OFF" 
其中username,password,yourhost.ourdomain.exe要根据情况修改。 
2009-5-9 
下载了openwrt，编译都用了一天的时间，虽然在目标板上可以运行，但是总是重新启动，我猜可能是因为flash支持不对的原因。 
再次对busybox进行了一点裁减，去掉了telnet,telnetd,clear,reset,rdate这些功能。 
2009-5-8 
折腾了一下freenx，但是总是连接失败，还是先算了。 
broadcom中的时区设置的值非常奇怪的，按照wiki百科中关于时区 的描述，时区的写法应该非常简单，utc+n或者utc-n。中国全境使用utc+8。而broadcom使用的如同PST8PDT这样奇怪的时区描述，这些描述在这里可以找到Time Zone Table Oracle，不知道这些是什么时代遗留产物。 
如果重新设置了时区，那么netconf_add_nat函数设置的转发就无效了，需要重新设置一下才可以，估计是broadcom重新设置了一下所有的参数。 
2009-5-7 
ubuntu重新启动的时候还会检查显示器，这样对于没有显示器的机器似乎就不太友好了。 
使用netconf_add_nat函数就可以完成类似iptables命令行 
iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE这样的功能。 
有时候还是会死掉，真奇怪阿，难道要把usb整个换掉？ 
ubuntu启动的时候一定要接好显示器，否则就不起来，这样，设置了自动登录也是枉然。 
2009-5-6 
s这个脚本可以实现tftp的自动上传，不用再敲那么多的键盘了。 
#cat s 
cd mipsel-uclibc 
tftp 192.168.1.1 << END
bin
put linux.trx
END

2009-5-5 
按照这篇文章修改后，usb似乎好了点，试了几次，即使加上usb2.0支持，还没有碰到死掉的情况。 
USB: fix interrupt disabling.. 
upnp实际上是一个自动的端口转发的机制，如果路由器打开了upnp，那么内网计算机的的应用程序，主要是p2p的应用程序，就可以在路由器上自动设置响应的端口转发，这样，这些应用程序就仿佛在外网上一样，而且这个过程是自动的，不需要做固定的端口映射。经过测试，如果打开了upnp，打开emule的upnp功能，那么emule就能成为高id，在路由器的upnp界面上也能看到emule设置的端口转发。很多程序都有upnp功能，bt,迅雷，msn,skype都具备，qq似乎没有。 
看了一下dnsmasq，这个东东应该已经可以进行dns转发了，把网关设置成路由器地址，确实又可以进行dns解析，原来为什么不可以呢？奇怪。 
路由器所有的进程貌似是重preinit这个进程开始的，而这里把preinit重新定向到了rc这个程序。 
这些板子的MAC地址貌似相同，如果插到同一个局域网中，就会出乱子，即使ip不同。所以，要修改一下他们的地址比较好。 
2009-5-4 
如果把usb2.0的选项和其子选项3个都选上，测试的结果是： 
自动复位 3次，断网10次，死机2次。 
2009-4-30 
仍然有一次死掉的情况出现，如果不启动syslogd，那么只出现过一次。 
也许这个网页给出的是解决方案：http://lkml.org/lkml/2008/6/30/365 
2009-4.29 
使用v1.03版本的程序似乎会重新启动，比后面的要好一点，后面的直接死掉。难道是编译进入的ppp有问题？在pc上pc当然不会死掉或重新启动。 
应该是因为选择了这个选项 EHCI HCD (USB 2.0) support的原因，去掉后，虽然上网一段时间后仍然会莫名其妙的断掉，但是路由器还没有出现死掉的情况。 
linux 中查找文件内容： 
grep   who   /use/local   -r  
  who是pattern，如果含有特殊字符则要加上引号。  
  /usr/local是local，  
  -r   是option，表示所有的文件，且对子目录递归。 
 Create deprecated sysfs files 这一项是否选择貌似不重要，编译和字节数相同。 
万辉在make new module的时候，cvs常会给他一些新的，其他目录下的文件，这个cvs真的问题不少。 
公司驱逐所有在天安宿舍的员工，原因是住在一起的人吵架吵得厉害。原来吵得疯了一个，最近一次又闹到所有公司的上层。居然有这样的事情发生。李忠就说是素质问题，提议要进公司的，先背诵了子弟规再说。 
2009-4-28 
经过精简的程序终于可以加上iptables，经过一个简单的设置指令 
iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE 
就可以实现带其他机器上网，但是dns似乎必须还要设置为移动的dns:211.136.112.50，否则dns无法实现。 
拨号有时候会死掉，现在原因待查。 
2009-4-25 
如果在网页中设置了broadcom中的syslogd的IP和connection loging，而又没有在控制台打开syslogd，那么pppd call cmnet 将会使得它死掉。 
只要拨号上过网，这个路由器就能更新时间，不过不是北京时间。 
2009-4-24 
配置了一下ubuntu的syslogd，时期能接受外部的数据，配置参见文档将Ubuntu配置成syslog服务器接收外部日志，但是有两个问题，首先是broadcom这个板子貌似没有发送任何数据，另外如果使用其他的udp发送程序，就是没有记录到firewall.log中，而是记录到了messages.log中。 
王伍说他以前使用的是ipchains这个工具来实现路由功能，但这个工具不知道在broadcom上对应的是什么，而且在现有的ubuntu上，也没有这个工具。 
从putty这个工具的源码来看，它似乎没有用任何的资源工具来做窗口，难道完全是用api来实现窗口的？ 
梁剑仍然发现视频卡很容易出错。 
李忠发现我的miniterm和超级终端的的表现行为还有所不同，其实应该差不多，只不过我的输入命令加的是回车换行，而超级终端默认只加回车。 
2009.4.23 
打电话给涂柯，他说一定要有usbserial.ko库，才能驱动大唐模块的usb。 
修改文件../linux/linux-2.6/drivers/usb/serial/generic.c中的 
//#static __u16 vendor  = 0x05f9;
//#static __u16 product = 0xffff;
static __u16 vendor  = 0x1ab7;
static __u16 product = 0x6000;
这样，就可以识别大唐模块lc6311的usb口，并在/dev下产生6个ttyUSB*设备了。
如果把usbserial部分编译为模块的方式，那么就可以使用指令
insmod usbserial vendor=0x1ab7 product=0x6000来识别，从dmesg命令来看，确实正确的识别了，但是在/dev下，并没有产生ttyUSB设备。

修改ppp/Makefile
$(ETCDIR)/chap-secrets:
        $(INSTALL) -c -m 600 etc.ppp/chap-secrets $@
增加以下几行
        mkdir -p $(ETCDIR)/peers/
        mkdir -p $(ETCDIR)/chat/
        $(INSTALL) -c -m 600 etc.ppp/resolv.conf $(ETCDIR)/../resolv.conf
        $(INSTALL) -c -m 600 etc.ppp/cmnet $(ETCDIR)/peers/cmnet
        $(INSTALL) -c -m 600 etc.ppp/cmtc-isp $(ETCDIR)/chat/cmtc-isp
重新make install，这样这几个配置文件就会合并在linux.trx中。这几个文件的内容参见大唐提供的文档ppp_desc_Linux_USB.txt
然而，和PC上的目录不同，配置文件是保持在/tmp目录中，而不是/etc目录中，还要找一下怎么把文件放到目标板的/tmp中。所以，要在目标板上执行以下命令：
cp /etc/resolv.conf /tmp/
mkdir -p /tmp/ppp/peers
cp /etc/ppp/peers/cmnet /tmp/ppp/peers/
这样，再执行pppd call cmnet，就可以上网了。可以ping www.163.com。
如果打开syslogd，那么，就可以再/var/log/messages中看到日志。

奇怪的问题：现在目标文件有 3813376，使用tftp的时候，总是传送到3800多的时候终止了，如果复位目标板，那么就起不来了，只有再传一次才能成功的传送。每次必然如此。而且联想的机器传送几次后就必须重启才能再传，否则每次都time out。只好到本机的windows下来传。

李忠说这两天在徘徊，是把原来的话机程序直接搬还是从头重写。

彭广才对多普达的hd心仪已久，看见严斌的新手机，心里痒痒的。 
2009.4.22 
vim指令：y复制 p 粘贴 jhkl移动光标，u是undo 
linux中的ppp支持似乎只是内核支持了ppp，而并没有再带上pppd和chat。broadcom系统中没有在配置中加入对pppd,chat的支持，但是在ppp目录中带有一份貌似完整的ppp软件包。 
要增加ppp支持和libdl，所以要在router menuconfig中： 
 Additional C libraries  --->
         [*] libdl
在linux内核的menuconfig中，ppp相关部分能加上的先都加上
 Device Drivers  --->
     Network device support  --->

  x x    <*>   PPP (point-to-point protocol) support                      x x
  x x    [*]     PPP multilink support (EXPERIMENTAL)                     x x
  x x    [*]     PPP filtering                                            x x
  x x    <*>     PPP support for async serial ports                       x x
  x x    <*>     PPP support for sync tty ports                           x x
  x x    <*>     PPP Deflate compression                                  x x
  x x    <*>     PPP BSD-Compress compression                             x x
  x x    <*>     PPP MPPE compression (encryption) (EXPERIMENTAL)         x x
  x x    <*>     PPP over Ethernet (EXPERIMENTAL)                         x x
  x x    <*>   SLIP (serial line) support                                 x x
  x x    [*]     CSLIP compressed headers                                 x x
  x x    [*]   Keepalive and linefill                                     x x
  x x    [*]   Six bit SLIP encapsulation

修改src/router/Makefile文件：
        $(MAKE) -C ppp/pppoecd $* INSTALLDIR=$(INSTALLDIR)/ppp
注释掉，增加一条
        $(MAKE) -C ppp $* INSTALLDIR=$(INSTALLDIR)/ppp
这样编译整个ppp，而不仅仅是pppoecd部分
运行ppp/configure，生成ppp部分的makefile文件
vim ppp/pppd/plugins/pppoe/pppoe.c 在193行最后增加一个\
vim ppp/pppd/plugins/pppoe/pppoehash.c
vim ppp/pppd/plugins/pppoe/pppoe_client.c
vim ppp/pppd/plugins/pppoe/libpppoe.c
这几个文件的#include <pppoe.h> 改成#include "pppoe.h"
修改ppp/Makefile文件，增加一行：
DESTDIR = $(INSTALLDIR)
将install: 后面的$(MANDIR)/man8 去掉
vim ppp/pppd/plugins/Makefile
将LIBDIR  = /usr/lib/pppd 改为LIBDIR  = $(INSTALLDIR)/usr/lib/pppd
vim ppp/chat/Makefile
 vim ppp/pppd/Makefile
vim ppp/pppdump/Makefile
vim ppp/pppstats/Makefile
这几个文件将$(INSTALL) -c 后面的-s去掉，并加上类似
$(STRIP) $(BINDIR)/pppd/pppd
将有关man的部分注释掉
如果install 后面有-o，-g之类的参数也去掉。
这样就可以make,make install 就可以编译一个带有pppd和chat的router。

2009.4.21
Gentoo Linux USB指南(http://www.gentoo.org/doc/zh_cn/usb-guide.xml)这份文档不错，根据这份文档的说明对linux中的各个选项加以选择：
现在选择了以下的条目：
Device Drivers  --->
     USB support  --->
             <*> Support for Host-side USB
            [*]   USB device class-devices (DEPRECATED)
             <*>   EHCI HCD (USB 2.0) support
             <*>   OHCI HCD support
            <*>   UHCI HCD (most Intel and VIA) support
            [*] USB Monitor
            USB Serial Converter support  --->
                    <*> USB Serial Converter support
                    [*]   USB Generic Serial Driver
                    <*>   USB CP2101 UART Bridge Controller
                    <*>   USB Prolific 2303 Single Port Serial Driver
这样，如果启动的时候将大唐开发板或者使用Prolific 芯片的转串口的设备，在/dev中就会增加ttyUSB0这个设备。
如果选择了usb的存储设备，加上一些文件系统的支持后，插上mmc转为u盘，清华紫光的U盘，都会报错，而插入nokia 6120c不会报错，并正确的识别了厂商，磁盘大小等信息，但并没有在/dev中增加一个sda设备。

busybox进行配置后，配置的文件在busybox-1.x/.config中，而编译时，每次都从busybox-1.x/configs/bbconfig-router这个文件复制到busybox-1.x/.config，所以设置了也无效，如果要进行busybox的裁剪，那么要把.config文件复制过去。

putty的行数设置在window标签中，容易直接去点window下面得标签，忽略其本身可以设置。

严斌买了个htc的手机，隐藏键盘，跑windows mobile，看上去还不错，3000多，他说如果是买多普达，就要7000多了。多普达就是htc在大陆的品牌。所以买htc就一定是水货，要重新刷系统。

吃饭的时候，昨天那个lcd厂家的人打电话给彭广才，彭广才说很忙，来聊天影响工作，很多人都有意见。那人问是不是李忠，彭广才说都有意见。

梁剑问多媒体坐席程序为什么有个拍照的功能。他已经把普通缴费、多媒体、开卡三个功能的程序合并成为一个程序。任开元问这个程序是否要发行。

李忠还在折腾传真机的话机软件，终于正确的显示了汉字，但程序似乎死掉了。他发现displayChar函数被修改了，而李柱栋则否认修改了这个函数。

张悦铃火气较大，和彭广才两人互相指责对方胡扯。
             
2009.4.20 
早上收到了Mark Lee <mark.lee@comtech.com.cn>的来信，附带了一份nvram的说明，其中有关于如何设置内存参数的值，stdram_init，设置了这个参数为0x000a后，显示的内存就有16M了，并且web访问后，wl_unit的值也是正常的0了。 
测试了一下自己编译的程序的无线部分： 
将公司网线插在lan中，笔记本ip设置为公司的局域网段，windows下连接后，可以正常访问局域网。但在linux下，无法连接无线网络。 
测试一下路由功能： 
将公司网线插在wlan中，wlan设置为公司局域网段，笔记本通过有线网卡插在lan中，ip是和公司局域网不同的私有网段。网管和dns设置为路由器lan的地址，可以正常访问公司局域网。wlan设置为135为网关和dns，135路由器不进行地址限制，则笔记本也能访问internet，135路由器进行地址限制，笔记本则不能访问internet。 
可以在路由中设置端口转发，实现nat的功能。 
在make menuconfig中选择了某个选项，在/dev/中出现了usb设备，但忘了是哪个了，还要好好的找一下。 
胡中奇要在pc上做一个短消息发送接收的程序，就来找我做一个动态库给他，接口是encode和decode，将要发送的短消息编码成可以发生的文本和将接收的短消息解码成可读的文本。由于在pc上完成，可以做得比话机上完整，7位编码的所有字符那么都可以支持，这样就不需要为某国语言进行单独的处理，而接受的所有unicode码也都可以显示了。 
下午一个液晶厂家的人来找彭广才，一直想套出一些关于通则公司对于供应商招标的一些细节出来，并谈到最佩服史玉柱，李忠立即表示史玉柱可恨，说他做的网络游戏伤害了很多青少年。又谈到三鹿，说三鹿也属于无奈之举，李忠对此嗤之以鼻，说做人的底线不能丢。显然李忠对这个人非常不满，直说他在这里打扰了工作，直到说第二次的时候，他才离去。 
王伍让严斌把usb的输入和输出反一下，结果严斌折腾错了，还好还没有看见冒烟。 
李忠和张悦玲都很反感做硬件的键盘线随意拉，其实这样只要在程序中建立一个对照表，不同的产品修改对照表就好了。奇怪。 

